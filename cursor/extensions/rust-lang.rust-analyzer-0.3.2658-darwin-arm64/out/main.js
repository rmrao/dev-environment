"use strict";var D1=Object.create;var Kc=Object.defineProperty;var R1=Object.getOwnPropertyDescriptor;var S1=Object.getOwnPropertyNames;var x1=Object.getPrototypeOf,P1=Object.prototype.hasOwnProperty;var K=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),E1=(t,e)=>{for(var n in e)Kc(t,n,{get:e[n],enumerable:!0})},Fw=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of S1(e))!P1.call(t,s)&&s!==n&&Kc(t,s,{get:()=>e[s],enumerable:!(i=R1(e,s))||i.enumerable});return t};var He=(t,e,n)=>(n=t!=null?D1(x1(t)):{},Fw(e||!t||!t.__esModule?Kc(n,"default",{value:t,enumerable:!0}):n,t)),k1=t=>Fw(Kc({},"__esModule",{value:!0}),t);var cr=K(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.asPromise=Xt.thenable=Xt.typedArray=Xt.stringArray=Xt.array=Xt.func=Xt.error=Xt.number=Xt.string=Xt.boolean=void 0;function I1(t){return t===!0||t===!1}Xt.boolean=I1;function Aw(t){return typeof t=="string"||t instanceof String}Xt.string=Aw;function O1(t){return typeof t=="number"||t instanceof Number}Xt.number=O1;function q1(t){return t instanceof Error}Xt.error=q1;function Lw(t){return typeof t=="function"}Xt.func=Lw;function Mw(t){return Array.isArray(t)}Xt.array=Mw;function F1(t){return Mw(t)&&t.every(e=>Aw(e))}Xt.stringArray=F1;function A1(t,e){return Array.isArray(t)&&t.every(e)}Xt.typedArray=A1;function Nw(t){return t&&Lw(t.then)}Xt.thenable=Nw;function L1(t){return t instanceof Promise?t:Nw(t)?new Promise((e,n)=>{t.then(i=>e(i),i=>n(i))}):Promise.resolve(t)}Xt.asPromise=L1});var os=K(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});In.stringArray=In.array=In.func=In.error=In.number=In.string=In.boolean=void 0;function M1(t){return t===!0||t===!1}In.boolean=M1;function $w(t){return typeof t=="string"||t instanceof String}In.string=$w;function N1(t){return typeof t=="number"||t instanceof Number}In.number=N1;function $1(t){return t instanceof Error}In.error=$1;function U1(t){return typeof t=="function"}In.func=U1;function Uw(t){return Array.isArray(t)}In.array=Uw;function H1(t){return Uw(t)&&t.every(e=>$w(e))}In.stringArray=H1});var Bf=K(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.Message=me.NotificationType9=me.NotificationType8=me.NotificationType7=me.NotificationType6=me.NotificationType5=me.NotificationType4=me.NotificationType3=me.NotificationType2=me.NotificationType1=me.NotificationType0=me.NotificationType=me.RequestType9=me.RequestType8=me.RequestType7=me.RequestType6=me.RequestType5=me.RequestType4=me.RequestType3=me.RequestType2=me.RequestType1=me.RequestType=me.RequestType0=me.AbstractMessageSignature=me.ParameterStructures=me.ResponseError=me.ErrorCodes=void 0;var xo=os(),_f;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(_f||(me.ErrorCodes=_f={}));var Tf=class t extends Error{constructor(e,n,i){super(n),this.code=xo.number(e)?e:_f.UnknownErrorCode,this.data=i,Object.setPrototypeOf(this,t.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};me.ResponseError=Tf;var ur=class t{constructor(e){this.kind=e}static is(e){return e===t.auto||e===t.byName||e===t.byPosition}toString(){return this.kind}};me.ParameterStructures=ur;ur.auto=new ur("auto");ur.byPosition=new ur("byPosition");ur.byName=new ur("byName");var xt=class{constructor(e,n){this.method=e,this.numberOfParams=n}get parameterStructures(){return ur.auto}};me.AbstractMessageSignature=xt;var Df=class extends xt{constructor(e){super(e,0)}};me.RequestType0=Df;var Rf=class extends xt{constructor(e,n=ur.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};me.RequestType=Rf;var Sf=class extends xt{constructor(e,n=ur.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};me.RequestType1=Sf;var xf=class extends xt{constructor(e){super(e,2)}};me.RequestType2=xf;var Pf=class extends xt{constructor(e){super(e,3)}};me.RequestType3=Pf;var Ef=class extends xt{constructor(e){super(e,4)}};me.RequestType4=Ef;var kf=class extends xt{constructor(e){super(e,5)}};me.RequestType5=kf;var If=class extends xt{constructor(e){super(e,6)}};me.RequestType6=If;var Of=class extends xt{constructor(e){super(e,7)}};me.RequestType7=Of;var qf=class extends xt{constructor(e){super(e,8)}};me.RequestType8=qf;var Ff=class extends xt{constructor(e){super(e,9)}};me.RequestType9=Ff;var Af=class extends xt{constructor(e,n=ur.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};me.NotificationType=Af;var Lf=class extends xt{constructor(e){super(e,0)}};me.NotificationType0=Lf;var Mf=class extends xt{constructor(e,n=ur.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};me.NotificationType1=Mf;var Nf=class extends xt{constructor(e){super(e,2)}};me.NotificationType2=Nf;var $f=class extends xt{constructor(e){super(e,3)}};me.NotificationType3=$f;var Uf=class extends xt{constructor(e){super(e,4)}};me.NotificationType4=Uf;var Hf=class extends xt{constructor(e){super(e,5)}};me.NotificationType5=Hf;var Wf=class extends xt{constructor(e){super(e,6)}};me.NotificationType6=Wf;var jf=class extends xt{constructor(e){super(e,7)}};me.NotificationType7=jf;var zf=class extends xt{constructor(e){super(e,8)}};me.NotificationType8=zf;var Kf=class extends xt{constructor(e){super(e,9)}};me.NotificationType9=Kf;var Hw;(function(t){function e(s){let c=s;return c&&xo.string(c.method)&&(xo.string(c.id)||xo.number(c.id))}t.isRequest=e;function n(s){let c=s;return c&&xo.string(c.method)&&s.id===void 0}t.isNotification=n;function i(s){let c=s;return c&&(c.result!==void 0||!!c.error)&&(xo.string(c.id)||xo.number(c.id)||c.id===null)}t.isResponse=i})(Hw||(me.Message=Hw={}))});var Gf=K(Yi=>{"use strict";var Ww;Object.defineProperty(Yi,"__esModule",{value:!0});Yi.LRUCache=Yi.LinkedMap=Yi.Touch=void 0;var On;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(On||(Yi.Touch=On={}));var Bc=class{constructor(){this[Ww]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,n=On.None){let i=this._map.get(e);if(i)return n!==On.None&&this.touch(i,n),i.value}set(e,n,i=On.None){let s=this._map.get(e);if(s)s.value=n,i!==On.None&&this.touch(s,i);else{switch(s={key:e,value:n,next:void 0,previous:void 0},i){case On.None:this.addItemLast(s);break;case On.First:this.addItemFirst(s);break;case On.Last:this.addItemLast(s);break;default:this.addItemLast(s);break}this._map.set(e,s),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let n=this._map.get(e);if(n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){let i=this._state,s=this._head;for(;s;){if(n?e.bind(n)(s.value,s.key,this):e(s.value,s.key,this),this._state!==i)throw new Error("LinkedMap got modified during iteration.");s=s.next}}keys(){let e=this._state,n=this._head,i={[Symbol.iterator]:()=>i,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let s={value:n.key,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}values(){let e=this._state,n=this._head,i={[Symbol.iterator]:()=>i,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let s={value:n.value,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}entries(){let e=this._state,n=this._head,i={[Symbol.iterator]:()=>i,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let s={value:[n.key,n.value],done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}[(Ww=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,i=this.size;for(;n&&i>e;)this._map.delete(n.key),n=n.next,i--;this._head=n,this._size=i,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let n=e.next,i=e.previous;if(!n||!i)throw new Error("Invalid list");n.previous=i,i.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==On.First&&n!==On.Last)){if(n===On.First){if(e===this._head)return;let i=e.next,s=e.previous;e===this._tail?(s.next=void 0,this._tail=s):(i.previous=s,s.next=i),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===On.Last){if(e===this._tail)return;let i=e.next,s=e.previous;e===this._head?(i.previous=void 0,this._head=i):(i.previous=s,s.next=i),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((n,i)=>{e.push([i,n])}),e}fromJSON(e){this.clear();for(let[n,i]of e)this.set(n,i)}};Yi.LinkedMap=Bc;var Vf=class extends Bc{constructor(e,n=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=On.AsNew){return super.get(e,n)}peek(e){return super.get(e,On.None)}set(e,n){return super.set(e,n,On.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Yi.LRUCache=Vf});var zw=K(Vc=>{"use strict";Object.defineProperty(Vc,"__esModule",{value:!0});Vc.Disposable=void 0;var jw;(function(t){function e(n){return{dispose:n}}t.create=e})(jw||(Vc.Disposable=jw={}))});var Zi=K(Jf=>{"use strict";Object.defineProperty(Jf,"__esModule",{value:!0});var Xf;function Qf(){if(Xf===void 0)throw new Error("No runtime abstraction layer installed");return Xf}(function(t){function e(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");Xf=n}t.install=e})(Qf||(Qf={}));Jf.default=Qf});var as=K(ss=>{"use strict";Object.defineProperty(ss,"__esModule",{value:!0});ss.Emitter=ss.Event=void 0;var W1=Zi(),Kw;(function(t){let e={dispose(){}};t.None=function(){return e}})(Kw||(ss.Event=Kw={}));var Yf=class{add(e,n=null,i){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(n),Array.isArray(i)&&i.push({dispose:()=>this.remove(e,n)})}remove(e,n=null){if(!this._callbacks)return;let i=!1;for(let s=0,c=this._callbacks.length;s<c;s++)if(this._callbacks[s]===e)if(this._contexts[s]===n){this._callbacks.splice(s,1),this._contexts.splice(s,1);return}else i=!0;if(i)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let n=[],i=this._callbacks.slice(0),s=this._contexts.slice(0);for(let c=0,u=i.length;c<u;c++)try{n.push(i[c].apply(s[c],e))}catch(l){(0,W1.default)().console.error(l)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Gc=class t{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,n,i)=>{this._callbacks||(this._callbacks=new Yf),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,n);let s={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,n),s.dispose=t._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(i)&&i.push(s),s}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};ss.Emitter=Gc;Gc._noop=function(){}});var Jc=K(cs=>{"use strict";Object.defineProperty(cs,"__esModule",{value:!0});cs.CancellationTokenSource=cs.CancellationToken=void 0;var j1=Zi(),z1=os(),Zf=as(),Xc;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Zf.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Zf.Event.None});function e(n){let i=n;return i&&(i===t.None||i===t.Cancelled||z1.boolean(i.isCancellationRequested)&&!!i.onCancellationRequested)}t.is=e})(Xc||(cs.CancellationToken=Xc={}));var K1=Object.freeze(function(t,e){let n=(0,j1.default)().timer.setTimeout(t.bind(e),0);return{dispose(){n.dispose()}}}),Qc=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?K1:(this._emitter||(this._emitter=new Zf.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},ep=class{get token(){return this._token||(this._token=new Qc),this._token}cancel(){this._token?this._token.cancel():this._token=Xc.Cancelled}dispose(){this._token?this._token instanceof Qc&&this._token.dispose():this._token=Xc.None}};cs.CancellationTokenSource=ep});var Bw=K(us=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0});us.SharedArrayReceiverStrategy=us.SharedArraySenderStrategy=void 0;var B1=Jc(),aa;(function(t){t.Continue=0,t.Cancelled=1})(aa||(aa={}));var tp=class{constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let n=new SharedArrayBuffer(4),i=new Int32Array(n,0,1);i[0]=aa.Continue,this.buffers.set(e.id,n),e.$cancellationData=n}async sendCancellation(e,n){let i=this.buffers.get(n);if(i===void 0)return;let s=new Int32Array(i,0,1);Atomics.store(s,0,aa.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};us.SharedArraySenderStrategy=tp;var np=class{constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===aa.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},rp=class{constructor(e){this.token=new np(e)}cancel(){}dispose(){}},ip=class{constructor(){this.kind="request"}createCancellationTokenSource(e){let n=e.$cancellationData;return n===void 0?new B1.CancellationTokenSource:new rp(n)}};us.SharedArrayReceiverStrategy=ip});var sp=K(Yc=>{"use strict";Object.defineProperty(Yc,"__esModule",{value:!0});Yc.Semaphore=void 0;var V1=Zi(),op=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((n,i)=>{this._waiting.push({thunk:e,resolve:n,reject:i}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,V1.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=e.thunk();n instanceof Promise?n.then(i=>{this._active--,e.resolve(i),this.runNext()},i=>{this._active--,e.reject(i),this.runNext()}):(this._active--,e.resolve(n),this.runNext())}catch(n){this._active--,e.reject(n),this.runNext()}}};Yc.Semaphore=op});var Gw=K(eo=>{"use strict";Object.defineProperty(eo,"__esModule",{value:!0});eo.ReadableStreamMessageReader=eo.AbstractMessageReader=eo.MessageReader=void 0;var cp=Zi(),ls=os(),ap=as(),G1=sp(),Vw;(function(t){function e(n){let i=n;return i&&ls.func(i.listen)&&ls.func(i.dispose)&&ls.func(i.onError)&&ls.func(i.onClose)&&ls.func(i.onPartialMessage)}t.is=e})(Vw||(eo.MessageReader=Vw={}));var Zc=class{constructor(){this.errorEmitter=new ap.Emitter,this.closeEmitter=new ap.Emitter,this.partialMessageEmitter=new ap.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${ls.string(e.message)?e.message:"unknown"}`)}};eo.AbstractMessageReader=Zc;var up;(function(t){function e(n){let i,s,c,u=new Map,l,f=new Map;if(n===void 0||typeof n=="string")i=n??"utf-8";else{if(i=n.charset??"utf-8",n.contentDecoder!==void 0&&(c=n.contentDecoder,u.set(c.name,c)),n.contentDecoders!==void 0)for(let h of n.contentDecoders)u.set(h.name,h);if(n.contentTypeDecoder!==void 0&&(l=n.contentTypeDecoder,f.set(l.name,l)),n.contentTypeDecoders!==void 0)for(let h of n.contentTypeDecoders)f.set(h.name,h)}return l===void 0&&(l=(0,cp.default)().applicationJson.decoder,f.set(l.name,l)),{charset:i,contentDecoder:c,contentDecoders:u,contentTypeDecoder:l,contentTypeDecoders:f}}t.fromOptions=e})(up||(up={}));var lp=class extends Zc{constructor(e,n){super(),this.readable=e,this.options=up.fromOptions(n),this.buffer=(0,cp.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new G1.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let n=this.readable.onData(i=>{this.onData(i)});return this.readable.onError(i=>this.fireError(i)),this.readable.onClose(()=>this.fireClose()),n}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let i=this.buffer.tryReadHeaders(!0);if(!i)return;let s=i.get("content-length");if(!s){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(i))}`));return}let c=parseInt(s);if(isNaN(c)){this.fireError(new Error(`Content-Length value must be a number. Got ${s}`));return}this.nextMessageLength=c}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let i=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(n):n,s=await this.options.contentTypeDecoder.decode(i,this.options);this.callback(s)}).catch(i=>{this.fireError(i)})}}catch(n){this.fireError(n)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,cp.default)().timer.setTimeout((e,n)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};eo.ReadableStreamMessageReader=lp});var Zw=K(to=>{"use strict";Object.defineProperty(to,"__esModule",{value:!0});to.WriteableStreamMessageWriter=to.AbstractMessageWriter=to.MessageWriter=void 0;var Xw=Zi(),ca=os(),X1=sp(),Qw=as(),Q1="Content-Length: ",Jw=`\r
`,Yw;(function(t){function e(n){let i=n;return i&&ca.func(i.dispose)&&ca.func(i.onClose)&&ca.func(i.onError)&&ca.func(i.write)}t.is=e})(Yw||(to.MessageWriter=Yw={}));var eu=class{constructor(){this.errorEmitter=new Qw.Emitter,this.closeEmitter=new Qw.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,n,i){this.errorEmitter.fire([this.asError(e),n,i])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${ca.string(e.message)?e.message:"unknown"}`)}};to.AbstractMessageWriter=eu;var dp;(function(t){function e(n){return n===void 0||typeof n=="string"?{charset:n??"utf-8",contentTypeEncoder:(0,Xw.default)().applicationJson.encoder}:{charset:n.charset??"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:n.contentTypeEncoder??(0,Xw.default)().applicationJson.encoder}}t.fromOptions=e})(dp||(dp={}));var fp=class extends eu{constructor(e,n){super(),this.writable=e,this.options=dp.fromOptions(n),this.errorCount=0,this.writeSemaphore=new X1.Semaphore(1),this.writable.onError(i=>this.fireError(i)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(i=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(i):i).then(i=>{let s=[];return s.push(Q1,i.byteLength.toString(),Jw),s.push(Jw),this.doWrite(e,s,i)},i=>{throw this.fireError(i),i}))}async doWrite(e,n,i){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(i)}catch(s){return this.handleError(s,e),Promise.reject(s)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){this.writable.end()}};to.WriteableStreamMessageWriter=fp});var eC=K(tu=>{"use strict";Object.defineProperty(tu,"__esModule",{value:!0});tu.AbstractMessageBuffer=void 0;var J1=13,Y1=10,Z1=`\r
`,pp=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let n=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let n=0,i=0,s=0,c=0;e:for(;i<this._chunks.length;){let h=this._chunks[i];for(s=0;s<h.length;){switch(h[s]){case J1:switch(n){case 0:n=1;break;case 2:n=3;break;default:n=0}break;case Y1:switch(n){case 1:n=2;break;case 3:n=4,s++;break e;default:n=0}break;default:n=0}s++}c+=h.byteLength,i++}if(n!==4)return;let u=this._read(c+s),l=new Map,f=this.toString(u,"ascii").split(Z1);if(f.length<2)return l;for(let h=0;h<f.length-2;h++){let g=f[h],C=g.indexOf(":");if(C===-1)throw new Error(`Message header must separate key and value using ':'
${g}`);let _=g.substr(0,C),S=g.substr(C+1).trim();l.set(e?_.toLowerCase():_,S)}return l}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let c=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(c)}if(this._chunks[0].byteLength>e){let c=this._chunks[0],u=this.asNative(c,e);return this._chunks[0]=c.slice(e),this._totalLength-=e,u}let n=this.allocNative(e),i=0,s=0;for(;e>0;){let c=this._chunks[s];if(c.byteLength>e){let u=c.slice(0,e);n.set(u,i),i+=e,this._chunks[s]=c.slice(e),this._totalLength-=e,e-=e}else n.set(c,i),i+=c.byteLength,this._chunks.shift(),this._totalLength-=c.byteLength,e-=c.byteLength}return n}};tu.AbstractMessageBuffer=pp});var oC=K(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.createMessageConnection=qe.ConnectionOptions=qe.MessageStrategy=qe.CancellationStrategy=qe.CancellationSenderStrategy=qe.CancellationReceiverStrategy=qe.RequestCancellationReceiverStrategy=qe.IdCancellationReceiverStrategy=qe.ConnectionStrategy=qe.ConnectionError=qe.ConnectionErrors=qe.LogTraceNotification=qe.SetTraceNotification=qe.TraceFormat=qe.TraceValues=qe.Trace=qe.NullLogger=qe.ProgressType=qe.ProgressToken=void 0;var tC=Zi(),Ut=os(),Te=Bf(),nC=Gf(),ua=as(),hp=Jc(),fa;(function(t){t.type=new Te.NotificationType("$/cancelRequest")})(fa||(fa={}));var gp;(function(t){function e(n){return typeof n=="string"||typeof n=="number"}t.is=e})(gp||(qe.ProgressToken=gp={}));var la;(function(t){t.type=new Te.NotificationType("$/progress")})(la||(la={}));var mp=class{constructor(){}};qe.ProgressType=mp;var vp;(function(t){function e(n){return Ut.func(n)}t.is=e})(vp||(vp={}));qe.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var lt;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(lt||(qe.Trace=lt={}));var rC;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(rC||(qe.TraceValues=rC={}));(function(t){function e(i){if(!Ut.string(i))return t.Off;switch(i=i.toLowerCase(),i){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}t.fromString=e;function n(i){switch(i){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}t.toString=n})(lt||(qe.Trace=lt={}));var Er;(function(t){t.Text="text",t.JSON="json"})(Er||(qe.TraceFormat=Er={}));(function(t){function e(n){return Ut.string(n)?(n=n.toLowerCase(),n==="json"?t.JSON:t.Text):t.Text}t.fromString=e})(Er||(qe.TraceFormat=Er={}));var yp;(function(t){t.type=new Te.NotificationType("$/setTrace")})(yp||(qe.SetTraceNotification=yp={}));var nu;(function(t){t.type=new Te.NotificationType("$/logTrace")})(nu||(qe.LogTraceNotification=nu={}));var da;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(da||(qe.ConnectionErrors=da={}));var ds=class t extends Error{constructor(e,n){super(n),this.code=e,Object.setPrototypeOf(this,t.prototype)}};qe.ConnectionError=ds;var wp;(function(t){function e(n){let i=n;return i&&Ut.func(i.cancelUndispatched)}t.is=e})(wp||(qe.ConnectionStrategy=wp={}));var ru;(function(t){function e(n){let i=n;return i&&(i.kind===void 0||i.kind==="id")&&Ut.func(i.createCancellationTokenSource)&&(i.dispose===void 0||Ut.func(i.dispose))}t.is=e})(ru||(qe.IdCancellationReceiverStrategy=ru={}));var Cp;(function(t){function e(n){let i=n;return i&&i.kind==="request"&&Ut.func(i.createCancellationTokenSource)&&(i.dispose===void 0||Ut.func(i.dispose))}t.is=e})(Cp||(qe.RequestCancellationReceiverStrategy=Cp={}));var iu;(function(t){t.Message=Object.freeze({createCancellationTokenSource(n){return new hp.CancellationTokenSource}});function e(n){return ru.is(n)||Cp.is(n)}t.is=e})(iu||(qe.CancellationReceiverStrategy=iu={}));var ou;(function(t){t.Message=Object.freeze({sendCancellation(n,i){return n.sendNotification(fa.type,{id:i})},cleanup(n){}});function e(n){let i=n;return i&&Ut.func(i.sendCancellation)&&Ut.func(i.cleanup)}t.is=e})(ou||(qe.CancellationSenderStrategy=ou={}));var su;(function(t){t.Message=Object.freeze({receiver:iu.Message,sender:ou.Message});function e(n){let i=n;return i&&iu.is(i.receiver)&&ou.is(i.sender)}t.is=e})(su||(qe.CancellationStrategy=su={}));var au;(function(t){function e(n){let i=n;return i&&Ut.func(i.handleMessage)}t.is=e})(au||(qe.MessageStrategy=au={}));var iC;(function(t){function e(n){let i=n;return i&&(su.is(i.cancellationStrategy)||wp.is(i.connectionStrategy)||au.is(i.messageStrategy))}t.is=e})(iC||(qe.ConnectionOptions=iC={}));var oi;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(oi||(oi={}));function eF(t,e,n,i){let s=n!==void 0?n:qe.NullLogger,c=0,u=0,l=0,f="2.0",h,g=new Map,C,_=new Map,S=new Map,T,L=new nC.LinkedMap,F=new Map,H=new Set,B=new Map,U=lt.Off,ee=Er.Text,oe,ye=oi.New,se=new ua.Emitter,we=new ua.Emitter,Ie=new ua.Emitter,Lt=new ua.Emitter,Et=new ua.Emitter,Mt=i&&i.cancellationStrategy?i.cancellationStrategy:su.Message;function tr(E){if(E===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+E.toString()}function yn(E){return E===null?"res-unknown-"+(++l).toString():"res-"+E.toString()}function Rt(){return"not-"+(++u).toString()}function Ct(E,V){Te.Message.isRequest(V)?E.set(tr(V.id),V):Te.Message.isResponse(V)?E.set(yn(V.id),V):E.set(Rt(),V)}function yr(E){}function Un(){return ye===oi.Listening}function Ke(){return ye===oi.Closed}function Rn(){return ye===oi.Disposed}function wn(){(ye===oi.New||ye===oi.Listening)&&(ye=oi.Closed,we.fire(void 0))}function sn(E){se.fire([E,void 0,void 0])}function Hn(E){se.fire(E)}t.onClose(wn),t.onError(sn),e.onClose(wn),e.onError(Hn);function Wn(){T||L.size===0||(T=(0,tC.default)().timer.setImmediate(()=>{T=void 0,jn()}))}function Ar(E){Te.Message.isRequest(E)?Lr(E):Te.Message.isNotification(E)?xn(E):Te.Message.isResponse(E)?Sn(E):wr(E)}function jn(){if(L.size===0)return;let E=L.shift();try{let V=i?.messageStrategy;au.is(V)?V.handleMessage(E,Ar):Ar(E)}finally{Wn()}}let nr=E=>{try{if(Te.Message.isNotification(E)&&E.method===fa.type.method){let V=E.params.id,re=tr(V),ae=L.get(re);if(Te.Message.isRequest(ae)){let We=i?.connectionStrategy,Ze=We&&We.cancelUndispatched?We.cancelUndispatched(ae,yr):void 0;if(Ze&&(Ze.error!==void 0||Ze.result!==void 0)){L.delete(re),B.delete(V),Ze.id=ae.id,Kt(Ze,E.method,Date.now()),e.write(Ze).catch(()=>s.error("Sending response for canceled message failed."));return}}let Be=B.get(V);if(Be!==void 0){Be.cancel(),rr(E);return}else H.add(V)}Ct(L,E)}finally{Wn()}};function Lr(E){if(Rn())return;function V(Pe,et,Ne){let at={jsonrpc:f,id:E.id};Pe instanceof Te.ResponseError?at.error=Pe.toJson():at.result=Pe===void 0?null:Pe,Kt(at,et,Ne),e.write(at).catch(()=>s.error("Sending response failed."))}function re(Pe,et,Ne){let at={jsonrpc:f,id:E.id,error:Pe.toJson()};Kt(at,et,Ne),e.write(at).catch(()=>s.error("Sending response failed."))}function ae(Pe,et,Ne){Pe===void 0&&(Pe=null);let at={jsonrpc:f,id:E.id,result:Pe};Kt(at,et,Ne),e.write(at).catch(()=>s.error("Sending response failed."))}ei(E);let Be=g.get(E.method),We,Ze;Be&&(We=Be.type,Ze=Be.handler);let ft=Date.now();if(Ze||h){let Pe=E.id??String(Date.now()),et=ru.is(Mt.receiver)?Mt.receiver.createCancellationTokenSource(Pe):Mt.receiver.createCancellationTokenSource(E);E.id!==null&&H.has(E.id)&&et.cancel(),E.id!==null&&B.set(Pe,et);try{let Ne;if(Ze)if(E.params===void 0){if(We!==void 0&&We.numberOfParams!==0){re(new Te.ResponseError(Te.ErrorCodes.InvalidParams,`Request ${E.method} defines ${We.numberOfParams} params but received none.`),E.method,ft);return}Ne=Ze(et.token)}else if(Array.isArray(E.params)){if(We!==void 0&&We.parameterStructures===Te.ParameterStructures.byName){re(new Te.ResponseError(Te.ErrorCodes.InvalidParams,`Request ${E.method} defines parameters by name but received parameters by position`),E.method,ft);return}Ne=Ze(...E.params,et.token)}else{if(We!==void 0&&We.parameterStructures===Te.ParameterStructures.byPosition){re(new Te.ResponseError(Te.ErrorCodes.InvalidParams,`Request ${E.method} defines parameters by position but received parameters by name`),E.method,ft);return}Ne=Ze(E.params,et.token)}else h&&(Ne=h(E.method,E.params,et.token));let at=Ne;Ne?at.then?at.then(kt=>{B.delete(Pe),V(kt,E.method,ft)},kt=>{B.delete(Pe),kt instanceof Te.ResponseError?re(kt,E.method,ft):kt&&Ut.string(kt.message)?re(new Te.ResponseError(Te.ErrorCodes.InternalError,`Request ${E.method} failed with message: ${kt.message}`),E.method,ft):re(new Te.ResponseError(Te.ErrorCodes.InternalError,`Request ${E.method} failed unexpectedly without providing any details.`),E.method,ft)}):(B.delete(Pe),V(Ne,E.method,ft)):(B.delete(Pe),ae(Ne,E.method,ft))}catch(Ne){B.delete(Pe),Ne instanceof Te.ResponseError?V(Ne,E.method,ft):Ne&&Ut.string(Ne.message)?re(new Te.ResponseError(Te.ErrorCodes.InternalError,`Request ${E.method} failed with message: ${Ne.message}`),E.method,ft):re(new Te.ResponseError(Te.ErrorCodes.InternalError,`Request ${E.method} failed unexpectedly without providing any details.`),E.method,ft)}}else re(new Te.ResponseError(Te.ErrorCodes.MethodNotFound,`Unhandled method ${E.method}`),E.method,ft)}function Sn(E){if(!Rn())if(E.id===null)E.error?s.error(`Received response message without id: Error is: 
${JSON.stringify(E.error,void 0,4)}`):s.error("Received response message without id. No further error information provided.");else{let V=E.id,re=F.get(V);if(Pn(E,re),re!==void 0){F.delete(V);try{if(E.error){let ae=E.error;re.reject(new Te.ResponseError(ae.code,ae.message,ae.data))}else if(E.result!==void 0)re.resolve(E.result);else throw new Error("Should never happen.")}catch(ae){ae.message?s.error(`Response handler '${re.method}' failed with message: ${ae.message}`):s.error(`Response handler '${re.method}' failed unexpectedly.`)}}}}function xn(E){if(Rn())return;let V,re;if(E.method===fa.type.method){let ae=E.params.id;H.delete(ae),rr(E);return}else{let ae=_.get(E.method);ae&&(re=ae.handler,V=ae.type)}if(re||C)try{if(rr(E),re)if(E.params===void 0)V!==void 0&&V.numberOfParams!==0&&V.parameterStructures!==Te.ParameterStructures.byName&&s.error(`Notification ${E.method} defines ${V.numberOfParams} params but received none.`),re();else if(Array.isArray(E.params)){let ae=E.params;E.method===la.type.method&&ae.length===2&&gp.is(ae[0])?re({token:ae[0],value:ae[1]}):(V!==void 0&&(V.parameterStructures===Te.ParameterStructures.byName&&s.error(`Notification ${E.method} defines parameters by name but received parameters by position`),V.numberOfParams!==E.params.length&&s.error(`Notification ${E.method} defines ${V.numberOfParams} params but received ${ae.length} arguments`)),re(...ae))}else V!==void 0&&V.parameterStructures===Te.ParameterStructures.byPosition&&s.error(`Notification ${E.method} defines parameters by position but received parameters by name`),re(E.params);else C&&C(E.method,E.params)}catch(ae){ae.message?s.error(`Notification handler '${E.method}' failed with message: ${ae.message}`):s.error(`Notification handler '${E.method}' failed unexpectedly.`)}else Ie.fire(E)}function wr(E){if(!E){s.error("Received empty message.");return}s.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(E,null,4)}`);let V=E;if(Ut.string(V.id)||Ut.number(V.id)){let re=V.id,ae=F.get(re);ae&&ae.reject(new Error("The received response has neither a result nor an error property."))}}function st(E){if(E!=null)switch(U){case lt.Verbose:return JSON.stringify(E,null,4);case lt.Compact:return JSON.stringify(E);default:return}}function zn(E){if(!(U===lt.Off||!oe))if(ee===Er.Text){let V;(U===lt.Verbose||U===lt.Compact)&&E.params&&(V=`Params: ${st(E.params)}

`),oe.log(`Sending request '${E.method} - (${E.id})'.`,V)}else rt("send-request",E)}function Cr(E){if(!(U===lt.Off||!oe))if(ee===Er.Text){let V;(U===lt.Verbose||U===lt.Compact)&&(E.params?V=`Params: ${st(E.params)}

`:V=`No parameters provided.

`),oe.log(`Sending notification '${E.method}'.`,V)}else rt("send-notification",E)}function Kt(E,V,re){if(!(U===lt.Off||!oe))if(ee===Er.Text){let ae;(U===lt.Verbose||U===lt.Compact)&&(E.error&&E.error.data?ae=`Error data: ${st(E.error.data)}

`:E.result?ae=`Result: ${st(E.result)}

`:E.error===void 0&&(ae=`No result returned.

`)),oe.log(`Sending response '${V} - (${E.id})'. Processing request took ${Date.now()-re}ms`,ae)}else rt("send-response",E)}function ei(E){if(!(U===lt.Off||!oe))if(ee===Er.Text){let V;(U===lt.Verbose||U===lt.Compact)&&E.params&&(V=`Params: ${st(E.params)}

`),oe.log(`Received request '${E.method} - (${E.id})'.`,V)}else rt("receive-request",E)}function rr(E){if(!(U===lt.Off||!oe||E.method===nu.type.method))if(ee===Er.Text){let V;(U===lt.Verbose||U===lt.Compact)&&(E.params?V=`Params: ${st(E.params)}

`:V=`No parameters provided.

`),oe.log(`Received notification '${E.method}'.`,V)}else rt("receive-notification",E)}function Pn(E,V){if(!(U===lt.Off||!oe))if(ee===Er.Text){let re;if((U===lt.Verbose||U===lt.Compact)&&(E.error&&E.error.data?re=`Error data: ${st(E.error.data)}

`:E.result?re=`Result: ${st(E.result)}

`:E.error===void 0&&(re=`No result returned.

`)),V){let ae=E.error?` Request failed: ${E.error.message} (${E.error.code}).`:"";oe.log(`Received response '${V.method} - (${E.id})' in ${Date.now()-V.timerStart}ms.${ae}`,re)}else oe.log(`Received response ${E.id} without active response promise.`,re)}else rt("receive-response",E)}function rt(E,V){if(!oe||U===lt.Off)return;let re={isLSPMessage:!0,type:E,message:V,timestamp:Date.now()};oe.log(re)}function Bt(){if(Ke())throw new ds(da.Closed,"Connection is closed.");if(Rn())throw new ds(da.Disposed,"Connection is disposed.")}function Vt(){if(Un())throw new ds(da.AlreadyListening,"Connection is already listening")}function Kn(){if(!Un())throw new Error("Call listen() first.")}function tn(E){return E===void 0?null:E}function Mr(E){if(E!==null)return E}function Bn(E){return E!=null&&!Array.isArray(E)&&typeof E=="object"}function fn(E,V){switch(E){case Te.ParameterStructures.auto:return Bn(V)?Mr(V):[tn(V)];case Te.ParameterStructures.byName:if(!Bn(V))throw new Error("Received parameters by name but param is not an object literal.");return Mr(V);case Te.ParameterStructures.byPosition:return[tn(V)];default:throw new Error(`Unknown parameter structure ${E.toString()}`)}}function br(E,V){let re,ae=E.numberOfParams;switch(ae){case 0:re=void 0;break;case 1:re=fn(E.parameterStructures,V[0]);break;default:re=[];for(let Be=0;Be<V.length&&Be<ae;Be++)re.push(tn(V[Be]));if(V.length<ae)for(let Be=V.length;Be<ae;Be++)re.push(null);break}return re}let an={sendNotification:(E,...V)=>{Bt();let re,ae;if(Ut.string(E)){re=E;let We=V[0],Ze=0,ft=Te.ParameterStructures.auto;Te.ParameterStructures.is(We)&&(Ze=1,ft=We);let Pe=V.length,et=Pe-Ze;switch(et){case 0:ae=void 0;break;case 1:ae=fn(ft,V[Ze]);break;default:if(ft===Te.ParameterStructures.byName)throw new Error(`Received ${et} parameters for 'by Name' notification parameter structure.`);ae=V.slice(Ze,Pe).map(Ne=>tn(Ne));break}}else{let We=V;re=E.method,ae=br(E,We)}let Be={jsonrpc:f,method:re,params:ae};return Cr(Be),e.write(Be).catch(We=>{throw s.error("Sending notification failed."),We})},onNotification:(E,V)=>{Bt();let re;return Ut.func(E)?C=E:V&&(Ut.string(E)?(re=E,_.set(E,{type:void 0,handler:V})):(re=E.method,_.set(E.method,{type:E,handler:V}))),{dispose:()=>{re!==void 0?_.delete(re):C=void 0}}},onProgress:(E,V,re)=>{if(S.has(V))throw new Error(`Progress handler for token ${V} already registered`);return S.set(V,re),{dispose:()=>{S.delete(V)}}},sendProgress:(E,V,re)=>an.sendNotification(la.type,{token:V,value:re}),onUnhandledProgress:Lt.event,sendRequest:(E,...V)=>{Bt(),Kn();let re,ae,Be;if(Ut.string(E)){re=E;let Pe=V[0],et=V[V.length-1],Ne=0,at=Te.ParameterStructures.auto;Te.ParameterStructures.is(Pe)&&(Ne=1,at=Pe);let kt=V.length;hp.CancellationToken.is(et)&&(kt=kt-1,Be=et);let nn=kt-Ne;switch(nn){case 0:ae=void 0;break;case 1:ae=fn(at,V[Ne]);break;default:if(at===Te.ParameterStructures.byName)throw new Error(`Received ${nn} parameters for 'by Name' request parameter structure.`);ae=V.slice(Ne,kt).map(di=>tn(di));break}}else{let Pe=V;re=E.method,ae=br(E,Pe);let et=E.numberOfParams;Be=hp.CancellationToken.is(Pe[et])?Pe[et]:void 0}let We=c++,Ze;Be&&(Ze=Be.onCancellationRequested(()=>{let Pe=Mt.sender.sendCancellation(an,We);return Pe===void 0?(s.log(`Received no promise from cancellation strategy when cancelling id ${We}`),Promise.resolve()):Pe.catch(()=>{s.log(`Sending cancellation messages for id ${We} failed`)})}));let ft={jsonrpc:f,id:We,method:re,params:ae};return zn(ft),typeof Mt.sender.enableCancellation=="function"&&Mt.sender.enableCancellation(ft),new Promise(async(Pe,et)=>{let Ne=nn=>{Pe(nn),Mt.sender.cleanup(We),Ze?.dispose()},at=nn=>{et(nn),Mt.sender.cleanup(We),Ze?.dispose()},kt={method:re,timerStart:Date.now(),resolve:Ne,reject:at};try{await e.write(ft),F.set(We,kt)}catch(nn){throw s.error("Sending request failed."),kt.reject(new Te.ResponseError(Te.ErrorCodes.MessageWriteError,nn.message?nn.message:"Unknown reason")),nn}})},onRequest:(E,V)=>{Bt();let re=null;return vp.is(E)?(re=void 0,h=E):Ut.string(E)?(re=null,V!==void 0&&(re=E,g.set(E,{handler:V,type:void 0}))):V!==void 0&&(re=E.method,g.set(E.method,{type:E,handler:V})),{dispose:()=>{re!==null&&(re!==void 0?g.delete(re):h=void 0)}}},hasPendingResponse:()=>F.size>0,trace:async(E,V,re)=>{let ae=!1,Be=Er.Text;re!==void 0&&(Ut.boolean(re)?ae=re:(ae=re.sendNotification||!1,Be=re.traceFormat||Er.Text)),U=E,ee=Be,U===lt.Off?oe=void 0:oe=V,ae&&!Ke()&&!Rn()&&await an.sendNotification(yp.type,{value:lt.toString(E)})},onError:se.event,onClose:we.event,onUnhandledNotification:Ie.event,onDispose:Et.event,end:()=>{e.end()},dispose:()=>{if(Rn())return;ye=oi.Disposed,Et.fire(void 0);let E=new Te.ResponseError(Te.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let V of F.values())V.reject(E);F=new Map,B=new Map,H=new Set,L=new nC.LinkedMap,Ut.func(e.dispose)&&e.dispose(),Ut.func(t.dispose)&&t.dispose()},listen:()=>{Bt(),Vt(),ye=oi.Listening,t.listen(nr)},inspect:()=>{(0,tC.default)().console.log("inspect")}};return an.onNotification(nu.type,E=>{if(U===lt.Off||!oe)return;let V=U===lt.Verbose||U===lt.Compact;oe.log(E.message,V?E.verbose:void 0)}),an.onNotification(la.type,E=>{let V=S.get(E.token);V?V(E.value):Lt.fire(E)}),an}qe.createMessageConnection=eF});var cu=K(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.ProgressType=X.ProgressToken=X.createMessageConnection=X.NullLogger=X.ConnectionOptions=X.ConnectionStrategy=X.AbstractMessageBuffer=X.WriteableStreamMessageWriter=X.AbstractMessageWriter=X.MessageWriter=X.ReadableStreamMessageReader=X.AbstractMessageReader=X.MessageReader=X.SharedArrayReceiverStrategy=X.SharedArraySenderStrategy=X.CancellationToken=X.CancellationTokenSource=X.Emitter=X.Event=X.Disposable=X.LRUCache=X.Touch=X.LinkedMap=X.ParameterStructures=X.NotificationType9=X.NotificationType8=X.NotificationType7=X.NotificationType6=X.NotificationType5=X.NotificationType4=X.NotificationType3=X.NotificationType2=X.NotificationType1=X.NotificationType0=X.NotificationType=X.ErrorCodes=X.ResponseError=X.RequestType9=X.RequestType8=X.RequestType7=X.RequestType6=X.RequestType5=X.RequestType4=X.RequestType3=X.RequestType2=X.RequestType1=X.RequestType0=X.RequestType=X.Message=X.RAL=void 0;X.MessageStrategy=X.CancellationStrategy=X.CancellationSenderStrategy=X.CancellationReceiverStrategy=X.ConnectionError=X.ConnectionErrors=X.LogTraceNotification=X.SetTraceNotification=X.TraceFormat=X.TraceValues=X.Trace=void 0;var Tt=Bf();Object.defineProperty(X,"Message",{enumerable:!0,get:function(){return Tt.Message}});Object.defineProperty(X,"RequestType",{enumerable:!0,get:function(){return Tt.RequestType}});Object.defineProperty(X,"RequestType0",{enumerable:!0,get:function(){return Tt.RequestType0}});Object.defineProperty(X,"RequestType1",{enumerable:!0,get:function(){return Tt.RequestType1}});Object.defineProperty(X,"RequestType2",{enumerable:!0,get:function(){return Tt.RequestType2}});Object.defineProperty(X,"RequestType3",{enumerable:!0,get:function(){return Tt.RequestType3}});Object.defineProperty(X,"RequestType4",{enumerable:!0,get:function(){return Tt.RequestType4}});Object.defineProperty(X,"RequestType5",{enumerable:!0,get:function(){return Tt.RequestType5}});Object.defineProperty(X,"RequestType6",{enumerable:!0,get:function(){return Tt.RequestType6}});Object.defineProperty(X,"RequestType7",{enumerable:!0,get:function(){return Tt.RequestType7}});Object.defineProperty(X,"RequestType8",{enumerable:!0,get:function(){return Tt.RequestType8}});Object.defineProperty(X,"RequestType9",{enumerable:!0,get:function(){return Tt.RequestType9}});Object.defineProperty(X,"ResponseError",{enumerable:!0,get:function(){return Tt.ResponseError}});Object.defineProperty(X,"ErrorCodes",{enumerable:!0,get:function(){return Tt.ErrorCodes}});Object.defineProperty(X,"NotificationType",{enumerable:!0,get:function(){return Tt.NotificationType}});Object.defineProperty(X,"NotificationType0",{enumerable:!0,get:function(){return Tt.NotificationType0}});Object.defineProperty(X,"NotificationType1",{enumerable:!0,get:function(){return Tt.NotificationType1}});Object.defineProperty(X,"NotificationType2",{enumerable:!0,get:function(){return Tt.NotificationType2}});Object.defineProperty(X,"NotificationType3",{enumerable:!0,get:function(){return Tt.NotificationType3}});Object.defineProperty(X,"NotificationType4",{enumerable:!0,get:function(){return Tt.NotificationType4}});Object.defineProperty(X,"NotificationType5",{enumerable:!0,get:function(){return Tt.NotificationType5}});Object.defineProperty(X,"NotificationType6",{enumerable:!0,get:function(){return Tt.NotificationType6}});Object.defineProperty(X,"NotificationType7",{enumerable:!0,get:function(){return Tt.NotificationType7}});Object.defineProperty(X,"NotificationType8",{enumerable:!0,get:function(){return Tt.NotificationType8}});Object.defineProperty(X,"NotificationType9",{enumerable:!0,get:function(){return Tt.NotificationType9}});Object.defineProperty(X,"ParameterStructures",{enumerable:!0,get:function(){return Tt.ParameterStructures}});var bp=Gf();Object.defineProperty(X,"LinkedMap",{enumerable:!0,get:function(){return bp.LinkedMap}});Object.defineProperty(X,"LRUCache",{enumerable:!0,get:function(){return bp.LRUCache}});Object.defineProperty(X,"Touch",{enumerable:!0,get:function(){return bp.Touch}});var tF=zw();Object.defineProperty(X,"Disposable",{enumerable:!0,get:function(){return tF.Disposable}});var sC=as();Object.defineProperty(X,"Event",{enumerable:!0,get:function(){return sC.Event}});Object.defineProperty(X,"Emitter",{enumerable:!0,get:function(){return sC.Emitter}});var aC=Jc();Object.defineProperty(X,"CancellationTokenSource",{enumerable:!0,get:function(){return aC.CancellationTokenSource}});Object.defineProperty(X,"CancellationToken",{enumerable:!0,get:function(){return aC.CancellationToken}});var cC=Bw();Object.defineProperty(X,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return cC.SharedArraySenderStrategy}});Object.defineProperty(X,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return cC.SharedArrayReceiverStrategy}});var _p=Gw();Object.defineProperty(X,"MessageReader",{enumerable:!0,get:function(){return _p.MessageReader}});Object.defineProperty(X,"AbstractMessageReader",{enumerable:!0,get:function(){return _p.AbstractMessageReader}});Object.defineProperty(X,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return _p.ReadableStreamMessageReader}});var Tp=Zw();Object.defineProperty(X,"MessageWriter",{enumerable:!0,get:function(){return Tp.MessageWriter}});Object.defineProperty(X,"AbstractMessageWriter",{enumerable:!0,get:function(){return Tp.AbstractMessageWriter}});Object.defineProperty(X,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return Tp.WriteableStreamMessageWriter}});var nF=eC();Object.defineProperty(X,"AbstractMessageBuffer",{enumerable:!0,get:function(){return nF.AbstractMessageBuffer}});var _n=oC();Object.defineProperty(X,"ConnectionStrategy",{enumerable:!0,get:function(){return _n.ConnectionStrategy}});Object.defineProperty(X,"ConnectionOptions",{enumerable:!0,get:function(){return _n.ConnectionOptions}});Object.defineProperty(X,"NullLogger",{enumerable:!0,get:function(){return _n.NullLogger}});Object.defineProperty(X,"createMessageConnection",{enumerable:!0,get:function(){return _n.createMessageConnection}});Object.defineProperty(X,"ProgressToken",{enumerable:!0,get:function(){return _n.ProgressToken}});Object.defineProperty(X,"ProgressType",{enumerable:!0,get:function(){return _n.ProgressType}});Object.defineProperty(X,"Trace",{enumerable:!0,get:function(){return _n.Trace}});Object.defineProperty(X,"TraceValues",{enumerable:!0,get:function(){return _n.TraceValues}});Object.defineProperty(X,"TraceFormat",{enumerable:!0,get:function(){return _n.TraceFormat}});Object.defineProperty(X,"SetTraceNotification",{enumerable:!0,get:function(){return _n.SetTraceNotification}});Object.defineProperty(X,"LogTraceNotification",{enumerable:!0,get:function(){return _n.LogTraceNotification}});Object.defineProperty(X,"ConnectionErrors",{enumerable:!0,get:function(){return _n.ConnectionErrors}});Object.defineProperty(X,"ConnectionError",{enumerable:!0,get:function(){return _n.ConnectionError}});Object.defineProperty(X,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return _n.CancellationReceiverStrategy}});Object.defineProperty(X,"CancellationSenderStrategy",{enumerable:!0,get:function(){return _n.CancellationSenderStrategy}});Object.defineProperty(X,"CancellationStrategy",{enumerable:!0,get:function(){return _n.CancellationStrategy}});Object.defineProperty(X,"MessageStrategy",{enumerable:!0,get:function(){return _n.MessageStrategy}});var rF=Zi();X.RAL=rF.default});var dC=K(xp=>{"use strict";Object.defineProperty(xp,"__esModule",{value:!0});var uC=require("util"),Fi=cu(),uu=class t extends Fi.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return t.emptyBuffer}fromString(e,n){return Buffer.from(e,n)}toString(e,n){return e instanceof Buffer?e.toString(n):new uC.TextDecoder(n).decode(e)}asNative(e,n){return n===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,n):Buffer.from(e,0,n)}allocNative(e){return Buffer.allocUnsafe(e)}};uu.emptyBuffer=Buffer.allocUnsafe(0);var Dp=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Fi.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Fi.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Fi.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),Fi.Disposable.create(()=>this.stream.off("data",e))}},Rp=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Fi.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Fi.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Fi.Disposable.create(()=>this.stream.off("end",e))}write(e,n){return new Promise((i,s)=>{let c=u=>{u==null?i():s(u)};typeof e=="string"?this.stream.write(e,n,c):this.stream.write(e,c)})}end(){this.stream.end()}},lC=Object.freeze({messageBuffer:Object.freeze({create:t=>new uu(t)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(n){return Promise.reject(n)}}}),decoder:Object.freeze({name:"application/json",decode:(t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new uC.TextDecoder(e.charset).decode(t)))}catch(n){return Promise.reject(n)}}})}),stream:Object.freeze({asReadableStream:t=>new Dp(t),asWritableStream:t=>new Rp(t)}),console,timer:Object.freeze({setTimeout(t,e,...n){let i=setTimeout(t,e,...n);return{dispose:()=>clearTimeout(i)}},setImmediate(t,...e){let n=setImmediate(t,...e);return{dispose:()=>clearImmediate(n)}},setInterval(t,e,...n){let i=setInterval(t,e,...n);return{dispose:()=>clearInterval(i)}}})});function Sp(){return lC}(function(t){function e(){Fi.RAL.install(lC)}t.install=e})(Sp||(Sp={}));xp.default=Sp});var ko=K(Ye=>{"use strict";var iF=Ye&&Ye.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var s=Object.getOwnPropertyDescriptor(e,n);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,s)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),oF=Ye&&Ye.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&iF(e,t,n)};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.createMessageConnection=Ye.createServerSocketTransport=Ye.createClientSocketTransport=Ye.createServerPipeTransport=Ye.createClientPipeTransport=Ye.generateRandomPipeName=Ye.StreamMessageWriter=Ye.StreamMessageReader=Ye.SocketMessageWriter=Ye.SocketMessageReader=Ye.PortMessageWriter=Ye.PortMessageReader=Ye.IPCMessageWriter=Ye.IPCMessageReader=void 0;var fs=dC();fs.default.install();var fC=require("path"),sF=require("os"),aF=require("crypto"),fu=require("net"),kr=cu();oF(cu(),Ye);var Pp=class extends kr.AbstractMessageReader{constructor(e){super(),this.process=e;let n=this.process;n.on("error",i=>this.fireError(i)),n.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),kr.Disposable.create(()=>this.process.off("message",e))}};Ye.IPCMessageReader=Pp;var Ep=class extends kr.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let n=this.process;n.on("error",i=>this.fireError(i)),n.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,e)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};Ye.IPCMessageWriter=Ep;var kp=class extends kr.AbstractMessageReader{constructor(e){super(),this.onData=new kr.Emitter,e.on("close",()=>this.fireClose),e.on("error",n=>this.fireError(n)),e.on("message",n=>{this.onData.fire(n)})}listen(e){return this.onData.event(e)}};Ye.PortMessageReader=kp;var Ip=class extends kr.AbstractMessageWriter{constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",n=>this.fireError(n))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};Ye.PortMessageWriter=Ip;var Po=class extends kr.ReadableStreamMessageReader{constructor(e,n="utf-8"){super((0,fs.default)().stream.asReadableStream(e),n)}};Ye.SocketMessageReader=Po;var Eo=class extends kr.WriteableStreamMessageWriter{constructor(e,n){super((0,fs.default)().stream.asWritableStream(e),n),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};Ye.SocketMessageWriter=Eo;var lu=class extends kr.ReadableStreamMessageReader{constructor(e,n){super((0,fs.default)().stream.asReadableStream(e),n)}};Ye.StreamMessageReader=lu;var du=class extends kr.WriteableStreamMessageWriter{constructor(e,n){super((0,fs.default)().stream.asWritableStream(e),n)}};Ye.StreamMessageWriter=du;var pC=process.env.XDG_RUNTIME_DIR,cF=new Map([["linux",107],["darwin",103]]);function uF(){let t=(0,aF.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;pC?e=fC.join(pC,`vscode-ipc-${t}.sock`):e=fC.join(sF.tmpdir(),`vscode-${t}.sock`);let n=cF.get(process.platform);return n!==void 0&&e.length>n&&(0,fs.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${n} characters.`),e}Ye.generateRandomPipeName=uF;function lF(t,e="utf-8"){let n,i=new Promise((s,c)=>{n=s});return new Promise((s,c)=>{let u=(0,fu.createServer)(l=>{u.close(),n([new Po(l,e),new Eo(l,e)])});u.on("error",c),u.listen(t,()=>{u.removeListener("error",c),s({onConnected:()=>i})})})}Ye.createClientPipeTransport=lF;function dF(t,e="utf-8"){let n=(0,fu.createConnection)(t);return[new Po(n,e),new Eo(n,e)]}Ye.createServerPipeTransport=dF;function fF(t,e="utf-8"){let n,i=new Promise((s,c)=>{n=s});return new Promise((s,c)=>{let u=(0,fu.createServer)(l=>{u.close(),n([new Po(l,e),new Eo(l,e)])});u.on("error",c),u.listen(t,"127.0.0.1",()=>{u.removeListener("error",c),s({onConnected:()=>i})})})}Ye.createClientSocketTransport=fF;function pF(t,e="utf-8"){let n=(0,fu.createConnection)(t,"127.0.0.1");return[new Po(n,e),new Eo(n,e)]}Ye.createServerSocketTransport=pF;function hF(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}function gF(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}function mF(t,e,n,i){n||(n=kr.NullLogger);let s=hF(t)?new lu(t):t,c=gF(e)?new du(e):e;return kr.ConnectionStrategy.is(i)&&(i={connectionStrategy:i}),(0,kr.createMessageConnection)(s,c,n,i)}Ye.createMessageConnection=mF});var Op=K((Q2,hC)=>{"use strict";hC.exports=ko()});var hu=K((gC,pu)=>{(function(t){if(typeof pu=="object"&&typeof pu.exports=="object"){var e=t(require,gC);e!==void 0&&(pu.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlineCompletionContext=e.SelectedCompletionInfo=e.InlineCompletionTriggerKind=e.InlineCompletionList=e.InlineCompletionItem=e.StringValue=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var n;(function(w){function k(I){return typeof I=="string"}w.is=k})(n||(e.DocumentUri=n={}));var i;(function(w){function k(I){return typeof I=="string"}w.is=k})(i||(e.URI=i={}));var s;(function(w){w.MIN_VALUE=-2147483648,w.MAX_VALUE=2147483647;function k(I){return typeof I=="number"&&w.MIN_VALUE<=I&&I<=w.MAX_VALUE}w.is=k})(s||(e.integer=s={}));var c;(function(w){w.MIN_VALUE=0,w.MAX_VALUE=2147483647;function k(I){return typeof I=="number"&&w.MIN_VALUE<=I&&I<=w.MAX_VALUE}w.is=k})(c||(e.uinteger=c={}));var u;(function(w){function k(R,v){return R===Number.MAX_VALUE&&(R=c.MAX_VALUE),v===Number.MAX_VALUE&&(v=c.MAX_VALUE),{line:R,character:v}}w.create=k;function I(R){var v=R;return A.objectLiteral(v)&&A.uinteger(v.line)&&A.uinteger(v.character)}w.is=I})(u||(e.Position=u={}));var l;(function(w){function k(R,v,$,J){if(A.uinteger(R)&&A.uinteger(v)&&A.uinteger($)&&A.uinteger(J))return{start:u.create(R,v),end:u.create($,J)};if(u.is(R)&&u.is(v))return{start:R,end:v};throw new Error("Range#create called with invalid arguments[".concat(R,", ").concat(v,", ").concat($,", ").concat(J,"]"))}w.create=k;function I(R){var v=R;return A.objectLiteral(v)&&u.is(v.start)&&u.is(v.end)}w.is=I})(l||(e.Range=l={}));var f;(function(w){function k(R,v){return{uri:R,range:v}}w.create=k;function I(R){var v=R;return A.objectLiteral(v)&&l.is(v.range)&&(A.string(v.uri)||A.undefined(v.uri))}w.is=I})(f||(e.Location=f={}));var h;(function(w){function k(R,v,$,J){return{targetUri:R,targetRange:v,targetSelectionRange:$,originSelectionRange:J}}w.create=k;function I(R){var v=R;return A.objectLiteral(v)&&l.is(v.targetRange)&&A.string(v.targetUri)&&l.is(v.targetSelectionRange)&&(l.is(v.originSelectionRange)||A.undefined(v.originSelectionRange))}w.is=I})(h||(e.LocationLink=h={}));var g;(function(w){function k(R,v,$,J){return{red:R,green:v,blue:$,alpha:J}}w.create=k;function I(R){var v=R;return A.objectLiteral(v)&&A.numberRange(v.red,0,1)&&A.numberRange(v.green,0,1)&&A.numberRange(v.blue,0,1)&&A.numberRange(v.alpha,0,1)}w.is=I})(g||(e.Color=g={}));var C;(function(w){function k(R,v){return{range:R,color:v}}w.create=k;function I(R){var v=R;return A.objectLiteral(v)&&l.is(v.range)&&g.is(v.color)}w.is=I})(C||(e.ColorInformation=C={}));var _;(function(w){function k(R,v,$){return{label:R,textEdit:v,additionalTextEdits:$}}w.create=k;function I(R){var v=R;return A.objectLiteral(v)&&A.string(v.label)&&(A.undefined(v.textEdit)||oe.is(v))&&(A.undefined(v.additionalTextEdits)||A.typedArray(v.additionalTextEdits,oe.is))}w.is=I})(_||(e.ColorPresentation=_={}));var S;(function(w){w.Comment="comment",w.Imports="imports",w.Region="region"})(S||(e.FoldingRangeKind=S={}));var T;(function(w){function k(R,v,$,J,Re,bt){var pt={startLine:R,endLine:v};return A.defined($)&&(pt.startCharacter=$),A.defined(J)&&(pt.endCharacter=J),A.defined(Re)&&(pt.kind=Re),A.defined(bt)&&(pt.collapsedText=bt),pt}w.create=k;function I(R){var v=R;return A.objectLiteral(v)&&A.uinteger(v.startLine)&&A.uinteger(v.startLine)&&(A.undefined(v.startCharacter)||A.uinteger(v.startCharacter))&&(A.undefined(v.endCharacter)||A.uinteger(v.endCharacter))&&(A.undefined(v.kind)||A.string(v.kind))}w.is=I})(T||(e.FoldingRange=T={}));var L;(function(w){function k(R,v){return{location:R,message:v}}w.create=k;function I(R){var v=R;return A.defined(v)&&f.is(v.location)&&A.string(v.message)}w.is=I})(L||(e.DiagnosticRelatedInformation=L={}));var F;(function(w){w.Error=1,w.Warning=2,w.Information=3,w.Hint=4})(F||(e.DiagnosticSeverity=F={}));var H;(function(w){w.Unnecessary=1,w.Deprecated=2})(H||(e.DiagnosticTag=H={}));var B;(function(w){function k(I){var R=I;return A.objectLiteral(R)&&A.string(R.href)}w.is=k})(B||(e.CodeDescription=B={}));var U;(function(w){function k(R,v,$,J,Re,bt){var pt={range:R,message:v};return A.defined($)&&(pt.severity=$),A.defined(J)&&(pt.code=J),A.defined(Re)&&(pt.source=Re),A.defined(bt)&&(pt.relatedInformation=bt),pt}w.create=k;function I(R){var v,$=R;return A.defined($)&&l.is($.range)&&A.string($.message)&&(A.number($.severity)||A.undefined($.severity))&&(A.integer($.code)||A.string($.code)||A.undefined($.code))&&(A.undefined($.codeDescription)||A.string((v=$.codeDescription)===null||v===void 0?void 0:v.href))&&(A.string($.source)||A.undefined($.source))&&(A.undefined($.relatedInformation)||A.typedArray($.relatedInformation,L.is))}w.is=I})(U||(e.Diagnostic=U={}));var ee;(function(w){function k(R,v){for(var $=[],J=2;J<arguments.length;J++)$[J-2]=arguments[J];var Re={title:R,command:v};return A.defined($)&&$.length>0&&(Re.arguments=$),Re}w.create=k;function I(R){var v=R;return A.defined(v)&&A.string(v.title)&&A.string(v.command)}w.is=I})(ee||(e.Command=ee={}));var oe;(function(w){function k($,J){return{range:$,newText:J}}w.replace=k;function I($,J){return{range:{start:$,end:$},newText:J}}w.insert=I;function R($){return{range:$,newText:""}}w.del=R;function v($){var J=$;return A.objectLiteral(J)&&A.string(J.newText)&&l.is(J.range)}w.is=v})(oe||(e.TextEdit=oe={}));var ye;(function(w){function k(R,v,$){var J={label:R};return v!==void 0&&(J.needsConfirmation=v),$!==void 0&&(J.description=$),J}w.create=k;function I(R){var v=R;return A.objectLiteral(v)&&A.string(v.label)&&(A.boolean(v.needsConfirmation)||v.needsConfirmation===void 0)&&(A.string(v.description)||v.description===void 0)}w.is=I})(ye||(e.ChangeAnnotation=ye={}));var se;(function(w){function k(I){var R=I;return A.string(R)}w.is=k})(se||(e.ChangeAnnotationIdentifier=se={}));var we;(function(w){function k($,J,Re){return{range:$,newText:J,annotationId:Re}}w.replace=k;function I($,J,Re){return{range:{start:$,end:$},newText:J,annotationId:Re}}w.insert=I;function R($,J){return{range:$,newText:"",annotationId:J}}w.del=R;function v($){var J=$;return oe.is(J)&&(ye.is(J.annotationId)||se.is(J.annotationId))}w.is=v})(we||(e.AnnotatedTextEdit=we={}));var Ie;(function(w){function k(R,v){return{textDocument:R,edits:v}}w.create=k;function I(R){var v=R;return A.defined(v)&&Ke.is(v.textDocument)&&Array.isArray(v.edits)}w.is=I})(Ie||(e.TextDocumentEdit=Ie={}));var Lt;(function(w){function k(R,v,$){var J={kind:"create",uri:R};return v!==void 0&&(v.overwrite!==void 0||v.ignoreIfExists!==void 0)&&(J.options=v),$!==void 0&&(J.annotationId=$),J}w.create=k;function I(R){var v=R;return v&&v.kind==="create"&&A.string(v.uri)&&(v.options===void 0||(v.options.overwrite===void 0||A.boolean(v.options.overwrite))&&(v.options.ignoreIfExists===void 0||A.boolean(v.options.ignoreIfExists)))&&(v.annotationId===void 0||se.is(v.annotationId))}w.is=I})(Lt||(e.CreateFile=Lt={}));var Et;(function(w){function k(R,v,$,J){var Re={kind:"rename",oldUri:R,newUri:v};return $!==void 0&&($.overwrite!==void 0||$.ignoreIfExists!==void 0)&&(Re.options=$),J!==void 0&&(Re.annotationId=J),Re}w.create=k;function I(R){var v=R;return v&&v.kind==="rename"&&A.string(v.oldUri)&&A.string(v.newUri)&&(v.options===void 0||(v.options.overwrite===void 0||A.boolean(v.options.overwrite))&&(v.options.ignoreIfExists===void 0||A.boolean(v.options.ignoreIfExists)))&&(v.annotationId===void 0||se.is(v.annotationId))}w.is=I})(Et||(e.RenameFile=Et={}));var Mt;(function(w){function k(R,v,$){var J={kind:"delete",uri:R};return v!==void 0&&(v.recursive!==void 0||v.ignoreIfNotExists!==void 0)&&(J.options=v),$!==void 0&&(J.annotationId=$),J}w.create=k;function I(R){var v=R;return v&&v.kind==="delete"&&A.string(v.uri)&&(v.options===void 0||(v.options.recursive===void 0||A.boolean(v.options.recursive))&&(v.options.ignoreIfNotExists===void 0||A.boolean(v.options.ignoreIfNotExists)))&&(v.annotationId===void 0||se.is(v.annotationId))}w.is=I})(Mt||(e.DeleteFile=Mt={}));var tr;(function(w){function k(I){var R=I;return R&&(R.changes!==void 0||R.documentChanges!==void 0)&&(R.documentChanges===void 0||R.documentChanges.every(function(v){return A.string(v.kind)?Lt.is(v)||Et.is(v)||Mt.is(v):Ie.is(v)}))}w.is=k})(tr||(e.WorkspaceEdit=tr={}));var yn=function(){function w(k,I){this.edits=k,this.changeAnnotations=I}return w.prototype.insert=function(k,I,R){var v,$;if(R===void 0?v=oe.insert(k,I):se.is(R)?($=R,v=we.insert(k,I,R)):(this.assertChangeAnnotations(this.changeAnnotations),$=this.changeAnnotations.manage(R),v=we.insert(k,I,$)),this.edits.push(v),$!==void 0)return $},w.prototype.replace=function(k,I,R){var v,$;if(R===void 0?v=oe.replace(k,I):se.is(R)?($=R,v=we.replace(k,I,R)):(this.assertChangeAnnotations(this.changeAnnotations),$=this.changeAnnotations.manage(R),v=we.replace(k,I,$)),this.edits.push(v),$!==void 0)return $},w.prototype.delete=function(k,I){var R,v;if(I===void 0?R=oe.del(k):se.is(I)?(v=I,R=we.del(k,I)):(this.assertChangeAnnotations(this.changeAnnotations),v=this.changeAnnotations.manage(I),R=we.del(k,v)),this.edits.push(R),v!==void 0)return v},w.prototype.add=function(k){this.edits.push(k)},w.prototype.all=function(){return this.edits},w.prototype.clear=function(){this.edits.splice(0,this.edits.length)},w.prototype.assertChangeAnnotations=function(k){if(k===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},w}(),Rt=function(){function w(k){this._annotations=k===void 0?Object.create(null):k,this._counter=0,this._size=0}return w.prototype.all=function(){return this._annotations},Object.defineProperty(w.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),w.prototype.manage=function(k,I){var R;if(se.is(k)?R=k:(R=this.nextId(),I=k),this._annotations[R]!==void 0)throw new Error("Id ".concat(R," is already in use."));if(I===void 0)throw new Error("No annotation provided for id ".concat(R));return this._annotations[R]=I,this._size++,R},w.prototype.nextId=function(){return this._counter++,this._counter.toString()},w}(),Ct=function(){function w(k){var I=this;this._textEditChanges=Object.create(null),k!==void 0?(this._workspaceEdit=k,k.documentChanges?(this._changeAnnotations=new Rt(k.changeAnnotations),k.changeAnnotations=this._changeAnnotations.all(),k.documentChanges.forEach(function(R){if(Ie.is(R)){var v=new yn(R.edits,I._changeAnnotations);I._textEditChanges[R.textDocument.uri]=v}})):k.changes&&Object.keys(k.changes).forEach(function(R){var v=new yn(k.changes[R]);I._textEditChanges[R]=v})):this._workspaceEdit={}}return Object.defineProperty(w.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),w.prototype.getTextEditChange=function(k){if(Ke.is(k)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var I={uri:k.uri,version:k.version},R=this._textEditChanges[I.uri];if(!R){var v=[],$={textDocument:I,edits:v};this._workspaceEdit.documentChanges.push($),R=new yn(v,this._changeAnnotations),this._textEditChanges[I.uri]=R}return R}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var R=this._textEditChanges[k];if(!R){var v=[];this._workspaceEdit.changes[k]=v,R=new yn(v),this._textEditChanges[k]=R}return R}},w.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Rt,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},w.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},w.prototype.createFile=function(k,I,R){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var v;ye.is(I)||se.is(I)?v=I:R=I;var $,J;if(v===void 0?$=Lt.create(k,R):(J=se.is(v)?v:this._changeAnnotations.manage(v),$=Lt.create(k,R,J)),this._workspaceEdit.documentChanges.push($),J!==void 0)return J},w.prototype.renameFile=function(k,I,R,v){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var $;ye.is(R)||se.is(R)?$=R:v=R;var J,Re;if($===void 0?J=Et.create(k,I,v):(Re=se.is($)?$:this._changeAnnotations.manage($),J=Et.create(k,I,v,Re)),this._workspaceEdit.documentChanges.push(J),Re!==void 0)return Re},w.prototype.deleteFile=function(k,I,R){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var v;ye.is(I)||se.is(I)?v=I:R=I;var $,J;if(v===void 0?$=Mt.create(k,R):(J=se.is(v)?v:this._changeAnnotations.manage(v),$=Mt.create(k,R,J)),this._workspaceEdit.documentChanges.push($),J!==void 0)return J},w}();e.WorkspaceChange=Ct;var yr;(function(w){function k(R){return{uri:R}}w.create=k;function I(R){var v=R;return A.defined(v)&&A.string(v.uri)}w.is=I})(yr||(e.TextDocumentIdentifier=yr={}));var Un;(function(w){function k(R,v){return{uri:R,version:v}}w.create=k;function I(R){var v=R;return A.defined(v)&&A.string(v.uri)&&A.integer(v.version)}w.is=I})(Un||(e.VersionedTextDocumentIdentifier=Un={}));var Ke;(function(w){function k(R,v){return{uri:R,version:v}}w.create=k;function I(R){var v=R;return A.defined(v)&&A.string(v.uri)&&(v.version===null||A.integer(v.version))}w.is=I})(Ke||(e.OptionalVersionedTextDocumentIdentifier=Ke={}));var Rn;(function(w){function k(R,v,$,J){return{uri:R,languageId:v,version:$,text:J}}w.create=k;function I(R){var v=R;return A.defined(v)&&A.string(v.uri)&&A.string(v.languageId)&&A.integer(v.version)&&A.string(v.text)}w.is=I})(Rn||(e.TextDocumentItem=Rn={}));var wn;(function(w){w.PlainText="plaintext",w.Markdown="markdown";function k(I){var R=I;return R===w.PlainText||R===w.Markdown}w.is=k})(wn||(e.MarkupKind=wn={}));var sn;(function(w){function k(I){var R=I;return A.objectLiteral(I)&&wn.is(R.kind)&&A.string(R.value)}w.is=k})(sn||(e.MarkupContent=sn={}));var Hn;(function(w){w.Text=1,w.Method=2,w.Function=3,w.Constructor=4,w.Field=5,w.Variable=6,w.Class=7,w.Interface=8,w.Module=9,w.Property=10,w.Unit=11,w.Value=12,w.Enum=13,w.Keyword=14,w.Snippet=15,w.Color=16,w.File=17,w.Reference=18,w.Folder=19,w.EnumMember=20,w.Constant=21,w.Struct=22,w.Event=23,w.Operator=24,w.TypeParameter=25})(Hn||(e.CompletionItemKind=Hn={}));var Wn;(function(w){w.PlainText=1,w.Snippet=2})(Wn||(e.InsertTextFormat=Wn={}));var Ar;(function(w){w.Deprecated=1})(Ar||(e.CompletionItemTag=Ar={}));var jn;(function(w){function k(R,v,$){return{newText:R,insert:v,replace:$}}w.create=k;function I(R){var v=R;return v&&A.string(v.newText)&&l.is(v.insert)&&l.is(v.replace)}w.is=I})(jn||(e.InsertReplaceEdit=jn={}));var nr;(function(w){w.asIs=1,w.adjustIndentation=2})(nr||(e.InsertTextMode=nr={}));var Lr;(function(w){function k(I){var R=I;return R&&(A.string(R.detail)||R.detail===void 0)&&(A.string(R.description)||R.description===void 0)}w.is=k})(Lr||(e.CompletionItemLabelDetails=Lr={}));var Sn;(function(w){function k(I){return{label:I}}w.create=k})(Sn||(e.CompletionItem=Sn={}));var xn;(function(w){function k(I,R){return{items:I||[],isIncomplete:!!R}}w.create=k})(xn||(e.CompletionList=xn={}));var wr;(function(w){function k(R){return R.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}w.fromPlainText=k;function I(R){var v=R;return A.string(v)||A.objectLiteral(v)&&A.string(v.language)&&A.string(v.value)}w.is=I})(wr||(e.MarkedString=wr={}));var st;(function(w){function k(I){var R=I;return!!R&&A.objectLiteral(R)&&(sn.is(R.contents)||wr.is(R.contents)||A.typedArray(R.contents,wr.is))&&(I.range===void 0||l.is(I.range))}w.is=k})(st||(e.Hover=st={}));var zn;(function(w){function k(I,R){return R?{label:I,documentation:R}:{label:I}}w.create=k})(zn||(e.ParameterInformation=zn={}));var Cr;(function(w){function k(I,R){for(var v=[],$=2;$<arguments.length;$++)v[$-2]=arguments[$];var J={label:I};return A.defined(R)&&(J.documentation=R),A.defined(v)?J.parameters=v:J.parameters=[],J}w.create=k})(Cr||(e.SignatureInformation=Cr={}));var Kt;(function(w){w.Text=1,w.Read=2,w.Write=3})(Kt||(e.DocumentHighlightKind=Kt={}));var ei;(function(w){function k(I,R){var v={range:I};return A.number(R)&&(v.kind=R),v}w.create=k})(ei||(e.DocumentHighlight=ei={}));var rr;(function(w){w.File=1,w.Module=2,w.Namespace=3,w.Package=4,w.Class=5,w.Method=6,w.Property=7,w.Field=8,w.Constructor=9,w.Enum=10,w.Interface=11,w.Function=12,w.Variable=13,w.Constant=14,w.String=15,w.Number=16,w.Boolean=17,w.Array=18,w.Object=19,w.Key=20,w.Null=21,w.EnumMember=22,w.Struct=23,w.Event=24,w.Operator=25,w.TypeParameter=26})(rr||(e.SymbolKind=rr={}));var Pn;(function(w){w.Deprecated=1})(Pn||(e.SymbolTag=Pn={}));var rt;(function(w){function k(I,R,v,$,J){var Re={name:I,kind:R,location:{uri:$,range:v}};return J&&(Re.containerName=J),Re}w.create=k})(rt||(e.SymbolInformation=rt={}));var Bt;(function(w){function k(I,R,v,$){return $!==void 0?{name:I,kind:R,location:{uri:v,range:$}}:{name:I,kind:R,location:{uri:v}}}w.create=k})(Bt||(e.WorkspaceSymbol=Bt={}));var Vt;(function(w){function k(R,v,$,J,Re,bt){var pt={name:R,detail:v,kind:$,range:J,selectionRange:Re};return bt!==void 0&&(pt.children=bt),pt}w.create=k;function I(R){var v=R;return v&&A.string(v.name)&&A.number(v.kind)&&l.is(v.range)&&l.is(v.selectionRange)&&(v.detail===void 0||A.string(v.detail))&&(v.deprecated===void 0||A.boolean(v.deprecated))&&(v.children===void 0||Array.isArray(v.children))&&(v.tags===void 0||Array.isArray(v.tags))}w.is=I})(Vt||(e.DocumentSymbol=Vt={}));var Kn;(function(w){w.Empty="",w.QuickFix="quickfix",w.Refactor="refactor",w.RefactorExtract="refactor.extract",w.RefactorInline="refactor.inline",w.RefactorRewrite="refactor.rewrite",w.Source="source",w.SourceOrganizeImports="source.organizeImports",w.SourceFixAll="source.fixAll"})(Kn||(e.CodeActionKind=Kn={}));var tn;(function(w){w.Invoked=1,w.Automatic=2})(tn||(e.CodeActionTriggerKind=tn={}));var Mr;(function(w){function k(R,v,$){var J={diagnostics:R};return v!=null&&(J.only=v),$!=null&&(J.triggerKind=$),J}w.create=k;function I(R){var v=R;return A.defined(v)&&A.typedArray(v.diagnostics,U.is)&&(v.only===void 0||A.typedArray(v.only,A.string))&&(v.triggerKind===void 0||v.triggerKind===tn.Invoked||v.triggerKind===tn.Automatic)}w.is=I})(Mr||(e.CodeActionContext=Mr={}));var Bn;(function(w){function k(R,v,$){var J={title:R},Re=!0;return typeof v=="string"?(Re=!1,J.kind=v):ee.is(v)?J.command=v:J.edit=v,Re&&$!==void 0&&(J.kind=$),J}w.create=k;function I(R){var v=R;return v&&A.string(v.title)&&(v.diagnostics===void 0||A.typedArray(v.diagnostics,U.is))&&(v.kind===void 0||A.string(v.kind))&&(v.edit!==void 0||v.command!==void 0)&&(v.command===void 0||ee.is(v.command))&&(v.isPreferred===void 0||A.boolean(v.isPreferred))&&(v.edit===void 0||tr.is(v.edit))}w.is=I})(Bn||(e.CodeAction=Bn={}));var fn;(function(w){function k(R,v){var $={range:R};return A.defined(v)&&($.data=v),$}w.create=k;function I(R){var v=R;return A.defined(v)&&l.is(v.range)&&(A.undefined(v.command)||ee.is(v.command))}w.is=I})(fn||(e.CodeLens=fn={}));var br;(function(w){function k(R,v){return{tabSize:R,insertSpaces:v}}w.create=k;function I(R){var v=R;return A.defined(v)&&A.uinteger(v.tabSize)&&A.boolean(v.insertSpaces)}w.is=I})(br||(e.FormattingOptions=br={}));var an;(function(w){function k(R,v,$){return{range:R,target:v,data:$}}w.create=k;function I(R){var v=R;return A.defined(v)&&l.is(v.range)&&(A.undefined(v.target)||A.string(v.target))}w.is=I})(an||(e.DocumentLink=an={}));var E;(function(w){function k(R,v){return{range:R,parent:v}}w.create=k;function I(R){var v=R;return A.objectLiteral(v)&&l.is(v.range)&&(v.parent===void 0||w.is(v.parent))}w.is=I})(E||(e.SelectionRange=E={}));var V;(function(w){w.namespace="namespace",w.type="type",w.class="class",w.enum="enum",w.interface="interface",w.struct="struct",w.typeParameter="typeParameter",w.parameter="parameter",w.variable="variable",w.property="property",w.enumMember="enumMember",w.event="event",w.function="function",w.method="method",w.macro="macro",w.keyword="keyword",w.modifier="modifier",w.comment="comment",w.string="string",w.number="number",w.regexp="regexp",w.operator="operator",w.decorator="decorator"})(V||(e.SemanticTokenTypes=V={}));var re;(function(w){w.declaration="declaration",w.definition="definition",w.readonly="readonly",w.static="static",w.deprecated="deprecated",w.abstract="abstract",w.async="async",w.modification="modification",w.documentation="documentation",w.defaultLibrary="defaultLibrary"})(re||(e.SemanticTokenModifiers=re={}));var ae;(function(w){function k(I){var R=I;return A.objectLiteral(R)&&(R.resultId===void 0||typeof R.resultId=="string")&&Array.isArray(R.data)&&(R.data.length===0||typeof R.data[0]=="number")}w.is=k})(ae||(e.SemanticTokens=ae={}));var Be;(function(w){function k(R,v){return{range:R,text:v}}w.create=k;function I(R){var v=R;return v!=null&&l.is(v.range)&&A.string(v.text)}w.is=I})(Be||(e.InlineValueText=Be={}));var We;(function(w){function k(R,v,$){return{range:R,variableName:v,caseSensitiveLookup:$}}w.create=k;function I(R){var v=R;return v!=null&&l.is(v.range)&&A.boolean(v.caseSensitiveLookup)&&(A.string(v.variableName)||v.variableName===void 0)}w.is=I})(We||(e.InlineValueVariableLookup=We={}));var Ze;(function(w){function k(R,v){return{range:R,expression:v}}w.create=k;function I(R){var v=R;return v!=null&&l.is(v.range)&&(A.string(v.expression)||v.expression===void 0)}w.is=I})(Ze||(e.InlineValueEvaluatableExpression=Ze={}));var ft;(function(w){function k(R,v){return{frameId:R,stoppedLocation:v}}w.create=k;function I(R){var v=R;return A.defined(v)&&l.is(R.stoppedLocation)}w.is=I})(ft||(e.InlineValueContext=ft={}));var Pe;(function(w){w.Type=1,w.Parameter=2;function k(I){return I===1||I===2}w.is=k})(Pe||(e.InlayHintKind=Pe={}));var et;(function(w){function k(R){return{value:R}}w.create=k;function I(R){var v=R;return A.objectLiteral(v)&&(v.tooltip===void 0||A.string(v.tooltip)||sn.is(v.tooltip))&&(v.location===void 0||f.is(v.location))&&(v.command===void 0||ee.is(v.command))}w.is=I})(et||(e.InlayHintLabelPart=et={}));var Ne;(function(w){function k(R,v,$){var J={position:R,label:v};return $!==void 0&&(J.kind=$),J}w.create=k;function I(R){var v=R;return A.objectLiteral(v)&&u.is(v.position)&&(A.string(v.label)||A.typedArray(v.label,et.is))&&(v.kind===void 0||Pe.is(v.kind))&&v.textEdits===void 0||A.typedArray(v.textEdits,oe.is)&&(v.tooltip===void 0||A.string(v.tooltip)||sn.is(v.tooltip))&&(v.paddingLeft===void 0||A.boolean(v.paddingLeft))&&(v.paddingRight===void 0||A.boolean(v.paddingRight))}w.is=I})(Ne||(e.InlayHint=Ne={}));var at;(function(w){function k(I){return{kind:"snippet",value:I}}w.createSnippet=k})(at||(e.StringValue=at={}));var kt;(function(w){function k(I,R,v,$){return{insertText:I,filterText:R,range:v,command:$}}w.create=k})(kt||(e.InlineCompletionItem=kt={}));var nn;(function(w){function k(I){return{items:I}}w.create=k})(nn||(e.InlineCompletionList=nn={}));var di;(function(w){w.Invoked=0,w.Automatic=1})(di||(e.InlineCompletionTriggerKind=di={}));var fi;(function(w){function k(I,R){return{range:I,text:R}}w.create=k})(fi||(e.SelectedCompletionInfo=fi={}));var y;(function(w){function k(I,R){return{triggerKind:I,selectedCompletionInfo:R}}w.create=k})(y||(e.InlineCompletionContext=y={}));var j;(function(w){function k(I){var R=I;return A.objectLiteral(R)&&i.is(R.uri)&&A.string(R.name)}w.is=k})(j||(e.WorkspaceFolder=j={})),e.EOL=[`
`,`\r
`,"\r"];var le;(function(w){function k($,J,Re,bt){return new tt($,J,Re,bt)}w.create=k;function I($){var J=$;return!!(A.defined(J)&&A.string(J.uri)&&(A.undefined(J.languageId)||A.string(J.languageId))&&A.uinteger(J.lineCount)&&A.func(J.getText)&&A.func(J.positionAt)&&A.func(J.offsetAt))}w.is=I;function R($,J){for(var Re=$.getText(),bt=v(J,function(Nr,p){var q=Nr.range.start.line-p.range.start.line;return q===0?Nr.range.start.character-p.range.start.character:q}),pt=Re.length,Cn=bt.length-1;Cn>=0;Cn--){var Vn=bt[Cn],_r=$.offsetAt(Vn.range.start),$e=$.offsetAt(Vn.range.end);if($e<=pt)Re=Re.substring(0,_r)+Vn.newText+Re.substring($e,Re.length);else throw new Error("Overlapping edit");pt=_r}return Re}w.applyEdits=R;function v($,J){if($.length<=1)return $;var Re=$.length/2|0,bt=$.slice(0,Re),pt=$.slice(Re);v(bt,J),v(pt,J);for(var Cn=0,Vn=0,_r=0;Cn<bt.length&&Vn<pt.length;){var $e=J(bt[Cn],pt[Vn]);$e<=0?$[_r++]=bt[Cn++]:$[_r++]=pt[Vn++]}for(;Cn<bt.length;)$[_r++]=bt[Cn++];for(;Vn<pt.length;)$[_r++]=pt[Vn++];return $}})(le||(e.TextDocument=le={}));var tt=function(){function w(k,I,R,v){this._uri=k,this._languageId=I,this._version=R,this._content=v,this._lineOffsets=void 0}return Object.defineProperty(w.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),w.prototype.getText=function(k){if(k){var I=this.offsetAt(k.start),R=this.offsetAt(k.end);return this._content.substring(I,R)}return this._content},w.prototype.update=function(k,I){this._content=k.text,this._version=I,this._lineOffsets=void 0},w.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var k=[],I=this._content,R=!0,v=0;v<I.length;v++){R&&(k.push(v),R=!1);var $=I.charAt(v);R=$==="\r"||$===`
`,$==="\r"&&v+1<I.length&&I.charAt(v+1)===`
`&&v++}R&&I.length>0&&k.push(I.length),this._lineOffsets=k}return this._lineOffsets},w.prototype.positionAt=function(k){k=Math.max(Math.min(k,this._content.length),0);var I=this.getLineOffsets(),R=0,v=I.length;if(v===0)return u.create(0,k);for(;R<v;){var $=Math.floor((R+v)/2);I[$]>k?v=$:R=$+1}var J=R-1;return u.create(J,k-I[J])},w.prototype.offsetAt=function(k){var I=this.getLineOffsets();if(k.line>=I.length)return this._content.length;if(k.line<0)return 0;var R=I[k.line],v=k.line+1<I.length?I[k.line+1]:this._content.length;return Math.max(Math.min(R+k.character,v),R)},Object.defineProperty(w.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),w}(),A;(function(w){var k=Object.prototype.toString;function I($e){return typeof $e<"u"}w.defined=I;function R($e){return typeof $e>"u"}w.undefined=R;function v($e){return $e===!0||$e===!1}w.boolean=v;function $($e){return k.call($e)==="[object String]"}w.string=$;function J($e){return k.call($e)==="[object Number]"}w.number=J;function Re($e,Nr,p){return k.call($e)==="[object Number]"&&Nr<=$e&&$e<=p}w.numberRange=Re;function bt($e){return k.call($e)==="[object Number]"&&-2147483648<=$e&&$e<=2147483647}w.integer=bt;function pt($e){return k.call($e)==="[object Number]"&&0<=$e&&$e<=2147483647}w.uinteger=pt;function Cn($e){return k.call($e)==="[object Function]"}w.func=Cn;function Vn($e){return $e!==null&&typeof $e=="object"}w.objectLiteral=Vn;function _r($e,Nr){return Array.isArray($e)&&$e.every(Nr)}w.typedArray=_r})(A||(A={}))})});var Ot=K(lr=>{"use strict";Object.defineProperty(lr,"__esModule",{value:!0});lr.ProtocolNotificationType=lr.ProtocolNotificationType0=lr.ProtocolRequestType=lr.ProtocolRequestType0=lr.RegistrationType=lr.MessageDirection=void 0;var ps=ko(),mC;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(mC||(lr.MessageDirection=mC={}));var qp=class{constructor(e){this.method=e}};lr.RegistrationType=qp;var Fp=class extends ps.RequestType0{constructor(e){super(e)}};lr.ProtocolRequestType0=Fp;var Ap=class extends ps.RequestType{constructor(e){super(e,ps.ParameterStructures.byName)}};lr.ProtocolRequestType=Ap;var Lp=class extends ps.NotificationType0{constructor(e){super(e)}};lr.ProtocolNotificationType0=Lp;var Mp=class extends ps.NotificationType{constructor(e){super(e,ps.ParameterStructures.byName)}};lr.ProtocolNotificationType=Mp});var gu=K(rn=>{"use strict";Object.defineProperty(rn,"__esModule",{value:!0});rn.objectLiteral=rn.typedArray=rn.stringArray=rn.array=rn.func=rn.error=rn.number=rn.string=rn.boolean=void 0;function vF(t){return t===!0||t===!1}rn.boolean=vF;function vC(t){return typeof t=="string"||t instanceof String}rn.string=vC;function yF(t){return typeof t=="number"||t instanceof Number}rn.number=yF;function wF(t){return t instanceof Error}rn.error=wF;function CF(t){return typeof t=="function"}rn.func=CF;function yC(t){return Array.isArray(t)}rn.array=yC;function bF(t){return yC(t)&&t.every(e=>vC(e))}rn.stringArray=bF;function _F(t,e){return Array.isArray(t)&&t.every(e)}rn.typedArray=_F;function TF(t){return t!==null&&typeof t=="object"}rn.objectLiteral=TF});var bC=K(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});mu.ImplementationRequest=void 0;var wC=Ot(),CC;(function(t){t.method="textDocument/implementation",t.messageDirection=wC.MessageDirection.clientToServer,t.type=new wC.ProtocolRequestType(t.method)})(CC||(mu.ImplementationRequest=CC={}))});var DC=K(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});vu.TypeDefinitionRequest=void 0;var _C=Ot(),TC;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=_C.MessageDirection.clientToServer,t.type=new _C.ProtocolRequestType(t.method)})(TC||(vu.TypeDefinitionRequest=TC={}))});var xC=K(hs=>{"use strict";Object.defineProperty(hs,"__esModule",{value:!0});hs.DidChangeWorkspaceFoldersNotification=hs.WorkspaceFoldersRequest=void 0;var yu=Ot(),RC;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=yu.MessageDirection.serverToClient,t.type=new yu.ProtocolRequestType0(t.method)})(RC||(hs.WorkspaceFoldersRequest=RC={}));var SC;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=yu.MessageDirection.clientToServer,t.type=new yu.ProtocolNotificationType(t.method)})(SC||(hs.DidChangeWorkspaceFoldersNotification=SC={}))});var kC=K(wu=>{"use strict";Object.defineProperty(wu,"__esModule",{value:!0});wu.ConfigurationRequest=void 0;var PC=Ot(),EC;(function(t){t.method="workspace/configuration",t.messageDirection=PC.MessageDirection.serverToClient,t.type=new PC.ProtocolRequestType(t.method)})(EC||(wu.ConfigurationRequest=EC={}))});var qC=K(gs=>{"use strict";Object.defineProperty(gs,"__esModule",{value:!0});gs.ColorPresentationRequest=gs.DocumentColorRequest=void 0;var Cu=Ot(),IC;(function(t){t.method="textDocument/documentColor",t.messageDirection=Cu.MessageDirection.clientToServer,t.type=new Cu.ProtocolRequestType(t.method)})(IC||(gs.DocumentColorRequest=IC={}));var OC;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=Cu.MessageDirection.clientToServer,t.type=new Cu.ProtocolRequestType(t.method)})(OC||(gs.ColorPresentationRequest=OC={}))});var LC=K(ms=>{"use strict";Object.defineProperty(ms,"__esModule",{value:!0});ms.FoldingRangeRefreshRequest=ms.FoldingRangeRequest=void 0;var bu=Ot(),FC;(function(t){t.method="textDocument/foldingRange",t.messageDirection=bu.MessageDirection.clientToServer,t.type=new bu.ProtocolRequestType(t.method)})(FC||(ms.FoldingRangeRequest=FC={}));var AC;(function(t){t.method="workspace/foldingRange/refresh",t.messageDirection=bu.MessageDirection.serverToClient,t.type=new bu.ProtocolRequestType0(t.method)})(AC||(ms.FoldingRangeRefreshRequest=AC={}))});var $C=K(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});_u.DeclarationRequest=void 0;var MC=Ot(),NC;(function(t){t.method="textDocument/declaration",t.messageDirection=MC.MessageDirection.clientToServer,t.type=new MC.ProtocolRequestType(t.method)})(NC||(_u.DeclarationRequest=NC={}))});var WC=K(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});Tu.SelectionRangeRequest=void 0;var UC=Ot(),HC;(function(t){t.method="textDocument/selectionRange",t.messageDirection=UC.MessageDirection.clientToServer,t.type=new UC.ProtocolRequestType(t.method)})(HC||(Tu.SelectionRangeRequest=HC={}))});var BC=K(no=>{"use strict";Object.defineProperty(no,"__esModule",{value:!0});no.WorkDoneProgressCancelNotification=no.WorkDoneProgressCreateRequest=no.WorkDoneProgress=void 0;var DF=ko(),Du=Ot(),jC;(function(t){t.type=new DF.ProgressType;function e(n){return n===t.type}t.is=e})(jC||(no.WorkDoneProgress=jC={}));var zC;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=Du.MessageDirection.serverToClient,t.type=new Du.ProtocolRequestType(t.method)})(zC||(no.WorkDoneProgressCreateRequest=zC={}));var KC;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=Du.MessageDirection.clientToServer,t.type=new Du.ProtocolNotificationType(t.method)})(KC||(no.WorkDoneProgressCancelNotification=KC={}))});var QC=K(ro=>{"use strict";Object.defineProperty(ro,"__esModule",{value:!0});ro.CallHierarchyOutgoingCallsRequest=ro.CallHierarchyIncomingCallsRequest=ro.CallHierarchyPrepareRequest=void 0;var vs=Ot(),VC;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=vs.MessageDirection.clientToServer,t.type=new vs.ProtocolRequestType(t.method)})(VC||(ro.CallHierarchyPrepareRequest=VC={}));var GC;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=vs.MessageDirection.clientToServer,t.type=new vs.ProtocolRequestType(t.method)})(GC||(ro.CallHierarchyIncomingCallsRequest=GC={}));var XC;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=vs.MessageDirection.clientToServer,t.type=new vs.ProtocolRequestType(t.method)})(XC||(ro.CallHierarchyOutgoingCallsRequest=XC={}))});var nb=K(dr=>{"use strict";Object.defineProperty(dr,"__esModule",{value:!0});dr.SemanticTokensRefreshRequest=dr.SemanticTokensRangeRequest=dr.SemanticTokensDeltaRequest=dr.SemanticTokensRequest=dr.SemanticTokensRegistrationType=dr.TokenFormat=void 0;var Ai=Ot(),JC;(function(t){t.Relative="relative"})(JC||(dr.TokenFormat=JC={}));var pa;(function(t){t.method="textDocument/semanticTokens",t.type=new Ai.RegistrationType(t.method)})(pa||(dr.SemanticTokensRegistrationType=pa={}));var YC;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=Ai.MessageDirection.clientToServer,t.type=new Ai.ProtocolRequestType(t.method),t.registrationMethod=pa.method})(YC||(dr.SemanticTokensRequest=YC={}));var ZC;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=Ai.MessageDirection.clientToServer,t.type=new Ai.ProtocolRequestType(t.method),t.registrationMethod=pa.method})(ZC||(dr.SemanticTokensDeltaRequest=ZC={}));var eb;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=Ai.MessageDirection.clientToServer,t.type=new Ai.ProtocolRequestType(t.method),t.registrationMethod=pa.method})(eb||(dr.SemanticTokensRangeRequest=eb={}));var tb;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=Ai.MessageDirection.serverToClient,t.type=new Ai.ProtocolRequestType0(t.method)})(tb||(dr.SemanticTokensRefreshRequest=tb={}))});var ob=K(Ru=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});Ru.ShowDocumentRequest=void 0;var rb=Ot(),ib;(function(t){t.method="window/showDocument",t.messageDirection=rb.MessageDirection.serverToClient,t.type=new rb.ProtocolRequestType(t.method)})(ib||(Ru.ShowDocumentRequest=ib={}))});var cb=K(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});Su.LinkedEditingRangeRequest=void 0;var sb=Ot(),ab;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=sb.MessageDirection.clientToServer,t.type=new sb.ProtocolRequestType(t.method)})(ab||(Su.LinkedEditingRangeRequest=ab={}))});var mb=K(qn=>{"use strict";Object.defineProperty(qn,"__esModule",{value:!0});qn.WillDeleteFilesRequest=qn.DidDeleteFilesNotification=qn.DidRenameFilesNotification=qn.WillRenameFilesRequest=qn.DidCreateFilesNotification=qn.WillCreateFilesRequest=qn.FileOperationPatternKind=void 0;var Gr=Ot(),ub;(function(t){t.file="file",t.folder="folder"})(ub||(qn.FileOperationPatternKind=ub={}));var lb;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=Gr.MessageDirection.clientToServer,t.type=new Gr.ProtocolRequestType(t.method)})(lb||(qn.WillCreateFilesRequest=lb={}));var db;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=Gr.MessageDirection.clientToServer,t.type=new Gr.ProtocolNotificationType(t.method)})(db||(qn.DidCreateFilesNotification=db={}));var fb;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=Gr.MessageDirection.clientToServer,t.type=new Gr.ProtocolRequestType(t.method)})(fb||(qn.WillRenameFilesRequest=fb={}));var pb;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=Gr.MessageDirection.clientToServer,t.type=new Gr.ProtocolNotificationType(t.method)})(pb||(qn.DidRenameFilesNotification=pb={}));var hb;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=Gr.MessageDirection.clientToServer,t.type=new Gr.ProtocolNotificationType(t.method)})(hb||(qn.DidDeleteFilesNotification=hb={}));var gb;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=Gr.MessageDirection.clientToServer,t.type=new Gr.ProtocolRequestType(t.method)})(gb||(qn.WillDeleteFilesRequest=gb={}))});var bb=K(io=>{"use strict";Object.defineProperty(io,"__esModule",{value:!0});io.MonikerRequest=io.MonikerKind=io.UniquenessLevel=void 0;var vb=Ot(),yb;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(yb||(io.UniquenessLevel=yb={}));var wb;(function(t){t.$import="import",t.$export="export",t.local="local"})(wb||(io.MonikerKind=wb={}));var Cb;(function(t){t.method="textDocument/moniker",t.messageDirection=vb.MessageDirection.clientToServer,t.type=new vb.ProtocolRequestType(t.method)})(Cb||(io.MonikerRequest=Cb={}))});var Rb=K(oo=>{"use strict";Object.defineProperty(oo,"__esModule",{value:!0});oo.TypeHierarchySubtypesRequest=oo.TypeHierarchySupertypesRequest=oo.TypeHierarchyPrepareRequest=void 0;var ys=Ot(),_b;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=ys.MessageDirection.clientToServer,t.type=new ys.ProtocolRequestType(t.method)})(_b||(oo.TypeHierarchyPrepareRequest=_b={}));var Tb;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=ys.MessageDirection.clientToServer,t.type=new ys.ProtocolRequestType(t.method)})(Tb||(oo.TypeHierarchySupertypesRequest=Tb={}));var Db;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=ys.MessageDirection.clientToServer,t.type=new ys.ProtocolRequestType(t.method)})(Db||(oo.TypeHierarchySubtypesRequest=Db={}))});var Pb=K(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0});ws.InlineValueRefreshRequest=ws.InlineValueRequest=void 0;var xu=Ot(),Sb;(function(t){t.method="textDocument/inlineValue",t.messageDirection=xu.MessageDirection.clientToServer,t.type=new xu.ProtocolRequestType(t.method)})(Sb||(ws.InlineValueRequest=Sb={}));var xb;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=xu.MessageDirection.serverToClient,t.type=new xu.ProtocolRequestType0(t.method)})(xb||(ws.InlineValueRefreshRequest=xb={}))});var Ob=K(so=>{"use strict";Object.defineProperty(so,"__esModule",{value:!0});so.InlayHintRefreshRequest=so.InlayHintResolveRequest=so.InlayHintRequest=void 0;var Cs=Ot(),Eb;(function(t){t.method="textDocument/inlayHint",t.messageDirection=Cs.MessageDirection.clientToServer,t.type=new Cs.ProtocolRequestType(t.method)})(Eb||(so.InlayHintRequest=Eb={}));var kb;(function(t){t.method="inlayHint/resolve",t.messageDirection=Cs.MessageDirection.clientToServer,t.type=new Cs.ProtocolRequestType(t.method)})(kb||(so.InlayHintResolveRequest=kb={}));var Ib;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=Cs.MessageDirection.serverToClient,t.type=new Cs.ProtocolRequestType0(t.method)})(Ib||(so.InlayHintRefreshRequest=Ib={}))});var $b=K(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.DiagnosticRefreshRequest=Xr.WorkspaceDiagnosticRequest=Xr.DocumentDiagnosticRequest=Xr.DocumentDiagnosticReportKind=Xr.DiagnosticServerCancellationData=void 0;var Nb=ko(),RF=gu(),bs=Ot(),qb;(function(t){function e(n){let i=n;return i&&RF.boolean(i.retriggerRequest)}t.is=e})(qb||(Xr.DiagnosticServerCancellationData=qb={}));var Fb;(function(t){t.Full="full",t.Unchanged="unchanged"})(Fb||(Xr.DocumentDiagnosticReportKind=Fb={}));var Ab;(function(t){t.method="textDocument/diagnostic",t.messageDirection=bs.MessageDirection.clientToServer,t.type=new bs.ProtocolRequestType(t.method),t.partialResult=new Nb.ProgressType})(Ab||(Xr.DocumentDiagnosticRequest=Ab={}));var Lb;(function(t){t.method="workspace/diagnostic",t.messageDirection=bs.MessageDirection.clientToServer,t.type=new bs.ProtocolRequestType(t.method),t.partialResult=new Nb.ProgressType})(Lb||(Xr.WorkspaceDiagnosticRequest=Lb={}));var Mb;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=bs.MessageDirection.serverToClient,t.type=new bs.ProtocolRequestType0(t.method)})(Mb||(Xr.DiagnosticRefreshRequest=Mb={}))});var Bb=K(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.DidCloseNotebookDocumentNotification=Qt.DidSaveNotebookDocumentNotification=Qt.DidChangeNotebookDocumentNotification=Qt.NotebookCellArrayChange=Qt.DidOpenNotebookDocumentNotification=Qt.NotebookDocumentSyncRegistrationType=Qt.NotebookDocument=Qt.NotebookCell=Qt.ExecutionSummary=Qt.NotebookCellKind=void 0;var ha=hu(),si=gu(),mi=Ot(),Np;(function(t){t.Markup=1,t.Code=2;function e(n){return n===1||n===2}t.is=e})(Np||(Qt.NotebookCellKind=Np={}));var $p;(function(t){function e(s,c){let u={executionOrder:s};return(c===!0||c===!1)&&(u.success=c),u}t.create=e;function n(s){let c=s;return si.objectLiteral(c)&&ha.uinteger.is(c.executionOrder)&&(c.success===void 0||si.boolean(c.success))}t.is=n;function i(s,c){return s===c?!0:s==null||c===null||c===void 0?!1:s.executionOrder===c.executionOrder&&s.success===c.success}t.equals=i})($p||(Qt.ExecutionSummary=$p={}));var Pu;(function(t){function e(c,u){return{kind:c,document:u}}t.create=e;function n(c){let u=c;return si.objectLiteral(u)&&Np.is(u.kind)&&ha.DocumentUri.is(u.document)&&(u.metadata===void 0||si.objectLiteral(u.metadata))}t.is=n;function i(c,u){let l=new Set;return c.document!==u.document&&l.add("document"),c.kind!==u.kind&&l.add("kind"),c.executionSummary!==u.executionSummary&&l.add("executionSummary"),(c.metadata!==void 0||u.metadata!==void 0)&&!s(c.metadata,u.metadata)&&l.add("metadata"),(c.executionSummary!==void 0||u.executionSummary!==void 0)&&!$p.equals(c.executionSummary,u.executionSummary)&&l.add("executionSummary"),l}t.diff=i;function s(c,u){if(c===u)return!0;if(c==null||u===null||u===void 0||typeof c!=typeof u||typeof c!="object")return!1;let l=Array.isArray(c),f=Array.isArray(u);if(l!==f)return!1;if(l&&f){if(c.length!==u.length)return!1;for(let h=0;h<c.length;h++)if(!s(c[h],u[h]))return!1}if(si.objectLiteral(c)&&si.objectLiteral(u)){let h=Object.keys(c),g=Object.keys(u);if(h.length!==g.length||(h.sort(),g.sort(),!s(h,g)))return!1;for(let C=0;C<h.length;C++){let _=h[C];if(!s(c[_],u[_]))return!1}}return!0}})(Pu||(Qt.NotebookCell=Pu={}));var Ub;(function(t){function e(i,s,c,u){return{uri:i,notebookType:s,version:c,cells:u}}t.create=e;function n(i){let s=i;return si.objectLiteral(s)&&si.string(s.uri)&&ha.integer.is(s.version)&&si.typedArray(s.cells,Pu.is)}t.is=n})(Ub||(Qt.NotebookDocument=Ub={}));var _s;(function(t){t.method="notebookDocument/sync",t.messageDirection=mi.MessageDirection.clientToServer,t.type=new mi.RegistrationType(t.method)})(_s||(Qt.NotebookDocumentSyncRegistrationType=_s={}));var Hb;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=mi.MessageDirection.clientToServer,t.type=new mi.ProtocolNotificationType(t.method),t.registrationMethod=_s.method})(Hb||(Qt.DidOpenNotebookDocumentNotification=Hb={}));var Wb;(function(t){function e(i){let s=i;return si.objectLiteral(s)&&ha.uinteger.is(s.start)&&ha.uinteger.is(s.deleteCount)&&(s.cells===void 0||si.typedArray(s.cells,Pu.is))}t.is=e;function n(i,s,c){let u={start:i,deleteCount:s};return c!==void 0&&(u.cells=c),u}t.create=n})(Wb||(Qt.NotebookCellArrayChange=Wb={}));var jb;(function(t){t.method="notebookDocument/didChange",t.messageDirection=mi.MessageDirection.clientToServer,t.type=new mi.ProtocolNotificationType(t.method),t.registrationMethod=_s.method})(jb||(Qt.DidChangeNotebookDocumentNotification=jb={}));var zb;(function(t){t.method="notebookDocument/didSave",t.messageDirection=mi.MessageDirection.clientToServer,t.type=new mi.ProtocolNotificationType(t.method),t.registrationMethod=_s.method})(zb||(Qt.DidSaveNotebookDocumentNotification=zb={}));var Kb;(function(t){t.method="notebookDocument/didClose",t.messageDirection=mi.MessageDirection.clientToServer,t.type=new mi.ProtocolNotificationType(t.method),t.registrationMethod=_s.method})(Kb||(Qt.DidCloseNotebookDocumentNotification=Kb={}))});var Xb=K(Eu=>{"use strict";Object.defineProperty(Eu,"__esModule",{value:!0});Eu.InlineCompletionRequest=void 0;var Vb=Ot(),Gb;(function(t){t.method="textDocument/inlineCompletion",t.messageDirection=Vb.MessageDirection.clientToServer,t.type=new Vb.ProtocolRequestType(t.method)})(Gb||(Eu.InlineCompletionRequest=Gb={}))});var cT=K(x=>{"use strict";Object.defineProperty(x,"__esModule",{value:!0});x.WorkspaceSymbolRequest=x.CodeActionResolveRequest=x.CodeActionRequest=x.DocumentSymbolRequest=x.DocumentHighlightRequest=x.ReferencesRequest=x.DefinitionRequest=x.SignatureHelpRequest=x.SignatureHelpTriggerKind=x.HoverRequest=x.CompletionResolveRequest=x.CompletionRequest=x.CompletionTriggerKind=x.PublishDiagnosticsNotification=x.WatchKind=x.RelativePattern=x.FileChangeType=x.DidChangeWatchedFilesNotification=x.WillSaveTextDocumentWaitUntilRequest=x.WillSaveTextDocumentNotification=x.TextDocumentSaveReason=x.DidSaveTextDocumentNotification=x.DidCloseTextDocumentNotification=x.DidChangeTextDocumentNotification=x.TextDocumentContentChangeEvent=x.DidOpenTextDocumentNotification=x.TextDocumentSyncKind=x.TelemetryEventNotification=x.LogMessageNotification=x.ShowMessageRequest=x.ShowMessageNotification=x.MessageType=x.DidChangeConfigurationNotification=x.ExitNotification=x.ShutdownRequest=x.InitializedNotification=x.InitializeErrorCodes=x.InitializeRequest=x.WorkDoneProgressOptions=x.TextDocumentRegistrationOptions=x.StaticRegistrationOptions=x.PositionEncodingKind=x.FailureHandlingKind=x.ResourceOperationKind=x.UnregistrationRequest=x.RegistrationRequest=x.DocumentSelector=x.NotebookCellTextDocumentFilter=x.NotebookDocumentFilter=x.TextDocumentFilter=void 0;x.MonikerRequest=x.MonikerKind=x.UniquenessLevel=x.WillDeleteFilesRequest=x.DidDeleteFilesNotification=x.WillRenameFilesRequest=x.DidRenameFilesNotification=x.WillCreateFilesRequest=x.DidCreateFilesNotification=x.FileOperationPatternKind=x.LinkedEditingRangeRequest=x.ShowDocumentRequest=x.SemanticTokensRegistrationType=x.SemanticTokensRefreshRequest=x.SemanticTokensRangeRequest=x.SemanticTokensDeltaRequest=x.SemanticTokensRequest=x.TokenFormat=x.CallHierarchyPrepareRequest=x.CallHierarchyOutgoingCallsRequest=x.CallHierarchyIncomingCallsRequest=x.WorkDoneProgressCancelNotification=x.WorkDoneProgressCreateRequest=x.WorkDoneProgress=x.SelectionRangeRequest=x.DeclarationRequest=x.FoldingRangeRefreshRequest=x.FoldingRangeRequest=x.ColorPresentationRequest=x.DocumentColorRequest=x.ConfigurationRequest=x.DidChangeWorkspaceFoldersNotification=x.WorkspaceFoldersRequest=x.TypeDefinitionRequest=x.ImplementationRequest=x.ApplyWorkspaceEditRequest=x.ExecuteCommandRequest=x.PrepareRenameRequest=x.RenameRequest=x.PrepareSupportDefaultBehavior=x.DocumentOnTypeFormattingRequest=x.DocumentRangesFormattingRequest=x.DocumentRangeFormattingRequest=x.DocumentFormattingRequest=x.DocumentLinkResolveRequest=x.DocumentLinkRequest=x.CodeLensRefreshRequest=x.CodeLensResolveRequest=x.CodeLensRequest=x.WorkspaceSymbolResolveRequest=void 0;x.InlineCompletionRequest=x.DidCloseNotebookDocumentNotification=x.DidSaveNotebookDocumentNotification=x.DidChangeNotebookDocumentNotification=x.NotebookCellArrayChange=x.DidOpenNotebookDocumentNotification=x.NotebookDocumentSyncRegistrationType=x.NotebookDocument=x.NotebookCell=x.ExecutionSummary=x.NotebookCellKind=x.DiagnosticRefreshRequest=x.WorkspaceDiagnosticRequest=x.DocumentDiagnosticRequest=x.DocumentDiagnosticReportKind=x.DiagnosticServerCancellationData=x.InlayHintRefreshRequest=x.InlayHintResolveRequest=x.InlayHintRequest=x.InlineValueRefreshRequest=x.InlineValueRequest=x.TypeHierarchySupertypesRequest=x.TypeHierarchySubtypesRequest=x.TypeHierarchyPrepareRequest=void 0;var ie=Ot(),Qb=hu(),gn=gu(),SF=bC();Object.defineProperty(x,"ImplementationRequest",{enumerable:!0,get:function(){return SF.ImplementationRequest}});var xF=DC();Object.defineProperty(x,"TypeDefinitionRequest",{enumerable:!0,get:function(){return xF.TypeDefinitionRequest}});var iT=xC();Object.defineProperty(x,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return iT.WorkspaceFoldersRequest}});Object.defineProperty(x,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return iT.DidChangeWorkspaceFoldersNotification}});var PF=kC();Object.defineProperty(x,"ConfigurationRequest",{enumerable:!0,get:function(){return PF.ConfigurationRequest}});var oT=qC();Object.defineProperty(x,"DocumentColorRequest",{enumerable:!0,get:function(){return oT.DocumentColorRequest}});Object.defineProperty(x,"ColorPresentationRequest",{enumerable:!0,get:function(){return oT.ColorPresentationRequest}});var sT=LC();Object.defineProperty(x,"FoldingRangeRequest",{enumerable:!0,get:function(){return sT.FoldingRangeRequest}});Object.defineProperty(x,"FoldingRangeRefreshRequest",{enumerable:!0,get:function(){return sT.FoldingRangeRefreshRequest}});var EF=$C();Object.defineProperty(x,"DeclarationRequest",{enumerable:!0,get:function(){return EF.DeclarationRequest}});var kF=WC();Object.defineProperty(x,"SelectionRangeRequest",{enumerable:!0,get:function(){return kF.SelectionRangeRequest}});var zp=BC();Object.defineProperty(x,"WorkDoneProgress",{enumerable:!0,get:function(){return zp.WorkDoneProgress}});Object.defineProperty(x,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return zp.WorkDoneProgressCreateRequest}});Object.defineProperty(x,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return zp.WorkDoneProgressCancelNotification}});var Kp=QC();Object.defineProperty(x,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Kp.CallHierarchyIncomingCallsRequest}});Object.defineProperty(x,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Kp.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(x,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Kp.CallHierarchyPrepareRequest}});var Ts=nb();Object.defineProperty(x,"TokenFormat",{enumerable:!0,get:function(){return Ts.TokenFormat}});Object.defineProperty(x,"SemanticTokensRequest",{enumerable:!0,get:function(){return Ts.SemanticTokensRequest}});Object.defineProperty(x,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return Ts.SemanticTokensDeltaRequest}});Object.defineProperty(x,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return Ts.SemanticTokensRangeRequest}});Object.defineProperty(x,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return Ts.SemanticTokensRefreshRequest}});Object.defineProperty(x,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return Ts.SemanticTokensRegistrationType}});var IF=ob();Object.defineProperty(x,"ShowDocumentRequest",{enumerable:!0,get:function(){return IF.ShowDocumentRequest}});var OF=cb();Object.defineProperty(x,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return OF.LinkedEditingRangeRequest}});var Io=mb();Object.defineProperty(x,"FileOperationPatternKind",{enumerable:!0,get:function(){return Io.FileOperationPatternKind}});Object.defineProperty(x,"DidCreateFilesNotification",{enumerable:!0,get:function(){return Io.DidCreateFilesNotification}});Object.defineProperty(x,"WillCreateFilesRequest",{enumerable:!0,get:function(){return Io.WillCreateFilesRequest}});Object.defineProperty(x,"DidRenameFilesNotification",{enumerable:!0,get:function(){return Io.DidRenameFilesNotification}});Object.defineProperty(x,"WillRenameFilesRequest",{enumerable:!0,get:function(){return Io.WillRenameFilesRequest}});Object.defineProperty(x,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return Io.DidDeleteFilesNotification}});Object.defineProperty(x,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return Io.WillDeleteFilesRequest}});var Bp=bb();Object.defineProperty(x,"UniquenessLevel",{enumerable:!0,get:function(){return Bp.UniquenessLevel}});Object.defineProperty(x,"MonikerKind",{enumerable:!0,get:function(){return Bp.MonikerKind}});Object.defineProperty(x,"MonikerRequest",{enumerable:!0,get:function(){return Bp.MonikerRequest}});var Vp=Rb();Object.defineProperty(x,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return Vp.TypeHierarchyPrepareRequest}});Object.defineProperty(x,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return Vp.TypeHierarchySubtypesRequest}});Object.defineProperty(x,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return Vp.TypeHierarchySupertypesRequest}});var aT=Pb();Object.defineProperty(x,"InlineValueRequest",{enumerable:!0,get:function(){return aT.InlineValueRequest}});Object.defineProperty(x,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return aT.InlineValueRefreshRequest}});var Gp=Ob();Object.defineProperty(x,"InlayHintRequest",{enumerable:!0,get:function(){return Gp.InlayHintRequest}});Object.defineProperty(x,"InlayHintResolveRequest",{enumerable:!0,get:function(){return Gp.InlayHintResolveRequest}});Object.defineProperty(x,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return Gp.InlayHintRefreshRequest}});var ga=$b();Object.defineProperty(x,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return ga.DiagnosticServerCancellationData}});Object.defineProperty(x,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return ga.DocumentDiagnosticReportKind}});Object.defineProperty(x,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return ga.DocumentDiagnosticRequest}});Object.defineProperty(x,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return ga.WorkspaceDiagnosticRequest}});Object.defineProperty(x,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return ga.DiagnosticRefreshRequest}});var vi=Bb();Object.defineProperty(x,"NotebookCellKind",{enumerable:!0,get:function(){return vi.NotebookCellKind}});Object.defineProperty(x,"ExecutionSummary",{enumerable:!0,get:function(){return vi.ExecutionSummary}});Object.defineProperty(x,"NotebookCell",{enumerable:!0,get:function(){return vi.NotebookCell}});Object.defineProperty(x,"NotebookDocument",{enumerable:!0,get:function(){return vi.NotebookDocument}});Object.defineProperty(x,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return vi.NotebookDocumentSyncRegistrationType}});Object.defineProperty(x,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return vi.DidOpenNotebookDocumentNotification}});Object.defineProperty(x,"NotebookCellArrayChange",{enumerable:!0,get:function(){return vi.NotebookCellArrayChange}});Object.defineProperty(x,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return vi.DidChangeNotebookDocumentNotification}});Object.defineProperty(x,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return vi.DidSaveNotebookDocumentNotification}});Object.defineProperty(x,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return vi.DidCloseNotebookDocumentNotification}});var qF=Xb();Object.defineProperty(x,"InlineCompletionRequest",{enumerable:!0,get:function(){return qF.InlineCompletionRequest}});var Up;(function(t){function e(n){let i=n;return gn.string(i)||gn.string(i.language)||gn.string(i.scheme)||gn.string(i.pattern)}t.is=e})(Up||(x.TextDocumentFilter=Up={}));var Hp;(function(t){function e(n){let i=n;return gn.objectLiteral(i)&&(gn.string(i.notebookType)||gn.string(i.scheme)||gn.string(i.pattern))}t.is=e})(Hp||(x.NotebookDocumentFilter=Hp={}));var Wp;(function(t){function e(n){let i=n;return gn.objectLiteral(i)&&(gn.string(i.notebook)||Hp.is(i.notebook))&&(i.language===void 0||gn.string(i.language))}t.is=e})(Wp||(x.NotebookCellTextDocumentFilter=Wp={}));var jp;(function(t){function e(n){if(!Array.isArray(n))return!1;for(let i of n)if(!gn.string(i)&&!Up.is(i)&&!Wp.is(i))return!1;return!0}t.is=e})(jp||(x.DocumentSelector=jp={}));var Jb;(function(t){t.method="client/registerCapability",t.messageDirection=ie.MessageDirection.serverToClient,t.type=new ie.ProtocolRequestType(t.method)})(Jb||(x.RegistrationRequest=Jb={}));var Yb;(function(t){t.method="client/unregisterCapability",t.messageDirection=ie.MessageDirection.serverToClient,t.type=new ie.ProtocolRequestType(t.method)})(Yb||(x.UnregistrationRequest=Yb={}));var Zb;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(Zb||(x.ResourceOperationKind=Zb={}));var e_;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(e_||(x.FailureHandlingKind=e_={}));var t_;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(t_||(x.PositionEncodingKind=t_={}));var n_;(function(t){function e(n){let i=n;return i&&gn.string(i.id)&&i.id.length>0}t.hasId=e})(n_||(x.StaticRegistrationOptions=n_={}));var r_;(function(t){function e(n){let i=n;return i&&(i.documentSelector===null||jp.is(i.documentSelector))}t.is=e})(r_||(x.TextDocumentRegistrationOptions=r_={}));var i_;(function(t){function e(i){let s=i;return gn.objectLiteral(s)&&(s.workDoneProgress===void 0||gn.boolean(s.workDoneProgress))}t.is=e;function n(i){let s=i;return s&&gn.boolean(s.workDoneProgress)}t.hasWorkDoneProgress=n})(i_||(x.WorkDoneProgressOptions=i_={}));var o_;(function(t){t.method="initialize",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolRequestType(t.method)})(o_||(x.InitializeRequest=o_={}));var s_;(function(t){t.unknownProtocolVersion=1})(s_||(x.InitializeErrorCodes=s_={}));var a_;(function(t){t.method="initialized",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolNotificationType(t.method)})(a_||(x.InitializedNotification=a_={}));var c_;(function(t){t.method="shutdown",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolRequestType0(t.method)})(c_||(x.ShutdownRequest=c_={}));var u_;(function(t){t.method="exit",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolNotificationType0(t.method)})(u_||(x.ExitNotification=u_={}));var l_;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolNotificationType(t.method)})(l_||(x.DidChangeConfigurationNotification=l_={}));var d_;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4,t.Debug=5})(d_||(x.MessageType=d_={}));var f_;(function(t){t.method="window/showMessage",t.messageDirection=ie.MessageDirection.serverToClient,t.type=new ie.ProtocolNotificationType(t.method)})(f_||(x.ShowMessageNotification=f_={}));var p_;(function(t){t.method="window/showMessageRequest",t.messageDirection=ie.MessageDirection.serverToClient,t.type=new ie.ProtocolRequestType(t.method)})(p_||(x.ShowMessageRequest=p_={}));var h_;(function(t){t.method="window/logMessage",t.messageDirection=ie.MessageDirection.serverToClient,t.type=new ie.ProtocolNotificationType(t.method)})(h_||(x.LogMessageNotification=h_={}));var g_;(function(t){t.method="telemetry/event",t.messageDirection=ie.MessageDirection.serverToClient,t.type=new ie.ProtocolNotificationType(t.method)})(g_||(x.TelemetryEventNotification=g_={}));var m_;(function(t){t.None=0,t.Full=1,t.Incremental=2})(m_||(x.TextDocumentSyncKind=m_={}));var v_;(function(t){t.method="textDocument/didOpen",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolNotificationType(t.method)})(v_||(x.DidOpenTextDocumentNotification=v_={}));var y_;(function(t){function e(i){let s=i;return s!=null&&typeof s.text=="string"&&s.range!==void 0&&(s.rangeLength===void 0||typeof s.rangeLength=="number")}t.isIncremental=e;function n(i){let s=i;return s!=null&&typeof s.text=="string"&&s.range===void 0&&s.rangeLength===void 0}t.isFull=n})(y_||(x.TextDocumentContentChangeEvent=y_={}));var w_;(function(t){t.method="textDocument/didChange",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolNotificationType(t.method)})(w_||(x.DidChangeTextDocumentNotification=w_={}));var C_;(function(t){t.method="textDocument/didClose",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolNotificationType(t.method)})(C_||(x.DidCloseTextDocumentNotification=C_={}));var b_;(function(t){t.method="textDocument/didSave",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolNotificationType(t.method)})(b_||(x.DidSaveTextDocumentNotification=b_={}));var __;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(__||(x.TextDocumentSaveReason=__={}));var T_;(function(t){t.method="textDocument/willSave",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolNotificationType(t.method)})(T_||(x.WillSaveTextDocumentNotification=T_={}));var D_;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolRequestType(t.method)})(D_||(x.WillSaveTextDocumentWaitUntilRequest=D_={}));var R_;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolNotificationType(t.method)})(R_||(x.DidChangeWatchedFilesNotification=R_={}));var S_;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(S_||(x.FileChangeType=S_={}));var x_;(function(t){function e(n){let i=n;return gn.objectLiteral(i)&&(Qb.URI.is(i.baseUri)||Qb.WorkspaceFolder.is(i.baseUri))&&gn.string(i.pattern)}t.is=e})(x_||(x.RelativePattern=x_={}));var P_;(function(t){t.Create=1,t.Change=2,t.Delete=4})(P_||(x.WatchKind=P_={}));var E_;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=ie.MessageDirection.serverToClient,t.type=new ie.ProtocolNotificationType(t.method)})(E_||(x.PublishDiagnosticsNotification=E_={}));var k_;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(k_||(x.CompletionTriggerKind=k_={}));var I_;(function(t){t.method="textDocument/completion",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolRequestType(t.method)})(I_||(x.CompletionRequest=I_={}));var O_;(function(t){t.method="completionItem/resolve",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolRequestType(t.method)})(O_||(x.CompletionResolveRequest=O_={}));var q_;(function(t){t.method="textDocument/hover",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolRequestType(t.method)})(q_||(x.HoverRequest=q_={}));var F_;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(F_||(x.SignatureHelpTriggerKind=F_={}));var A_;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolRequestType(t.method)})(A_||(x.SignatureHelpRequest=A_={}));var L_;(function(t){t.method="textDocument/definition",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolRequestType(t.method)})(L_||(x.DefinitionRequest=L_={}));var M_;(function(t){t.method="textDocument/references",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolRequestType(t.method)})(M_||(x.ReferencesRequest=M_={}));var N_;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolRequestType(t.method)})(N_||(x.DocumentHighlightRequest=N_={}));var $_;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolRequestType(t.method)})($_||(x.DocumentSymbolRequest=$_={}));var U_;(function(t){t.method="textDocument/codeAction",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolRequestType(t.method)})(U_||(x.CodeActionRequest=U_={}));var H_;(function(t){t.method="codeAction/resolve",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolRequestType(t.method)})(H_||(x.CodeActionResolveRequest=H_={}));var W_;(function(t){t.method="workspace/symbol",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolRequestType(t.method)})(W_||(x.WorkspaceSymbolRequest=W_={}));var j_;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolRequestType(t.method)})(j_||(x.WorkspaceSymbolResolveRequest=j_={}));var z_;(function(t){t.method="textDocument/codeLens",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolRequestType(t.method)})(z_||(x.CodeLensRequest=z_={}));var K_;(function(t){t.method="codeLens/resolve",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolRequestType(t.method)})(K_||(x.CodeLensResolveRequest=K_={}));var B_;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=ie.MessageDirection.serverToClient,t.type=new ie.ProtocolRequestType0(t.method)})(B_||(x.CodeLensRefreshRequest=B_={}));var V_;(function(t){t.method="textDocument/documentLink",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolRequestType(t.method)})(V_||(x.DocumentLinkRequest=V_={}));var G_;(function(t){t.method="documentLink/resolve",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolRequestType(t.method)})(G_||(x.DocumentLinkResolveRequest=G_={}));var X_;(function(t){t.method="textDocument/formatting",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolRequestType(t.method)})(X_||(x.DocumentFormattingRequest=X_={}));var Q_;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolRequestType(t.method)})(Q_||(x.DocumentRangeFormattingRequest=Q_={}));var J_;(function(t){t.method="textDocument/rangesFormatting",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolRequestType(t.method)})(J_||(x.DocumentRangesFormattingRequest=J_={}));var Y_;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolRequestType(t.method)})(Y_||(x.DocumentOnTypeFormattingRequest=Y_={}));var Z_;(function(t){t.Identifier=1})(Z_||(x.PrepareSupportDefaultBehavior=Z_={}));var eT;(function(t){t.method="textDocument/rename",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolRequestType(t.method)})(eT||(x.RenameRequest=eT={}));var tT;(function(t){t.method="textDocument/prepareRename",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolRequestType(t.method)})(tT||(x.PrepareRenameRequest=tT={}));var nT;(function(t){t.method="workspace/executeCommand",t.messageDirection=ie.MessageDirection.clientToServer,t.type=new ie.ProtocolRequestType(t.method)})(nT||(x.ExecuteCommandRequest=nT={}));var rT;(function(t){t.method="workspace/applyEdit",t.messageDirection=ie.MessageDirection.serverToClient,t.type=new ie.ProtocolRequestType("workspace/applyEdit")})(rT||(x.ApplyWorkspaceEditRequest=rT={}))});var lT=K(ku=>{"use strict";Object.defineProperty(ku,"__esModule",{value:!0});ku.createProtocolConnection=void 0;var uT=ko();function FF(t,e,n,i){return uT.ConnectionStrategy.is(i)&&(i={connectionStrategy:i}),(0,uT.createMessageConnection)(t,e,n,i)}ku.createProtocolConnection=FF});var fT=K(fr=>{"use strict";var AF=fr&&fr.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var s=Object.getOwnPropertyDescriptor(e,n);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,s)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Iu=fr&&fr.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&AF(e,t,n)};Object.defineProperty(fr,"__esModule",{value:!0});fr.LSPErrorCodes=fr.createProtocolConnection=void 0;Iu(ko(),fr);Iu(hu(),fr);Iu(Ot(),fr);Iu(cT(),fr);var LF=lT();Object.defineProperty(fr,"createProtocolConnection",{enumerable:!0,get:function(){return LF.createProtocolConnection}});var dT;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(dT||(fr.LSPErrorCodes=dT={}))});var xe=K(yi=>{"use strict";var MF=yi&&yi.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var s=Object.getOwnPropertyDescriptor(e,n);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,s)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),pT=yi&&yi.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&MF(e,t,n)};Object.defineProperty(yi,"__esModule",{value:!0});yi.createProtocolConnection=void 0;var NF=Op();pT(Op(),yi);pT(fT(),yi);function $F(t,e,n,i){return(0,NF.createMessageConnection)(t,e,n,i)}yi.createProtocolConnection=$F});var Ou=K(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});Fn.forEach=Fn.mapAsync=Fn.map=Fn.clearTestMode=Fn.setTestMode=Fn.Semaphore=Fn.Delayer=void 0;var va=xe(),Xp=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,n=this.defaultDelay){return this.task=e,n>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(i=>{this.onSuccess=i}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var i=this.task();return this.task=void 0,i})),(n>=0||this.timeout===void 0)&&(this.timeout=(0,va.RAL)().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},n>=0?n:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(this.timeout.dispose(),this.timeout=void 0)}};Fn.Delayer=Xp;var Qp=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((n,i)=>{this._waiting.push({thunk:e,resolve:n,reject:i}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,va.RAL)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=e.thunk();n instanceof Promise?n.then(i=>{this._active--,e.resolve(i),this.runNext()},i=>{this._active--,e.reject(i),this.runNext()}):(this._active--,e.resolve(n),this.runNext())}catch(n){this._active--,e.reject(n),this.runNext()}}};Fn.Semaphore=Qp;var Jp=!1;function UF(){Jp=!0}Fn.setTestMode=UF;function HF(){Jp=!1}Fn.clearTestMode=HF;var hT=15,ma=class{constructor(e=hT){this.yieldAfter=Jp===!0?Math.max(e,2):Math.max(e,hT),this.startTime=Date.now(),this.counter=0,this.total=0,this.counterInterval=1}start(){this.counter=0,this.total=0,this.counterInterval=1,this.startTime=Date.now()}shouldYield(){if(++this.counter>=this.counterInterval){let e=Date.now()-this.startTime,n=Math.max(0,this.yieldAfter-e);if(this.total+=this.counter,this.counter=0,e>=this.yieldAfter||n<=1)return this.counterInterval=1,this.total=0,!0;switch(e){case 0:case 1:this.counterInterval=this.total*2;break}}return!1}};async function WF(t,e,n,i){if(t.length===0)return[];let s=new Array(t.length),c=new ma(i?.yieldAfter);function u(f){c.start();for(let h=f;h<t.length;h++)if(s[h]=e(t[h]),c.shouldYield())return i?.yieldCallback&&i.yieldCallback(),h+1;return-1}let l=u(0);for(;l!==-1&&!(n!==void 0&&n.isCancellationRequested);)l=await new Promise(f=>{(0,va.RAL)().timer.setImmediate(()=>{f(u(l))})});return s}Fn.map=WF;async function jF(t,e,n,i){if(t.length===0)return[];let s=new Array(t.length),c=new ma(i?.yieldAfter);async function u(f){c.start();for(let h=f;h<t.length;h++)if(s[h]=await e(t[h],n),c.shouldYield())return i?.yieldCallback&&i.yieldCallback(),h+1;return-1}let l=await u(0);for(;l!==-1&&!(n!==void 0&&n.isCancellationRequested);)l=await new Promise(f=>{(0,va.RAL)().timer.setImmediate(()=>{f(u(l))})});return s}Fn.mapAsync=jF;async function zF(t,e,n,i){if(t.length===0)return;let s=new ma(i?.yieldAfter);function c(l){s.start();for(let f=l;f<t.length;f++)if(e(t[f]),s.shouldYield())return i?.yieldCallback&&i.yieldCallback(),f+1;return-1}let u=c(0);for(;u!==-1&&!(n!==void 0&&n.isCancellationRequested);)u=await new Promise(l=>{(0,va.RAL)().timer.setImmediate(()=>{l(c(u))})})}Fn.forEach=zF});var eh=K(Zp=>{"use strict";Object.defineProperty(Zp,"__esModule",{value:!0});var KF=require("vscode"),Yp=class extends KF.CompletionItem{constructor(e){super(e)}};Zp.default=Yp});var rh=K(nh=>{"use strict";Object.defineProperty(nh,"__esModule",{value:!0});var BF=require("vscode"),th=class extends BF.CodeLens{constructor(e){super(e)}};nh.default=th});var sh=K(oh=>{"use strict";Object.defineProperty(oh,"__esModule",{value:!0});var VF=require("vscode"),ih=class extends VF.DocumentLink{constructor(e,n){super(e,n)}};oh.default=ih});var uh=K(ch=>{"use strict";Object.defineProperty(ch,"__esModule",{value:!0});var GF=require("vscode"),ah=class extends GF.CodeAction{constructor(e,n){super(e),this.data=n}};ch.default=ah});var fh=K(Ds=>{"use strict";Object.defineProperty(Ds,"__esModule",{value:!0});Ds.ProtocolDiagnostic=Ds.DiagnosticCode=void 0;var XF=require("vscode"),lh=cr(),gT;(function(t){function e(n){let i=n;return i!=null&&(lh.number(i.value)||lh.string(i.value))&&lh.string(i.target)}t.is=e})(gT||(Ds.DiagnosticCode=gT={}));var dh=class extends XF.Diagnostic{constructor(e,n,i,s){super(e,n,i),this.data=s,this.hasDiagnosticCode=!1}};Ds.ProtocolDiagnostic=dh});var gh=K(hh=>{"use strict";Object.defineProperty(hh,"__esModule",{value:!0});var QF=require("vscode"),ph=class extends QF.CallHierarchyItem{constructor(e,n,i,s,c,u,l){super(e,n,i,s,c,u),l!==void 0&&(this.data=l)}};hh.default=ph});var yh=K(vh=>{"use strict";Object.defineProperty(vh,"__esModule",{value:!0});var JF=require("vscode"),mh=class extends JF.TypeHierarchyItem{constructor(e,n,i,s,c,u,l){super(e,n,i,s,c,u),l!==void 0&&(this.data=l)}};vh.default=mh});var bh=K(Ch=>{"use strict";Object.defineProperty(Ch,"__esModule",{value:!0});var qu=require("vscode"),wh=class extends qu.SymbolInformation{constructor(e,n,i,s,c){let u=!(s instanceof qu.Uri);super(e,n,i,u?s:new qu.Location(s,new qu.Range(0,0,0,0))),this.hasRange=u,c!==void 0&&(this.data=c)}};Ch.default=wh});var Dh=K(Th=>{"use strict";Object.defineProperty(Th,"__esModule",{value:!0});var YF=require("vscode"),_h=class extends YF.InlayHint{constructor(e,n,i){super(e,n,i)}};Th.default=_h});var wT=K(Fu=>{"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});Fu.createConverter=void 0;var on=require("vscode"),ke=xe(),Oo=cr(),mT=Ou(),ZF=eh(),eA=rh(),tA=sh(),vT=uh(),yT=fh(),nA=gh(),rA=yh(),iA=bh(),oA=Dh(),Rh;(function(t){function e(n){let i=n;return i&&!!i.inserting&&!!i.replacing}t.is=e})(Rh||(Rh={}));function sA(t){let n=t||(y=>y.toString());function i(y){return n(y)}function s(y){return{uri:n(y.uri)}}function c(y){return{uri:n(y.uri),languageId:y.languageId,version:y.version,text:y.getText()}}function u(y){return{uri:n(y.uri),version:y.version}}function l(y){return{textDocument:c(y)}}function f(y){let j=y;return!!j.document&&!!j.contentChanges}function h(y){let j=y;return!!j.uri&&!!j.version}function g(y,j,le){if(h(y))return{textDocument:{uri:n(y.uri),version:y.version},contentChanges:[{text:y.getText()}]};if(f(y)){let tt=j,A=le;return{textDocument:{uri:n(tt),version:A},contentChanges:y.contentChanges.map(k=>{let I=k.range;return{range:{start:{line:I.start.line,character:I.start.character},end:{line:I.end.line,character:I.end.character}},rangeLength:k.rangeLength,text:k.text}})}}else throw Error("Unsupported text document change parameter")}function C(y){return{textDocument:s(y)}}function _(y,j=!1){let le={textDocument:s(y)};return j&&(le.text=y.getText()),le}function S(y){switch(y){case on.TextDocumentSaveReason.Manual:return ke.TextDocumentSaveReason.Manual;case on.TextDocumentSaveReason.AfterDelay:return ke.TextDocumentSaveReason.AfterDelay;case on.TextDocumentSaveReason.FocusOut:return ke.TextDocumentSaveReason.FocusOut}return ke.TextDocumentSaveReason.Manual}function T(y){return{textDocument:s(y.document),reason:S(y.reason)}}function L(y){return{files:y.files.map(j=>({uri:n(j)}))}}function F(y){return{files:y.files.map(j=>({oldUri:n(j.oldUri),newUri:n(j.newUri)}))}}function H(y){return{files:y.files.map(j=>({uri:n(j)}))}}function B(y){return{files:y.files.map(j=>({uri:n(j)}))}}function U(y){return{files:y.files.map(j=>({oldUri:n(j.oldUri),newUri:n(j.newUri)}))}}function ee(y){return{files:y.files.map(j=>({uri:n(j)}))}}function oe(y,j){return{textDocument:s(y),position:Rt(j)}}function ye(y){switch(y){case on.CompletionTriggerKind.TriggerCharacter:return ke.CompletionTriggerKind.TriggerCharacter;case on.CompletionTriggerKind.TriggerForIncompleteCompletions:return ke.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return ke.CompletionTriggerKind.Invoked}}function se(y,j,le){return{textDocument:s(y),position:Rt(j),context:{triggerKind:ye(le.triggerKind),triggerCharacter:le.triggerCharacter}}}function we(y){switch(y){case on.SignatureHelpTriggerKind.Invoke:return ke.SignatureHelpTriggerKind.Invoked;case on.SignatureHelpTriggerKind.TriggerCharacter:return ke.SignatureHelpTriggerKind.TriggerCharacter;case on.SignatureHelpTriggerKind.ContentChange:return ke.SignatureHelpTriggerKind.ContentChange}}function Ie(y){return{label:y.label}}function Lt(y){return y.map(Ie)}function Et(y){return{label:y.label,parameters:Lt(y.parameters)}}function Mt(y){return y.map(Et)}function tr(y){return y===void 0?y:{signatures:Mt(y.signatures),activeSignature:y.activeSignature,activeParameter:y.activeParameter}}function yn(y,j,le){return{textDocument:s(y),position:Rt(j),context:{isRetrigger:le.isRetrigger,triggerCharacter:le.triggerCharacter,triggerKind:we(le.triggerKind),activeSignatureHelp:tr(le.activeSignatureHelp)}}}function Rt(y){return{line:y.line,character:y.character}}function Ct(y){return y==null?y:{line:y.line>ke.uinteger.MAX_VALUE?ke.uinteger.MAX_VALUE:y.line,character:y.character>ke.uinteger.MAX_VALUE?ke.uinteger.MAX_VALUE:y.character}}function yr(y,j){return mT.map(y,Ct,j)}function Un(y){return y.map(Ct)}function Ke(y){return y==null?y:{start:Ct(y.start),end:Ct(y.end)}}function Rn(y){return y.map(Ke)}function wn(y){return y==null?y:ke.Location.create(i(y.uri),Ke(y.range))}function sn(y){switch(y){case on.DiagnosticSeverity.Error:return ke.DiagnosticSeverity.Error;case on.DiagnosticSeverity.Warning:return ke.DiagnosticSeverity.Warning;case on.DiagnosticSeverity.Information:return ke.DiagnosticSeverity.Information;case on.DiagnosticSeverity.Hint:return ke.DiagnosticSeverity.Hint}}function Hn(y){if(!y)return;let j=[];for(let le of y){let tt=Wn(le);tt!==void 0&&j.push(tt)}return j.length>0?j:void 0}function Wn(y){switch(y){case on.DiagnosticTag.Unnecessary:return ke.DiagnosticTag.Unnecessary;case on.DiagnosticTag.Deprecated:return ke.DiagnosticTag.Deprecated;default:return}}function Ar(y){return{message:y.message,location:wn(y.location)}}function jn(y){return y.map(Ar)}function nr(y){if(y!=null)return Oo.number(y)||Oo.string(y)?y:{value:y.value,target:i(y.target)}}function Lr(y){let j=ke.Diagnostic.create(Ke(y.range),y.message),le=y instanceof yT.ProtocolDiagnostic?y:void 0;le!==void 0&&le.data!==void 0&&(j.data=le.data);let tt=nr(y.code);return yT.DiagnosticCode.is(tt)?le!==void 0&&le.hasDiagnosticCode?j.code=tt:(j.code=tt.value,j.codeDescription={href:tt.target}):j.code=tt,Oo.number(y.severity)&&(j.severity=sn(y.severity)),Array.isArray(y.tags)&&(j.tags=Hn(y.tags)),y.relatedInformation&&(j.relatedInformation=jn(y.relatedInformation)),y.source&&(j.source=y.source),j}function Sn(y,j){return y==null?y:mT.map(y,Lr,j)}function xn(y){return y==null?y:y.map(Lr)}function wr(y,j){switch(y){case"$string":return j;case ke.MarkupKind.PlainText:return{kind:y,value:j};case ke.MarkupKind.Markdown:return{kind:y,value:j.value};default:return`Unsupported Markup content received. Kind is: ${y}`}}function st(y){switch(y){case on.CompletionItemTag.Deprecated:return ke.CompletionItemTag.Deprecated}}function zn(y){if(y===void 0)return y;let j=[];for(let le of y){let tt=st(le);tt!==void 0&&j.push(tt)}return j}function Cr(y,j){return j!==void 0?j:y+1}function Kt(y,j=!1){let le,tt;Oo.string(y.label)?le=y.label:(le=y.label.label,j&&(y.label.detail!==void 0||y.label.description!==void 0)&&(tt={detail:y.label.detail,description:y.label.description}));let A={label:le};tt!==void 0&&(A.labelDetails=tt);let w=y instanceof ZF.default?y:void 0;y.detail&&(A.detail=y.detail),y.documentation&&(!w||w.documentationFormat==="$string"?A.documentation=y.documentation:A.documentation=wr(w.documentationFormat,y.documentation)),y.filterText&&(A.filterText=y.filterText),ei(A,y),Oo.number(y.kind)&&(A.kind=Cr(y.kind,w&&w.originalItemKind)),y.sortText&&(A.sortText=y.sortText),y.additionalTextEdits&&(A.additionalTextEdits=rt(y.additionalTextEdits)),y.commitCharacters&&(A.commitCharacters=y.commitCharacters.slice()),y.command&&(A.command=ae(y.command)),(y.preselect===!0||y.preselect===!1)&&(A.preselect=y.preselect);let k=zn(y.tags);if(w){if(w.data!==void 0&&(A.data=w.data),w.deprecated===!0||w.deprecated===!1){if(w.deprecated===!0&&k!==void 0&&k.length>0){let I=k.indexOf(on.CompletionItemTag.Deprecated);I!==-1&&k.splice(I,1)}A.deprecated=w.deprecated}w.insertTextMode!==void 0&&(A.insertTextMode=w.insertTextMode)}return k!==void 0&&k.length>0&&(A.tags=k),A.insertTextMode===void 0&&y.keepWhitespace===!0&&(A.insertTextMode=ke.InsertTextMode.adjustIndentation),A}function ei(y,j){let le=ke.InsertTextFormat.PlainText,tt,A;j.textEdit?(tt=j.textEdit.newText,A=j.textEdit.range):j.insertText instanceof on.SnippetString?(le=ke.InsertTextFormat.Snippet,tt=j.insertText.value):tt=j.insertText,j.range&&(A=j.range),y.insertTextFormat=le,j.fromEdit&&tt!==void 0&&A!==void 0?y.textEdit=rr(tt,A):y.insertText=tt}function rr(y,j){return Rh.is(j)?ke.InsertReplaceEdit.create(y,Ke(j.inserting),Ke(j.replacing)):{newText:y,range:Ke(j)}}function Pn(y){return{range:Ke(y.range),newText:y.newText}}function rt(y){return y==null?y:y.map(Pn)}function Bt(y){return y<=on.SymbolKind.TypeParameter?y+1:ke.SymbolKind.Property}function Vt(y){return y}function Kn(y){return y.map(Vt)}function tn(y,j,le){return{textDocument:s(y),position:Rt(j),context:{includeDeclaration:le.includeDeclaration}}}async function Mr(y,j){let le=ke.CodeAction.create(y.title);if(y instanceof vT.default&&y.data!==void 0&&(le.data=y.data),y.kind!==void 0&&(le.kind=E(y.kind)),y.diagnostics!==void 0&&(le.diagnostics=await Sn(y.diagnostics,j)),y.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return y.command!==void 0&&(le.command=ae(y.command)),y.isPreferred!==void 0&&(le.isPreferred=y.isPreferred),y.disabled!==void 0&&(le.disabled={reason:y.disabled.reason}),le}function Bn(y){let j=ke.CodeAction.create(y.title);if(y instanceof vT.default&&y.data!==void 0&&(j.data=y.data),y.kind!==void 0&&(j.kind=E(y.kind)),y.diagnostics!==void 0&&(j.diagnostics=xn(y.diagnostics)),y.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return y.command!==void 0&&(j.command=ae(y.command)),y.isPreferred!==void 0&&(j.isPreferred=y.isPreferred),y.disabled!==void 0&&(j.disabled={reason:y.disabled.reason}),j}async function fn(y,j){if(y==null)return y;let le;return y.only&&Oo.string(y.only.value)&&(le=[y.only.value]),ke.CodeActionContext.create(await Sn(y.diagnostics,j),le,an(y.triggerKind))}function br(y){if(y==null)return y;let j;return y.only&&Oo.string(y.only.value)&&(j=[y.only.value]),ke.CodeActionContext.create(xn(y.diagnostics),j,an(y.triggerKind))}function an(y){switch(y){case on.CodeActionTriggerKind.Invoke:return ke.CodeActionTriggerKind.Invoked;case on.CodeActionTriggerKind.Automatic:return ke.CodeActionTriggerKind.Automatic;default:return}}function E(y){if(y!=null)return y.value}function V(y){return y==null?y:ke.InlineValueContext.create(y.frameId,Ke(y.stoppedLocation))}function re(y,j,le){return{context:ke.InlineCompletionContext.create(le.triggerKind,le.selectedCompletionInfo),textDocument:s(y),position:Ct(j)}}function ae(y){let j=ke.Command.create(y.title,y.command);return y.arguments&&(j.arguments=y.arguments),j}function Be(y){let j=ke.CodeLens.create(Ke(y.range));return y.command&&(j.command=ae(y.command)),y instanceof eA.default&&y.data&&(j.data=y.data),j}function We(y,j){let le={tabSize:y.tabSize,insertSpaces:y.insertSpaces};return j.trimTrailingWhitespace&&(le.trimTrailingWhitespace=!0),j.trimFinalNewlines&&(le.trimFinalNewlines=!0),j.insertFinalNewline&&(le.insertFinalNewline=!0),le}function Ze(y){return{textDocument:s(y)}}function ft(y){return{textDocument:s(y)}}function Pe(y){let j=ke.DocumentLink.create(Ke(y.range));y.target&&(j.target=i(y.target)),y.tooltip!==void 0&&(j.tooltip=y.tooltip);let le=y instanceof tA.default?y:void 0;return le&&le.data&&(j.data=le.data),j}function et(y){return{textDocument:s(y)}}function Ne(y){let j={name:y.name,kind:Bt(y.kind),uri:i(y.uri),range:Ke(y.range),selectionRange:Ke(y.selectionRange)};return y.detail!==void 0&&y.detail.length>0&&(j.detail=y.detail),y.tags!==void 0&&(j.tags=Kn(y.tags)),y instanceof nA.default&&y.data!==void 0&&(j.data=y.data),j}function at(y){let j={name:y.name,kind:Bt(y.kind),uri:i(y.uri),range:Ke(y.range),selectionRange:Ke(y.selectionRange)};return y.detail!==void 0&&y.detail.length>0&&(j.detail=y.detail),y.tags!==void 0&&(j.tags=Kn(y.tags)),y instanceof rA.default&&y.data!==void 0&&(j.data=y.data),j}function kt(y){let j=y instanceof iA.default?{name:y.name,kind:Bt(y.kind),location:y.hasRange?wn(y.location):{uri:n(y.location.uri)},data:y.data}:{name:y.name,kind:Bt(y.kind),location:wn(y.location)};return y.tags!==void 0&&(j.tags=Kn(y.tags)),y.containerName!==""&&(j.containerName=y.containerName),j}function nn(y){let j=typeof y.label=="string"?y.label:y.label.map(di),le=ke.InlayHint.create(Ct(y.position),j);return y.kind!==void 0&&(le.kind=y.kind),y.textEdits!==void 0&&(le.textEdits=rt(y.textEdits)),y.tooltip!==void 0&&(le.tooltip=fi(y.tooltip)),y.paddingLeft!==void 0&&(le.paddingLeft=y.paddingLeft),y.paddingRight!==void 0&&(le.paddingRight=y.paddingRight),y instanceof oA.default&&y.data!==void 0&&(le.data=y.data),le}function di(y){let j=ke.InlayHintLabelPart.create(y.value);return y.location!==void 0&&(j.location=wn(y.location)),y.command!==void 0&&(j.command=ae(y.command)),y.tooltip!==void 0&&(j.tooltip=fi(y.tooltip)),j}function fi(y){return typeof y=="string"?y:{kind:ke.MarkupKind.Markdown,value:y.value}}return{asUri:i,asTextDocumentIdentifier:s,asTextDocumentItem:c,asVersionedTextDocumentIdentifier:u,asOpenTextDocumentParams:l,asChangeTextDocumentParams:g,asCloseTextDocumentParams:C,asSaveTextDocumentParams:_,asWillSaveTextDocumentParams:T,asDidCreateFilesParams:L,asDidRenameFilesParams:F,asDidDeleteFilesParams:H,asWillCreateFilesParams:B,asWillRenameFilesParams:U,asWillDeleteFilesParams:ee,asTextDocumentPositionParams:oe,asCompletionParams:se,asSignatureHelpParams:yn,asWorkerPosition:Rt,asRange:Ke,asRanges:Rn,asPosition:Ct,asPositions:yr,asPositionsSync:Un,asLocation:wn,asDiagnosticSeverity:sn,asDiagnosticTag:Wn,asDiagnostic:Lr,asDiagnostics:Sn,asDiagnosticsSync:xn,asCompletionItem:Kt,asTextEdit:Pn,asSymbolKind:Bt,asSymbolTag:Vt,asSymbolTags:Kn,asReferenceParams:tn,asCodeAction:Mr,asCodeActionSync:Bn,asCodeActionContext:fn,asCodeActionContextSync:br,asInlineValueContext:V,asCommand:ae,asCodeLens:Be,asFormattingOptions:We,asDocumentSymbolParams:Ze,asCodeLensParams:ft,asDocumentLink:Pe,asDocumentLinkParams:et,asCallHierarchyItem:Ne,asTypeHierarchyItem:at,asInlayHint:nn,asWorkspaceSymbol:kt,asInlineCompletionParams:re}}Fu.createConverter=sA});var _T=K(Lu=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});Lu.createConverter=void 0;var ce=require("vscode"),De=xe(),Qr=cr(),it=Ou(),aA=eh(),cA=rh(),uA=sh(),lA=uh(),CT=fh(),dA=gh(),fA=yh(),pA=bh(),hA=Dh(),bT=xe(),Au;(function(t){function e(n){let i=n;return i&&Qr.string(i.language)&&Qr.string(i.value)}t.is=e})(Au||(Au={}));function gA(t,e,n){let s=t||(p=>ce.Uri.parse(p));function c(p){return s(p)}function u(p){let q=[];for(let Q of p)if(typeof Q=="string")q.push(Q);else if(bT.NotebookCellTextDocumentFilter.is(Q))if(typeof Q.notebook=="string")q.push({notebookType:Q.notebook,language:Q.language});else{let he=Q.notebook.notebookType??"*";q.push({notebookType:he,scheme:Q.notebook.scheme,pattern:Q.notebook.pattern,language:Q.language})}else bT.TextDocumentFilter.is(Q)&&q.push({language:Q.language,scheme:Q.scheme,pattern:Q.pattern});return q}async function l(p,q){return it.map(p,h,q)}function f(p){let q=new Array(p.length);for(let Q=0;Q<p.length;Q++)q[Q]=h(p[Q]);return q}function h(p){let q=new CT.ProtocolDiagnostic(T(p.range),p.message,F(p.severity),p.data);if(p.code!==void 0){if(typeof p.code=="string"||typeof p.code=="number")De.CodeDescription.is(p.codeDescription)?q.code={value:p.code,target:c(p.codeDescription.href)}:q.code=p.code;else if(CT.DiagnosticCode.is(p.code)){q.hasDiagnosticCode=!0;let Q=p.code;q.code={value:Q.value,target:c(Q.target)}}}return p.source&&(q.source=p.source),p.relatedInformation&&(q.relatedInformation=g(p.relatedInformation)),Array.isArray(p.tags)&&(q.tags=C(p.tags)),q}function g(p){let q=new Array(p.length);for(let Q=0;Q<p.length;Q++){let he=p[Q];q[Q]=new ce.DiagnosticRelatedInformation(sn(he.location),he.message)}return q}function C(p){if(!p)return;let q=[];for(let Q of p){let he=_(Q);he!==void 0&&q.push(he)}return q.length>0?q:void 0}function _(p){switch(p){case De.DiagnosticTag.Unnecessary:return ce.DiagnosticTag.Unnecessary;case De.DiagnosticTag.Deprecated:return ce.DiagnosticTag.Deprecated;default:return}}function S(p){return p?new ce.Position(p.line,p.character):void 0}function T(p){return p?new ce.Range(p.start.line,p.start.character,p.end.line,p.end.character):void 0}async function L(p,q){return it.map(p,Q=>new ce.Range(Q.start.line,Q.start.character,Q.end.line,Q.end.character),q)}function F(p){if(p==null)return ce.DiagnosticSeverity.Error;switch(p){case De.DiagnosticSeverity.Error:return ce.DiagnosticSeverity.Error;case De.DiagnosticSeverity.Warning:return ce.DiagnosticSeverity.Warning;case De.DiagnosticSeverity.Information:return ce.DiagnosticSeverity.Information;case De.DiagnosticSeverity.Hint:return ce.DiagnosticSeverity.Hint}return ce.DiagnosticSeverity.Error}function H(p){if(Qr.string(p))return U(p);if(Au.is(p))return U().appendCodeblock(p.value,p.language);if(Array.isArray(p)){let q=[];for(let Q of p){let he=U();Au.is(Q)?he.appendCodeblock(Q.value,Q.language):he.appendMarkdown(Q),q.push(he)}return q}else return U(p)}function B(p){if(Qr.string(p))return p;switch(p.kind){case De.MarkupKind.Markdown:return U(p.value);case De.MarkupKind.PlainText:return p.value;default:return`Unsupported Markup content received. Kind is: ${p.kind}`}}function U(p){let q;if(p===void 0||typeof p=="string")q=new ce.MarkdownString(p);else switch(p.kind){case De.MarkupKind.Markdown:q=new ce.MarkdownString(p.value);break;case De.MarkupKind.PlainText:q=new ce.MarkdownString,q.appendText(p.value);break;default:q=new ce.MarkdownString,q.appendText(`Unsupported Markup content received. Kind is: ${p.kind}`);break}return q.isTrusted=e,q.supportHtml=n,q}function ee(p){if(p)return new ce.Hover(H(p.contents),T(p.range))}async function oe(p,q,Q){if(!p)return;if(Array.isArray(p))return it.map(p,$r=>Lt($r,q),Q);let he=p,{defaultRange:Nt,commitCharacters:cn}=ye(he,q),ct=await it.map(he.items,$r=>Lt($r,cn,Nt,he.itemDefaults?.insertTextMode,he.itemDefaults?.insertTextFormat,he.itemDefaults?.data),Q);return new ce.CompletionList(ct,he.isIncomplete)}function ye(p,q){let Q=p.itemDefaults?.editRange,he=p.itemDefaults?.commitCharacters??q;return De.Range.is(Q)?{defaultRange:T(Q),commitCharacters:he}:Q!==void 0?{defaultRange:{inserting:T(Q.insert),replacing:T(Q.replace)},commitCharacters:he}:{defaultRange:void 0,commitCharacters:he}}function se(p){return De.CompletionItemKind.Text<=p&&p<=De.CompletionItemKind.TypeParameter?[p-1,void 0]:[ce.CompletionItemKind.Text,p]}function we(p){switch(p){case De.CompletionItemTag.Deprecated:return ce.CompletionItemTag.Deprecated}}function Ie(p){if(p==null)return[];let q=[];for(let Q of p){let he=we(Q);he!==void 0&&q.push(he)}return q}function Lt(p,q,Q,he,Nt,cn){let ct=Ie(p.tags),$r=Et(p),ht=new aA.default($r);p.detail&&(ht.detail=p.detail),p.documentation&&(ht.documentation=B(p.documentation),ht.documentationFormat=Qr.string(p.documentation)?"$string":p.documentation.kind),p.filterText&&(ht.filterText=p.filterText);let vo=Mt(p,Q,Nt);if(vo&&(ht.insertText=vo.text,ht.range=vo.range,ht.fromEdit=vo.fromEdit),Qr.number(p.kind)){let[ld,ic]=se(p.kind);ht.kind=ld,ic&&(ht.originalItemKind=ic)}p.sortText&&(ht.sortText=p.sortText),p.additionalTextEdits&&(ht.additionalTextEdits=Ct(p.additionalTextEdits));let zs=p.commitCharacters!==void 0?Qr.stringArray(p.commitCharacters)?p.commitCharacters:void 0:q;zs&&(ht.commitCharacters=zs.slice()),p.command&&(ht.command=rt(p.command)),(p.deprecated===!0||p.deprecated===!1)&&(ht.deprecated=p.deprecated,p.deprecated===!0&&ct.push(ce.CompletionItemTag.Deprecated)),(p.preselect===!0||p.preselect===!1)&&(ht.preselect=p.preselect);let rc=p.data??cn;rc!==void 0&&(ht.data=rc),ct.length>0&&(ht.tags=ct);let Ks=p.insertTextMode??he;return Ks!==void 0&&(ht.insertTextMode=Ks,Ks===De.InsertTextMode.asIs&&(ht.keepWhitespace=!0)),ht}function Et(p){return De.CompletionItemLabelDetails.is(p.labelDetails)?{label:p.label,detail:p.labelDetails.detail,description:p.labelDetails.description}:p.label}function Mt(p,q,Q){let he=p.insertTextFormat??Q;if(p.textEdit!==void 0||q!==void 0){let[Nt,cn]=p.textEdit!==void 0?tr(p.textEdit):[q,p.textEditText??p.label];return he===De.InsertTextFormat.Snippet?{text:new ce.SnippetString(cn),range:Nt,fromEdit:!0}:{text:cn,range:Nt,fromEdit:!0}}else return p.insertText?he===De.InsertTextFormat.Snippet?{text:new ce.SnippetString(p.insertText),fromEdit:!1}:{text:p.insertText,fromEdit:!1}:void 0}function tr(p){return De.InsertReplaceEdit.is(p)?[{inserting:T(p.insert),replacing:T(p.replace)},p.newText]:[T(p.range),p.newText]}function yn(p){if(p)return new ce.TextEdit(T(p.range),p.newText)}async function Rt(p,q){if(p)return it.map(p,yn,q)}function Ct(p){if(!p)return;let q=new Array(p.length);for(let Q=0;Q<p.length;Q++)q[Q]=yn(p[Q]);return q}async function yr(p,q){if(!p)return;let Q=new ce.SignatureHelp;return Qr.number(p.activeSignature)?Q.activeSignature=p.activeSignature:Q.activeSignature=0,Qr.number(p.activeParameter)?Q.activeParameter=p.activeParameter:Q.activeParameter=0,p.signatures&&(Q.signatures=await Un(p.signatures,q)),Q}async function Un(p,q){return it.mapAsync(p,Ke,q)}async function Ke(p,q){let Q=new ce.SignatureInformation(p.label);return p.documentation!==void 0&&(Q.documentation=B(p.documentation)),p.parameters!==void 0&&(Q.parameters=await Rn(p.parameters,q)),p.activeParameter!==void 0&&(Q.activeParameter=p.activeParameter),Q}function Rn(p,q){return it.map(p,wn,q)}function wn(p){let q=new ce.ParameterInformation(p.label);return p.documentation&&(q.documentation=B(p.documentation)),q}function sn(p){return p?new ce.Location(s(p.uri),T(p.range)):void 0}async function Hn(p,q){if(p)return jn(p,q)}async function Wn(p,q){if(p)return jn(p,q)}function Ar(p){if(!p)return;let q={targetUri:s(p.targetUri),targetRange:T(p.targetRange),originSelectionRange:T(p.originSelectionRange),targetSelectionRange:T(p.targetSelectionRange)};if(!q.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return q}async function jn(p,q){if(p)if(Qr.array(p)){if(p.length===0)return[];if(De.LocationLink.is(p[0])){let Q=p;return it.map(Q,Ar,q)}else{let Q=p;return it.map(Q,sn,q)}}else return De.LocationLink.is(p)?[Ar(p)]:sn(p)}async function nr(p,q){if(p)return it.map(p,sn,q)}async function Lr(p,q){if(p)return it.map(p,Sn,q)}function Sn(p){let q=new ce.DocumentHighlight(T(p.range));return Qr.number(p.kind)&&(q.kind=xn(p.kind)),q}function xn(p){switch(p){case De.DocumentHighlightKind.Text:return ce.DocumentHighlightKind.Text;case De.DocumentHighlightKind.Read:return ce.DocumentHighlightKind.Read;case De.DocumentHighlightKind.Write:return ce.DocumentHighlightKind.Write}return ce.DocumentHighlightKind.Text}async function wr(p,q){if(p)return it.map(p,Kt,q)}function st(p){return p<=De.SymbolKind.TypeParameter?p-1:ce.SymbolKind.Property}function zn(p){switch(p){case De.SymbolTag.Deprecated:return ce.SymbolTag.Deprecated;default:return}}function Cr(p){if(p==null)return;let q=[];for(let Q of p){let he=zn(Q);he!==void 0&&q.push(he)}return q.length===0?void 0:q}function Kt(p){let q=p.data,Q=p.location,he=Q.range===void 0||q!==void 0?new pA.default(p.name,st(p.kind),p.containerName??"",Q.range===void 0?s(Q.uri):new ce.Location(s(p.location.uri),T(Q.range)),q):new ce.SymbolInformation(p.name,st(p.kind),p.containerName??"",new ce.Location(s(p.location.uri),T(Q.range)));return Pn(he,p),he}async function ei(p,q){if(p!=null)return it.map(p,rr,q)}function rr(p){let q=new ce.DocumentSymbol(p.name,p.detail||"",st(p.kind),T(p.range),T(p.selectionRange));if(Pn(q,p),p.children!==void 0&&p.children.length>0){let Q=[];for(let he of p.children)Q.push(rr(he));q.children=Q}return q}function Pn(p,q){p.tags=Cr(q.tags),q.deprecated&&(p.tags?p.tags.includes(ce.SymbolTag.Deprecated)||(p.tags=p.tags.concat(ce.SymbolTag.Deprecated)):p.tags=[ce.SymbolTag.Deprecated])}function rt(p){let q={title:p.title,command:p.command};return p.arguments&&(q.arguments=p.arguments),q}async function Bt(p,q){if(p)return it.map(p,rt,q)}let Vt=new Map;Vt.set(De.CodeActionKind.Empty,ce.CodeActionKind.Empty),Vt.set(De.CodeActionKind.QuickFix,ce.CodeActionKind.QuickFix),Vt.set(De.CodeActionKind.Refactor,ce.CodeActionKind.Refactor),Vt.set(De.CodeActionKind.RefactorExtract,ce.CodeActionKind.RefactorExtract),Vt.set(De.CodeActionKind.RefactorInline,ce.CodeActionKind.RefactorInline),Vt.set(De.CodeActionKind.RefactorRewrite,ce.CodeActionKind.RefactorRewrite),Vt.set(De.CodeActionKind.Source,ce.CodeActionKind.Source),Vt.set(De.CodeActionKind.SourceOrganizeImports,ce.CodeActionKind.SourceOrganizeImports);function Kn(p){if(p==null)return;let q=Vt.get(p);if(q)return q;let Q=p.split(".");q=ce.CodeActionKind.Empty;for(let he of Q)q=q.append(he);return q}function tn(p){if(p!=null)return p.map(q=>Kn(q))}async function Mr(p,q){if(p==null)return;let Q=new lA.default(p.title,p.data);return p.kind!==void 0&&(Q.kind=Kn(p.kind)),p.diagnostics!==void 0&&(Q.diagnostics=f(p.diagnostics)),p.edit!==void 0&&(Q.edit=await an(p.edit,q)),p.command!==void 0&&(Q.command=rt(p.command)),p.isPreferred!==void 0&&(Q.isPreferred=p.isPreferred),p.disabled!==void 0&&(Q.disabled={reason:p.disabled.reason}),Q}function Bn(p,q){return it.mapAsync(p,async Q=>De.Command.is(Q)?rt(Q):Mr(Q,q),q)}function fn(p){if(!p)return;let q=new cA.default(T(p.range));return p.command&&(q.command=rt(p.command)),p.data!==void 0&&p.data!==null&&(q.data=p.data),q}async function br(p,q){if(p)return it.map(p,fn,q)}async function an(p,q){if(!p)return;let Q=new Map;if(p.changeAnnotations!==void 0){let cn=p.changeAnnotations;await it.forEach(Object.keys(cn),ct=>{let $r=E(cn[ct]);Q.set(ct,$r)},q)}let he=cn=>{if(cn!==void 0)return Q.get(cn)},Nt=new ce.WorkspaceEdit;if(p.documentChanges){let cn=p.documentChanges;await it.forEach(cn,ct=>{if(De.CreateFile.is(ct))Nt.createFile(s(ct.uri),ct.options,he(ct.annotationId));else if(De.RenameFile.is(ct))Nt.renameFile(s(ct.oldUri),s(ct.newUri),ct.options,he(ct.annotationId));else if(De.DeleteFile.is(ct))Nt.deleteFile(s(ct.uri),ct.options,he(ct.annotationId));else if(De.TextDocumentEdit.is(ct)){let $r=s(ct.textDocument.uri);for(let ht of ct.edits)De.AnnotatedTextEdit.is(ht)?Nt.replace($r,T(ht.range),ht.newText,he(ht.annotationId)):Nt.replace($r,T(ht.range),ht.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(ct,void 0,4)}`)},q)}else if(p.changes){let cn=p.changes;await it.forEach(Object.keys(cn),ct=>{Nt.set(s(ct),Ct(cn[ct]))},q)}return Nt}function E(p){if(p!==void 0)return{label:p.label,needsConfirmation:!!p.needsConfirmation,description:p.description}}function V(p){let q=T(p.range),Q=p.target?c(p.target):void 0,he=new uA.default(q,Q);return p.tooltip!==void 0&&(he.tooltip=p.tooltip),p.data!==void 0&&p.data!==null&&(he.data=p.data),he}async function re(p,q){if(p)return it.map(p,V,q)}function ae(p){return new ce.Color(p.red,p.green,p.blue,p.alpha)}function Be(p){return new ce.ColorInformation(T(p.range),ae(p.color))}async function We(p,q){if(p)return it.map(p,Be,q)}function Ze(p){let q=new ce.ColorPresentation(p.label);return q.additionalTextEdits=Ct(p.additionalTextEdits),p.textEdit&&(q.textEdit=yn(p.textEdit)),q}async function ft(p,q){if(p)return it.map(p,Ze,q)}function Pe(p){if(p)switch(p){case De.FoldingRangeKind.Comment:return ce.FoldingRangeKind.Comment;case De.FoldingRangeKind.Imports:return ce.FoldingRangeKind.Imports;case De.FoldingRangeKind.Region:return ce.FoldingRangeKind.Region}}function et(p){return new ce.FoldingRange(p.startLine,p.endLine,Pe(p.kind))}async function Ne(p,q){if(p)return it.map(p,et,q)}function at(p){return new ce.SelectionRange(T(p.range),p.parent?at(p.parent):void 0)}async function kt(p,q){return Array.isArray(p)?it.map(p,at,q):[]}function nn(p){return De.InlineValueText.is(p)?new ce.InlineValueText(T(p.range),p.text):De.InlineValueVariableLookup.is(p)?new ce.InlineValueVariableLookup(T(p.range),p.variableName,p.caseSensitiveLookup):new ce.InlineValueEvaluatableExpression(T(p.range),p.expression)}async function di(p,q){return Array.isArray(p)?it.map(p,nn,q):[]}async function fi(p,q){let Q=typeof p.label=="string"?p.label:await it.map(p.label,y,q),he=new hA.default(S(p.position),Q);return p.kind!==void 0&&(he.kind=p.kind),p.textEdits!==void 0&&(he.textEdits=await Rt(p.textEdits,q)),p.tooltip!==void 0&&(he.tooltip=j(p.tooltip)),p.paddingLeft!==void 0&&(he.paddingLeft=p.paddingLeft),p.paddingRight!==void 0&&(he.paddingRight=p.paddingRight),p.data!==void 0&&(he.data=p.data),he}function y(p){let q=new ce.InlayHintLabelPart(p.value);return p.location!==void 0&&(q.location=sn(p.location)),p.tooltip!==void 0&&(q.tooltip=j(p.tooltip)),p.command!==void 0&&(q.command=rt(p.command)),q}function j(p){return typeof p=="string"?p:U(p)}async function le(p,q){if(Array.isArray(p))return it.mapAsync(p,fi,q)}function tt(p){if(p===null)return;let q=new dA.default(st(p.kind),p.name,p.detail||"",c(p.uri),T(p.range),T(p.selectionRange),p.data);return p.tags!==void 0&&(q.tags=Cr(p.tags)),q}async function A(p,q){if(p!==null)return it.map(p,tt,q)}async function w(p,q){return new ce.CallHierarchyIncomingCall(tt(p.from),await L(p.fromRanges,q))}async function k(p,q){if(p!==null)return it.mapAsync(p,w,q)}async function I(p,q){return new ce.CallHierarchyOutgoingCall(tt(p.to),await L(p.fromRanges,q))}async function R(p,q){if(p!==null)return it.mapAsync(p,I,q)}async function v(p,q){if(p!=null)return new ce.SemanticTokens(new Uint32Array(p.data),p.resultId)}function $(p){return new ce.SemanticTokensEdit(p.start,p.deleteCount,p.data!==void 0?new Uint32Array(p.data):void 0)}async function J(p,q){if(p!=null)return new ce.SemanticTokensEdits(p.edits.map($),p.resultId)}function Re(p){return p}async function bt(p,q){if(p!=null)return new ce.LinkedEditingRanges(await L(p.ranges,q),pt(p.wordPattern))}function pt(p){if(p!=null)return new RegExp(p)}function Cn(p){if(p===null)return;let q=new fA.default(st(p.kind),p.name,p.detail||"",c(p.uri),T(p.range),T(p.selectionRange),p.data);return p.tags!==void 0&&(q.tags=Cr(p.tags)),q}async function Vn(p,q){if(p!==null)return it.map(p,Cn,q)}function _r(p){if(Qr.string(p))return p;if(De.RelativePattern.is(p)){if(De.URI.is(p.baseUri))return new ce.RelativePattern(c(p.baseUri),p.pattern);if(De.WorkspaceFolder.is(p.baseUri)){let q=ce.workspace.getWorkspaceFolder(c(p.baseUri.uri));return q!==void 0?new ce.RelativePattern(q,p.pattern):void 0}}}async function $e(p,q){if(!p)return;if(Array.isArray(p))return it.map(p,Nt=>Nr(Nt),q);let Q=p,he=await it.map(Q.items,Nt=>Nr(Nt),q);return new ce.InlineCompletionList(he)}function Nr(p){let q;typeof p.insertText=="string"?q=p.insertText:q=new ce.SnippetString(p.insertText.value);let Q;p.command&&(Q=rt(p.command));let he=new ce.InlineCompletionItem(q,T(p.range),Q);return p.filterText&&(he.filterText=p.filterText),he}return{asUri:c,asDocumentSelector:u,asDiagnostics:l,asDiagnostic:h,asRange:T,asRanges:L,asPosition:S,asDiagnosticSeverity:F,asDiagnosticTag:_,asHover:ee,asCompletionResult:oe,asCompletionItem:Lt,asTextEdit:yn,asTextEdits:Rt,asSignatureHelp:yr,asSignatureInformations:Un,asSignatureInformation:Ke,asParameterInformations:Rn,asParameterInformation:wn,asDeclarationResult:Hn,asDefinitionResult:Wn,asLocation:sn,asReferences:nr,asDocumentHighlights:Lr,asDocumentHighlight:Sn,asDocumentHighlightKind:xn,asSymbolKind:st,asSymbolTag:zn,asSymbolTags:Cr,asSymbolInformations:wr,asSymbolInformation:Kt,asDocumentSymbols:ei,asDocumentSymbol:rr,asCommand:rt,asCommands:Bt,asCodeAction:Mr,asCodeActionKind:Kn,asCodeActionKinds:tn,asCodeActionResult:Bn,asCodeLens:fn,asCodeLenses:br,asWorkspaceEdit:an,asDocumentLink:V,asDocumentLinks:re,asFoldingRangeKind:Pe,asFoldingRange:et,asFoldingRanges:Ne,asColor:ae,asColorInformation:Be,asColorInformations:We,asColorPresentation:Ze,asColorPresentations:ft,asSelectionRange:at,asSelectionRanges:kt,asInlineValue:nn,asInlineValues:di,asInlayHint:fi,asInlayHints:le,asSemanticTokensLegend:Re,asSemanticTokens:v,asSemanticTokensEdit:$,asSemanticTokensEdits:J,asCallHierarchyItem:tt,asCallHierarchyItems:A,asCallHierarchyIncomingCall:w,asCallHierarchyIncomingCalls:k,asCallHierarchyOutgoingCall:I,asCallHierarchyOutgoingCalls:R,asLinkedEditingRanges:bt,asTypeHierarchyItem:Cn,asTypeHierarchyItems:Vn,asGlobPattern:_r,asInlineCompletionResult:$e,asInlineCompletionItem:Nr}}Lu.createConverter=gA});var qt=K(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.generateUuid=Jr.parse=Jr.isUUID=Jr.v4=Jr.empty=void 0;var ya=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},wa=class t extends ya{static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return t._oneOf(t._chars)}constructor(){super([t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-","4",t._randomHex(),t._randomHex(),t._randomHex(),"-",t._oneOf(t._timeHighBits),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex()].join(""))}};wa._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];wa._timeHighBits=["8","9","a","b"];Jr.empty=new ya("00000000-0000-0000-0000-000000000000");function TT(){return new wa}Jr.v4=TT;var mA=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function DT(t){return mA.test(t)}Jr.isUUID=DT;function vA(t){if(!DT(t))throw new Error("invalid uuid");return new ya(t)}Jr.parse=vA;function yA(){return TT().asHex()}Jr.generateUuid=yA});var xh=K(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});Mu.ProgressPart=void 0;var RT=require("vscode"),ST=xe(),xT=cr(),Sh=class{constructor(e,n,i){this._client=e,this._token=n,this._reported=0,this._infinite=!1,this._lspProgressDisposable=this._client.onProgress(ST.WorkDoneProgress.type,this._token,s=>{switch(s.kind){case"begin":this.begin(s);break;case"report":this.report(s);break;case"end":this.done(),i&&i(this);break}})}begin(e){this._infinite=e.percentage===void 0,this._lspProgressDisposable!==void 0&&RT.window.withProgress({location:RT.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},async(n,i)=>{if(this._lspProgressDisposable!==void 0)return this._progress=n,this._cancellationToken=i,this._tokenDisposable=this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(ST.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((s,c)=>{this._resolve=s,this._reject=c})})}report(e){if(this._infinite&&xT.string(e.message))this._progress!==void 0&&this._progress.report({message:e.message});else if(xT.number(e.percentage)){let n=Math.max(0,Math.min(e.percentage,100)),i=Math.max(0,n-this._reported);this._reported+=i,this._progress!==void 0&&this._progress.report({message:e.message,increment:i})}}cancel(){this.cleanup(),this._reject!==void 0&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this.cleanup(),this._resolve!==void 0&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}cleanup(){this._lspProgressDisposable!==void 0&&(this._lspProgressDisposable.dispose(),this._lspProgressDisposable=void 0),this._tokenDisposable!==void 0&&(this._tokenDisposable.dispose(),this._tokenDisposable=void 0),this._progress=void 0,this._cancellationToken=void 0}};Mu.ProgressPart=Sh});var nt=K(mn=>{"use strict";Object.defineProperty(mn,"__esModule",{value:!0});mn.WorkspaceFeature=mn.TextDocumentLanguageFeature=mn.TextDocumentEventFeature=mn.DynamicDocumentFeature=mn.DynamicFeature=mn.StaticFeature=mn.ensure=mn.LSPCancellationError=void 0;var qo=require("vscode"),Ph=xe(),Jn=cr(),PT=qt(),Eh=class extends qo.CancellationError{constructor(e){super(),this.data=e}};mn.LSPCancellationError=Eh;function wA(t,e){return t[e]===void 0&&(t[e]={}),t[e]}mn.ensure=wA;var ET;(function(t){function e(n){let i=n;return i!=null&&Jn.func(i.fillClientCapabilities)&&Jn.func(i.initialize)&&Jn.func(i.getState)&&Jn.func(i.clear)&&(i.fillInitializeParams===void 0||Jn.func(i.fillInitializeParams))}t.is=e})(ET||(mn.StaticFeature=ET={}));var kT;(function(t){function e(n){let i=n;return i!=null&&Jn.func(i.fillClientCapabilities)&&Jn.func(i.initialize)&&Jn.func(i.getState)&&Jn.func(i.clear)&&(i.fillInitializeParams===void 0||Jn.func(i.fillInitializeParams))&&Jn.func(i.register)&&Jn.func(i.unregister)&&i.registrationType!==void 0}t.is=e})(kT||(mn.DynamicFeature=kT={}));var Ca=class{constructor(e){this._client=e}getState(){let e=this.getDocumentSelectors(),n=0;for(let s of e){n++;for(let c of qo.workspace.textDocuments)if(qo.languages.match(s,c)>0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}let i=n>0;return{kind:"document",id:this.registrationType.method,registrations:i,matches:!1}}};mn.DynamicDocumentFeature=Ca;var kh=class extends Ca{static textDocumentFilter(e,n){for(let i of e)if(qo.languages.match(i,n)>0)return!0;return!1}constructor(e,n,i,s,c,u,l){super(e),this._event=n,this._type=i,this._middleware=s,this._createParams=c,this._textDocument=u,this._selectorFilter=l,this._selectors=new Map,this._onNotificationSent=new qo.EventEmitter}getStateInfo(){return[this._selectors.values(),!1]}getDocumentSelectors(){return this._selectors.values()}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=this._event(n=>{this.callback(n).catch(i=>{this._client.error(`Sending document notification ${this._type.method} failed.`,i)})})),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}async callback(e){let n=async i=>{let s=this._createParams(i);await this._client.sendNotification(this._type,s),this.notificationSent(this.getTextDocument(i),this._type,s)};if(this.matches(e)){let i=this._middleware();return i?i(e,s=>n(s)):n(e)}}matches(e){return this._client.hasDedicatedTextSynchronizationFeature(this._textDocument(e))?!1:!this._selectorFilter||this._selectorFilter(this._selectors.values(),e)}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,n,i){this._onNotificationSent.fire({textDocument:e,type:n,params:i})}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}clear(){this._selectors.clear(),this._onNotificationSent.dispose(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(let n of this._selectors.values())if(qo.languages.match(n,e)>0)return{send:i=>this.callback(i)}}};mn.TextDocumentEventFeature=kh;var Ih=class extends Ca{constructor(e,n){super(e),this._registrationType=n,this._registrations=new Map}*getDocumentSelectors(){for(let e of this._registrations.values()){let n=e.data.registerOptions.documentSelector;n!==null&&(yield this._client.protocol2CodeConverter.asDocumentSelector(n))}}get registrationType(){return this._registrationType}register(e){if(!e.registerOptions.documentSelector)return;let n=this.registerLanguageProvider(e.registerOptions,e.id);this._registrations.set(e.id,{disposable:n[0],data:e,provider:n[1]})}unregister(e){let n=this._registrations.get(e);n!==void 0&&n.disposable.dispose()}clear(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getRegistration(e,n){if(n){if(Ph.TextDocumentRegistrationOptions.is(n)){let i=Ph.StaticRegistrationOptions.hasId(n)?n.id:PT.generateUuid(),s=n.documentSelector??e;if(s)return[i,Object.assign({},n,{documentSelector:s})]}else if(Jn.boolean(n)&&n===!0||Ph.WorkDoneProgressOptions.is(n)){if(!e)return[void 0,void 0];let i=Jn.boolean(n)&&n===!0?{documentSelector:e}:Object.assign({},n,{documentSelector:e});return[PT.generateUuid(),i]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(e,n){if(!(!e||!n))return Jn.boolean(n)&&n===!0?{documentSelector:e}:Object.assign({},n,{documentSelector:e})}getProvider(e){for(let n of this._registrations.values()){let i=n.data.registerOptions.documentSelector;if(i!==null&&qo.languages.match(this._client.protocol2CodeConverter.asDocumentSelector(i),e)>0)return n.provider}}getAllProviders(){let e=[];for(let n of this._registrations.values())e.push(n.provider);return e}};mn.TextDocumentLanguageFeature=Ih;var Oh=class{constructor(e,n){this._client=e,this._registrationType=n,this._registrations=new Map}getState(){let e=this._registrations.size>0;return{kind:"workspace",id:this._registrationType.method,registrations:e}}get registrationType(){return this._registrationType}register(e){let n=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:n[0],provider:n[1]})}unregister(e){let n=this._registrations.get(e);n!==void 0&&n.disposable.dispose()}clear(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getProviders(){let e=[];for(let n of this._registrations.values())e.push(n.provider);return e}};mn.WorkspaceFeature=Oh});var OT=K(($$,IT)=>{var CA=typeof process=="object"&&process&&process.platform==="win32";IT.exports=CA?{sep:"\\"}:{sep:"/"}});var MT=K((U$,LT)=>{"use strict";LT.exports=FT;function FT(t,e,n){t instanceof RegExp&&(t=qT(t,n)),e instanceof RegExp&&(e=qT(e,n));var i=AT(t,e,n);return i&&{start:i[0],end:i[1],pre:n.slice(0,i[0]),body:n.slice(i[0]+t.length,i[1]),post:n.slice(i[1]+e.length)}}function qT(t,e){var n=e.match(t);return n?n[0]:null}FT.range=AT;function AT(t,e,n){var i,s,c,u,l,f=n.indexOf(t),h=n.indexOf(e,f+1),g=f;if(f>=0&&h>0){if(t===e)return[f,h];for(i=[],c=n.length;g>=0&&!l;)g==f?(i.push(g),f=n.indexOf(t,g+1)):i.length==1?l=[i.pop(),h]:(s=i.pop(),s<c&&(c=s,u=h),h=n.indexOf(e,g+1)),g=f<h&&f>=0?f:h;i.length&&(l=[c,u])}return l}});var KT=K((H$,zT)=>{var NT=MT();zT.exports=TA;var $T="\0SLASH"+Math.random()+"\0",UT="\0OPEN"+Math.random()+"\0",Fh="\0CLOSE"+Math.random()+"\0",HT="\0COMMA"+Math.random()+"\0",WT="\0PERIOD"+Math.random()+"\0";function qh(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function bA(t){return t.split("\\\\").join($T).split("\\{").join(UT).split("\\}").join(Fh).split("\\,").join(HT).split("\\.").join(WT)}function _A(t){return t.split($T).join("\\").split(UT).join("{").split(Fh).join("}").split(HT).join(",").split(WT).join(".")}function jT(t){if(!t)return[""];var e=[],n=NT("{","}",t);if(!n)return t.split(",");var i=n.pre,s=n.body,c=n.post,u=i.split(",");u[u.length-1]+="{"+s+"}";var l=jT(c);return c.length&&(u[u.length-1]+=l.shift(),u.push.apply(u,l)),e.push.apply(e,u),e}function TA(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),ba(bA(t),!0).map(_A)):[]}function DA(t){return"{"+t+"}"}function RA(t){return/^-?0\d/.test(t)}function SA(t,e){return t<=e}function xA(t,e){return t>=e}function ba(t,e){var n=[],i=NT("{","}",t);if(!i)return[t];var s=i.pre,c=i.post.length?ba(i.post,!1):[""];if(/\$$/.test(i.pre))for(var u=0;u<c.length;u++){var l=s+"{"+i.body+"}"+c[u];n.push(l)}else{var f=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(i.body),h=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(i.body),g=f||h,C=i.body.indexOf(",")>=0;if(!g&&!C)return i.post.match(/,(?!,).*\}/)?(t=i.pre+"{"+i.body+Fh+i.post,ba(t)):[t];var _;if(g)_=i.body.split(/\.\./);else if(_=jT(i.body),_.length===1&&(_=ba(_[0],!1).map(DA),_.length===1))return c.map(function(Lt){return i.pre+_[0]+Lt});var S;if(g){var T=qh(_[0]),L=qh(_[1]),F=Math.max(_[0].length,_[1].length),H=_.length==3?Math.abs(qh(_[2])):1,B=SA,U=L<T;U&&(H*=-1,B=xA);var ee=_.some(RA);S=[];for(var oe=T;B(oe,L);oe+=H){var ye;if(h)ye=String.fromCharCode(oe),ye==="\\"&&(ye="");else if(ye=String(oe),ee){var se=F-ye.length;if(se>0){var we=new Array(se+1).join("0");oe<0?ye="-"+we+ye.slice(1):ye=we+ye}}S.push(ye)}}else{S=[];for(var Ie=0;Ie<_.length;Ie++)S.push.apply(S,ba(_[Ie],!1))}for(var Ie=0;Ie<S.length;Ie++)for(var u=0;u<c.length;u++){var l=s+S[Ie]+c[u];(!e||g||l)&&n.push(l)}}return n}});var $u=K((j$,$h)=>{var Ir=$h.exports=(t,e,n={})=>(Nu(e),!n.nocomment&&e.charAt(0)==="#"?!1:new Rs(e,n).match(t));$h.exports=Ir;var Mh=OT();Ir.sep=Mh.sep;var ai=Symbol("globstar **");Ir.GLOBSTAR=ai;var PA=KT(),BT={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Nh="[^/]",Ah=Nh+"*?",EA="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",kA="(?:(?!(?:\\/|^)\\.).)*?",XT=t=>t.split("").reduce((e,n)=>(e[n]=!0,e),{}),VT=XT("().*{}+?[]^$\\!"),IA=XT("[.("),GT=/\/+/;Ir.filter=(t,e={})=>(n,i,s)=>Ir(n,t,e);var ao=(t,e={})=>{let n={};return Object.keys(t).forEach(i=>n[i]=t[i]),Object.keys(e).forEach(i=>n[i]=e[i]),n};Ir.defaults=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return Ir;let e=Ir,n=(i,s,c)=>e(i,s,ao(t,c));return n.Minimatch=class extends e.Minimatch{constructor(s,c){super(s,ao(t,c))}},n.Minimatch.defaults=i=>e.defaults(ao(t,i)).Minimatch,n.filter=(i,s)=>e.filter(i,ao(t,s)),n.defaults=i=>e.defaults(ao(t,i)),n.makeRe=(i,s)=>e.makeRe(i,ao(t,s)),n.braceExpand=(i,s)=>e.braceExpand(i,ao(t,s)),n.match=(i,s,c)=>e.match(i,s,ao(t,c)),n};Ir.braceExpand=(t,e)=>QT(t,e);var QT=(t,e={})=>(Nu(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:PA(t)),OA=1024*64,Nu=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>OA)throw new TypeError("pattern is too long")},Lh=Symbol("subparse");Ir.makeRe=(t,e)=>new Rs(t,e||{}).makeRe();Ir.match=(t,e,n={})=>{let i=new Rs(e,n);return t=t.filter(s=>i.match(s)),i.options.nonull&&!t.length&&t.push(e),t};var qA=t=>t.replace(/\\(.)/g,"$1"),FA=t=>t.replace(/\\([^-\]])/g,"$1"),AA=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),LA=t=>t.replace(/[[\]\\]/g,"\\$&"),Rs=class{constructor(e,n){Nu(e),n||(n={}),this.options=n,this.set=[],this.pattern=e,this.windowsPathsNoEscape=!!n.windowsPathsNoEscape||n.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!n.partial,this.make()}debug(){}make(){let e=this.pattern,n=this.options;if(!n.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();let i=this.globSet=this.braceExpand();n.debug&&(this.debug=(...s)=>console.error(...s)),this.debug(this.pattern,i),i=this.globParts=i.map(s=>s.split(GT)),this.debug(this.pattern,i),i=i.map((s,c,u)=>s.map(this.parse,this)),this.debug(this.pattern,i),i=i.filter(s=>s.indexOf(!1)===-1),this.debug(this.pattern,i),this.set=i}parseNegate(){if(this.options.nonegate)return;let e=this.pattern,n=!1,i=0;for(let s=0;s<e.length&&e.charAt(s)==="!";s++)n=!n,i++;i&&(this.pattern=e.slice(i)),this.negate=n}matchOne(e,n,i){var s=this.options;this.debug("matchOne",{this:this,file:e,pattern:n}),this.debug("matchOne",e.length,n.length);for(var c=0,u=0,l=e.length,f=n.length;c<l&&u<f;c++,u++){this.debug("matchOne loop");var h=n[u],g=e[c];if(this.debug(n,h,g),h===!1)return!1;if(h===ai){this.debug("GLOBSTAR",[n,h,g]);var C=c,_=u+1;if(_===f){for(this.debug("** at the end");c<l;c++)if(e[c]==="."||e[c]===".."||!s.dot&&e[c].charAt(0)===".")return!1;return!0}for(;C<l;){var S=e[C];if(this.debug(`
globstar while`,e,C,n,_,S),this.matchOne(e.slice(C),n.slice(_),i))return this.debug("globstar found match!",C,l,S),!0;if(S==="."||S===".."||!s.dot&&S.charAt(0)==="."){this.debug("dot detected!",e,C,n,_);break}this.debug("globstar swallow a segment, and continue"),C++}return!!(i&&(this.debug(`
>>> no match, partial?`,e,C,n,_),C===l))}var T;if(typeof h=="string"?(T=g===h,this.debug("string match",h,g,T)):(T=g.match(h),this.debug("pattern match",h,g,T)),!T)return!1}if(c===l&&u===f)return!0;if(c===l)return i;if(u===f)return c===l-1&&e[c]==="";throw new Error("wtf?")}braceExpand(){return QT(this.pattern,this.options)}parse(e,n){Nu(e);let i=this.options;if(e==="**")if(i.noglobstar)e="*";else return ai;if(e==="")return"";let s="",c=!1,u=!1,l=[],f=[],h,g=!1,C=-1,_=-1,S,T,L,F=e.charAt(0)===".",H=i.dot||F,B=()=>F?"":H?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",U=se=>se.charAt(0)==="."?"":i.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",ee=()=>{if(h){switch(h){case"*":s+=Ah,c=!0;break;case"?":s+=Nh,c=!0;break;default:s+="\\"+h;break}this.debug("clearStateChar %j %j",h,s),h=!1}};for(let se=0,we;se<e.length&&(we=e.charAt(se));se++){if(this.debug("%s	%s %s %j",e,se,s,we),u){if(we==="/")return!1;VT[we]&&(s+="\\"),s+=we,u=!1;continue}switch(we){case"/":return!1;case"\\":if(g&&e.charAt(se+1)==="-"){s+=we;continue}ee(),u=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,se,s,we),g){this.debug("  in class"),we==="!"&&se===_+1&&(we="^"),s+=we;continue}this.debug("call clearStateChar %j",h),ee(),h=we,i.noext&&ee();continue;case"(":{if(g){s+="(";continue}if(!h){s+="\\(";continue}let Ie={type:h,start:se-1,reStart:s.length,open:BT[h].open,close:BT[h].close};this.debug(this.pattern,"	",Ie),l.push(Ie),s+=Ie.open,Ie.start===0&&Ie.type!=="!"&&(F=!0,s+=U(e.slice(se+1))),this.debug("plType %j %j",h,s),h=!1;continue}case")":{let Ie=l[l.length-1];if(g||!Ie){s+="\\)";continue}l.pop(),ee(),c=!0,T=Ie,s+=T.close,T.type==="!"&&f.push(Object.assign(T,{reEnd:s.length}));continue}case"|":{let Ie=l[l.length-1];if(g||!Ie){s+="\\|";continue}ee(),s+="|",Ie.start===0&&Ie.type!=="!"&&(F=!0,s+=U(e.slice(se+1)));continue}case"[":if(ee(),g){s+="\\"+we;continue}g=!0,_=se,C=s.length,s+=we;continue;case"]":if(se===_+1||!g){s+="\\"+we;continue}S=e.substring(_+1,se);try{RegExp("["+LA(FA(S))+"]"),s+=we}catch{s=s.substring(0,C)+"(?:$.)"}c=!0,g=!1;continue;default:ee(),VT[we]&&!(we==="^"&&g)&&(s+="\\"),s+=we;break}}for(g&&(S=e.slice(_+1),L=this.parse(S,Lh),s=s.substring(0,C)+"\\["+L[0],c=c||L[1]),T=l.pop();T;T=l.pop()){let se;se=s.slice(T.reStart+T.open.length),this.debug("setting tail",s,T),se=se.replace(/((?:\\{2}){0,64})(\\?)\|/g,(Ie,Lt,Et)=>(Et||(Et="\\"),Lt+Lt+Et+"|")),this.debug(`tail=%j
   %s`,se,se,T,s);let we=T.type==="*"?Ah:T.type==="?"?Nh:"\\"+T.type;c=!0,s=s.slice(0,T.reStart)+we+"\\("+se}ee(),u&&(s+="\\\\");let oe=IA[s.charAt(0)];for(let se=f.length-1;se>-1;se--){let we=f[se],Ie=s.slice(0,we.reStart),Lt=s.slice(we.reStart,we.reEnd-8),Et=s.slice(we.reEnd),Mt=s.slice(we.reEnd-8,we.reEnd)+Et,tr=Ie.split(")").length,yn=Ie.split("(").length-tr,Rt=Et;for(let yr=0;yr<yn;yr++)Rt=Rt.replace(/\)[+*?]?/,"");Et=Rt;let Ct=Et===""&&n!==Lh?"(?:$|\\/)":"";s=Ie+Lt+Et+Ct+Mt}if(s!==""&&c&&(s="(?=.)"+s),oe&&(s=B()+s),n===Lh)return[s,c];if(i.nocase&&!c&&(c=e.toUpperCase()!==e.toLowerCase()),!c)return qA(e);let ye=i.nocase?"i":"";try{return Object.assign(new RegExp("^"+s+"$",ye),{_glob:e,_src:s})}catch{return new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let n=this.options,i=n.noglobstar?Ah:n.dot?EA:kA,s=n.nocase?"i":"",c=e.map(u=>(u=u.map(l=>typeof l=="string"?AA(l):l===ai?ai:l._src).reduce((l,f)=>(l[l.length-1]===ai&&f===ai||l.push(f),l),[]),u.forEach((l,f)=>{l!==ai||u[f-1]===ai||(f===0?u.length>1?u[f+1]="(?:\\/|"+i+"\\/)?"+u[f+1]:u[f]=i:f===u.length-1?u[f-1]+="(?:\\/|"+i+")?":(u[f-1]+="(?:\\/|\\/"+i+"\\/)"+u[f+1],u[f+1]=ai))}),u.filter(l=>l!==ai).join("/"))).join("|");c="^(?:"+c+")$",this.negate&&(c="^(?!"+c+").*$");try{this.regexp=new RegExp(c,s)}catch{this.regexp=!1}return this.regexp}match(e,n=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&n)return!0;let i=this.options;Mh.sep!=="/"&&(e=e.split(Mh.sep).join("/")),e=e.split(GT),this.debug(this.pattern,"split",e);let s=this.set;this.debug(this.pattern,"set",s);let c;for(let u=e.length-1;u>=0&&(c=e[u],!c);u--);for(let u=0;u<s.length;u++){let l=s[u],f=e;if(i.matchBase&&l.length===1&&(f=[c]),this.matchOne(f,l,n))return i.flipNegate?!0:!this.negate}return i.flipNegate?!1:this.negate}static defaults(e){return Ir.defaults(e).Minimatch}};Ir.Minimatch=Rs});var Vh=K(co=>{"use strict";Object.defineProperty(co,"__esModule",{value:!0});co.DiagnosticFeature=co.DiagnosticPullMode=co.vsdiag=void 0;var MA=$u(),Xe=require("vscode"),Jt=xe(),NA=qt(),Uh=nt();function Uu(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Yr;(function(t){let e;(function(n){n.full="full",n.unChanged="unChanged"})(e=t.DocumentDiagnosticReportKind||(t.DocumentDiagnosticReportKind={}))})(Yr||(co.vsdiag=Yr={}));var Hu;(function(t){t.onType="onType",t.onSave="onSave"})(Hu||(co.DiagnosticPullMode=Hu={}));var An;(function(t){t.active="open",t.reschedule="reschedule",t.outDated="drop"})(An||(An={}));var Hh=class t{constructor(){this.open=new Set,this._onOpen=new Xe.EventEmitter,this._onClose=new Xe.EventEmitter,t.fillTabResources(this.open);let e=n=>{if(n.closed.length===0&&n.opened.length===0)return;let i=this.open,s=new Set;t.fillTabResources(s);let c=new Set,u=new Set(s);for(let l of i.values())s.has(l)?u.delete(l):c.add(l);if(this.open=s,c.size>0){let l=new Set;for(let f of c)l.add(Xe.Uri.parse(f));this._onClose.fire(l)}if(u.size>0){let l=new Set;for(let f of u)l.add(Xe.Uri.parse(f));this._onOpen.fire(l)}};Xe.window.tabGroups.onDidChangeTabs!==void 0?this.disposable=Xe.window.tabGroups.onDidChangeTabs(e):this.disposable={dispose:()=>{}}}get onClose(){return this._onClose.event}get onOpen(){return this._onOpen.event}dispose(){this.disposable.dispose()}isActive(e){return e instanceof Xe.Uri?Xe.window.activeTextEditor?.document.uri===e:Xe.window.activeTextEditor?.document===e}isVisible(e){let n=e instanceof Xe.Uri?e:e.uri;return this.open.has(n.toString())}getTabResources(){let e=new Set;return t.fillTabResources(new Set,e),e}static fillTabResources(e,n){let i=e??new Set;for(let s of Xe.window.tabGroups.all)for(let c of s.tabs){let u=c.input,l;u instanceof Xe.TabInputText?l=u.uri:u instanceof Xe.TabInputTextDiff?l=u.modified:u instanceof Xe.TabInputCustom&&(l=u.uri),l!==void 0&&!i.has(l.toString())&&(i.add(l.toString()),n!==void 0&&n.add(l))}}},dn;(function(t){t[t.document=1]="document",t[t.workspace=2]="workspace"})(dn||(dn={}));var Li;(function(t){function e(n){return n instanceof Xe.Uri?n.toString():n.uri.toString()}t.asKey=e})(Li||(Li={}));var Wh=class{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(e,n,i){let s=e===dn.document?this.documentPullStates:this.workspacePullStates,[c,u,l]=n instanceof Xe.Uri?[n.toString(),n,i]:[n.uri.toString(),n.uri,n.version],f=s.get(c);return f===void 0&&(f={document:u,pulledVersion:l,resultId:void 0},s.set(c,f)),f}update(e,n,i,s){let c=e===dn.document?this.documentPullStates:this.workspacePullStates,[u,l,f,h]=n instanceof Xe.Uri?[n.toString(),n,i,s]:[n.uri.toString(),n.uri,n.version,i],g=c.get(u);g===void 0?(g={document:l,pulledVersion:f,resultId:h},c.set(u,g)):(g.pulledVersion=f,g.resultId=h)}unTrack(e,n){let i=Li.asKey(n);(e===dn.document?this.documentPullStates:this.workspacePullStates).delete(i)}tracks(e,n){let i=Li.asKey(n);return(e===dn.document?this.documentPullStates:this.workspacePullStates).has(i)}getResultId(e,n){let i=Li.asKey(n);return(e===dn.document?this.documentPullStates:this.workspacePullStates).get(i)?.resultId}getAllResultIds(){let e=[];for(let[n,i]of this.workspacePullStates)this.documentPullStates.has(n)&&(i=this.documentPullStates.get(n)),i.resultId!==void 0&&e.push({uri:n,value:i.resultId});return e}},jh=class{constructor(e,n,i){this.client=e,this.tabs=n,this.options=i,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new Xe.EventEmitter,this.provider=this.createProvider(),this.diagnostics=Xe.languages.createDiagnosticCollection(i.identifier),this.openRequests=new Map,this.documentStates=new Wh,this.workspaceErrorCounter=0}knows(e,n){let i=n instanceof Xe.Uri?n:n.uri;return this.documentStates.tracks(e,n)||this.openRequests.has(i.toString())}forget(e,n){this.documentStates.unTrack(e,n)}pull(e,n){if(this.isDisposed)return;let i=e instanceof Xe.Uri?e:e.uri;this.pullAsync(e).then(()=>{n&&n()},s=>{this.client.error(`Document pull failed for text document ${i.toString()}`,s,!1)})}async pullAsync(e,n){if(this.isDisposed)return;let i=e instanceof Xe.Uri,s=i?e:e.uri,c=s.toString();n=i?n:e.version;let u=this.openRequests.get(c),l=i?this.documentStates.track(dn.document,e,n):this.documentStates.track(dn.document,e);if(u===void 0){let f=new Xe.CancellationTokenSource;this.openRequests.set(c,{state:An.active,document:e,version:n,tokenSource:f});let h,g;try{h=await this.provider.provideDiagnostics(e,l.resultId,f.token)??{kind:Yr.DocumentDiagnosticReportKind.full,items:[]}}catch(C){if(C instanceof Uh.LSPCancellationError&&Jt.DiagnosticServerCancellationData.is(C.data)&&C.data.retriggerRequest===!1&&(g={state:An.outDated,document:e}),g===void 0&&C instanceof Xe.CancellationError)g={state:An.reschedule,document:e};else throw C}if(g=g??this.openRequests.get(c),g===void 0){this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${c}`),this.diagnostics.delete(s);return}if(this.openRequests.delete(c),!this.tabs.isVisible(e)){this.documentStates.unTrack(dn.document,e);return}if(g.state===An.outDated)return;h!==void 0&&(h.kind===Yr.DocumentDiagnosticReportKind.full&&this.diagnostics.set(s,h.items),l.pulledVersion=n,l.resultId=h.resultId),g.state===An.reschedule&&this.pull(e)}else u.state===An.active?(u.tokenSource.cancel(),this.openRequests.set(c,{state:An.reschedule,document:u.document})):u.state===An.outDated&&this.openRequests.set(c,{state:An.reschedule,document:u.document})}forgetDocument(e){let n=e instanceof Xe.Uri?e:e.uri,i=n.toString(),s=this.openRequests.get(i);this.options.workspaceDiagnostics?s!==void 0?this.openRequests.set(i,{state:An.reschedule,document:e}):this.pull(e,()=>{this.forget(dn.document,e)}):(s!==void 0&&(s.state===An.active&&s.tokenSource.cancel(),this.openRequests.set(i,{state:An.outDated,document:e})),this.diagnostics.delete(n),this.forget(dn.document,e))}pullWorkspace(){this.isDisposed||this.pullWorkspaceAsync().then(()=>{this.workspaceTimeout=(0,Jt.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3)},e=>{!(e instanceof Uh.LSPCancellationError)&&!Jt.DiagnosticServerCancellationData.is(e.data)&&(this.client.error("Workspace diagnostic pull failed.",e,!1),this.workspaceErrorCounter++),this.workspaceErrorCounter<=5&&(this.workspaceTimeout=(0,Jt.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3))})}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics||this.isDisposed)return;this.workspaceCancellation!==void 0&&(this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0),this.workspaceCancellation=new Xe.CancellationTokenSource;let e=this.documentStates.getAllResultIds().map(n=>({uri:this.client.protocol2CodeConverter.asUri(n.uri),value:n.value}));await this.provider.provideWorkspaceDiagnostics(e,this.workspaceCancellation.token,n=>{if(!(!n||this.isDisposed))for(let i of n.items)i.kind===Yr.DocumentDiagnosticReportKind.full&&(this.documentStates.tracks(dn.document,i.uri)||this.diagnostics.set(i.uri,i.items)),this.documentStates.update(dn.workspace,i.uri,i.version??void 0,i.resultId)})}createProvider(){let e={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(n,i,s)=>{let c=(l,f,h)=>{let g={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(l instanceof Xe.Uri?l:l.uri)},previousResultId:f};return this.isDisposed===!0||!this.client.isRunning()?{kind:Yr.DocumentDiagnosticReportKind.full,items:[]}:this.client.sendRequest(Jt.DocumentDiagnosticRequest.type,g,h).then(async C=>C==null||this.isDisposed||h.isCancellationRequested?{kind:Yr.DocumentDiagnosticReportKind.full,items:[]}:C.kind===Jt.DocumentDiagnosticReportKind.Full?{kind:Yr.DocumentDiagnosticReportKind.full,resultId:C.resultId,items:await this.client.protocol2CodeConverter.asDiagnostics(C.items,h)}:{kind:Yr.DocumentDiagnosticReportKind.unChanged,resultId:C.resultId},C=>this.client.handleFailedRequest(Jt.DocumentDiagnosticRequest.type,h,C,{kind:Yr.DocumentDiagnosticReportKind.full,items:[]}))},u=this.client.middleware;return u.provideDiagnostics?u.provideDiagnostics(n,i,s,c):c(n,i,s)}};return this.options.workspaceDiagnostics&&(e.provideWorkspaceDiagnostics=(n,i,s)=>{let c=async h=>h.kind===Jt.DocumentDiagnosticReportKind.Full?{kind:Yr.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(h.uri),resultId:h.resultId,version:h.version,items:await this.client.protocol2CodeConverter.asDiagnostics(h.items,i)}:{kind:Yr.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(h.uri),resultId:h.resultId,version:h.version},u=h=>{let g=[];for(let C of h)g.push({uri:this.client.code2ProtocolConverter.asUri(C.uri),value:C.value});return g},l=(h,g)=>{let C=(0,NA.generateUuid)(),_=this.client.onProgress(Jt.WorkspaceDiagnosticRequest.partialResult,C,async T=>{if(T==null){s(null);return}let L={items:[]};for(let F of T.items)try{L.items.push(await c(F))}catch(H){this.client.error("Converting workspace diagnostics failed.",H)}s(L)}),S={identifier:this.options.identifier,previousResultIds:u(h),partialResultToken:C};return this.isDisposed===!0||!this.client.isRunning()?{items:[]}:this.client.sendRequest(Jt.WorkspaceDiagnosticRequest.type,S,g).then(async T=>{if(g.isCancellationRequested)return{items:[]};let L={items:[]};for(let F of T.items)L.items.push(await c(F));return _.dispose(),s(L),{items:[]}},T=>(_.dispose(),this.client.handleFailedRequest(Jt.DocumentDiagnosticRequest.type,g,T,{items:[]})))},f=this.client.middleware;return f.provideWorkspaceDiagnostics?f.provideWorkspaceDiagnostics(n,i,s,l):l(n,i,s)}),e}dispose(){this.isDisposed=!0,this.workspaceCancellation?.cancel(),this.workspaceTimeout?.dispose();for(let[e,n]of this.openRequests)n.state===An.active&&n.tokenSource.cancel(),this.openRequests.set(e,{state:An.outDated,document:n.document});this.diagnostics.dispose()}},zh=class{constructor(e){this.diagnosticRequestor=e,this.documents=new Jt.LinkedMap,this.isDisposed=!1}add(e){if(this.isDisposed===!0)return;let n=Li.asKey(e);this.documents.has(n)||(this.documents.set(n,e,Jt.Touch.Last),this.trigger())}remove(e){let n=Li.asKey(e);this.documents.delete(n),this.documents.size===0?this.stop():n===this.endDocumentKey()&&(this.endDocument=this.documents.last)}trigger(){if(this.isDisposed!==!0){if(this.intervalHandle!==void 0){this.endDocument=this.documents.last;return}this.endDocument=this.documents.last,this.intervalHandle=(0,Jt.RAL)().timer.setInterval(()=>{let e=this.documents.first;if(e!==void 0){let n=Li.asKey(e);this.diagnosticRequestor.pull(e),this.documents.set(n,e,Jt.Touch.Last),n===this.endDocumentKey()&&this.stop()}},200)}}dispose(){this.isDisposed=!0,this.stop(),this.documents.clear()}stop(){this.intervalHandle?.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}endDocumentKey(){return this.endDocument!==void 0?Li.asKey(this.endDocument):void 0}},Kh=class{constructor(e,n,i){let s=e.clientOptions.diagnosticPullOptions??{onChange:!0,onSave:!1},c=e.protocol2CodeConverter.asDocumentSelector(i.documentSelector),u=[],l=T=>{let L=i.documentSelector;if(s.match!==void 0)return s.match(L,T);for(let F of L)if(Jt.TextDocumentFilter.is(F)){if(typeof F=="string"||F.language!==void 0&&F.language!=="*"||F.scheme!==void 0&&F.scheme!=="*"&&F.scheme!==T.scheme)return!1;if(F.pattern!==void 0){let H=new MA.Minimatch(F.pattern,{noext:!0});if(!H.makeRe()||!H.match(T.fsPath))return!1}}return!0},f=T=>T instanceof Xe.Uri?l(T):Xe.languages.match(c,T)>0&&n.isVisible(T),h=T=>T instanceof Xe.Uri?this.activeTextDocument?.uri.toString()===T.toString():this.activeTextDocument===T;this.diagnosticRequestor=new jh(e,n,i),this.backgroundScheduler=new zh(this.diagnosticRequestor);let g=T=>{!f(T)||!i.interFileDependencies||h(T)||this.backgroundScheduler.add(T)};this.activeTextDocument=Xe.window.activeTextEditor?.document,Xe.window.onDidChangeActiveTextEditor(T=>{let L=this.activeTextDocument;this.activeTextDocument=T?.document,L!==void 0&&g(L),this.activeTextDocument!==void 0&&this.backgroundScheduler.remove(this.activeTextDocument)});let C=e.getFeature(Jt.DidOpenTextDocumentNotification.method);u.push(C.onNotificationSent(T=>{let L=T.textDocument;this.diagnosticRequestor.knows(dn.document,L)||f(L)&&this.diagnosticRequestor.pull(L,()=>{g(L)})})),u.push(n.onOpen(T=>{for(let L of T){if(this.diagnosticRequestor.knows(dn.document,L))continue;let F=L.toString(),H;for(let B of Xe.workspace.textDocuments)if(F===B.uri.toString()){H=B;break}H!==void 0&&f(H)&&this.diagnosticRequestor.pull(H,()=>{g(H)})}}));let _=new Set;for(let T of Xe.workspace.textDocuments)f(T)&&(this.diagnosticRequestor.pull(T,()=>{g(T)}),_.add(T.uri.toString()));if(s.onTabs===!0)for(let T of n.getTabResources())!_.has(T.toString())&&f(T)&&this.diagnosticRequestor.pull(T,()=>{g(T)});if(s.onChange===!0){let T=e.getFeature(Jt.DidChangeTextDocumentNotification.method);u.push(T.onNotificationSent(async L=>{let F=L.textDocument;(s.filter===void 0||!s.filter(F,Hu.onType))&&this.diagnosticRequestor.knows(dn.document,F)&&this.diagnosticRequestor.pull(F,()=>{this.backgroundScheduler.trigger()})}))}if(s.onSave===!0){let T=e.getFeature(Jt.DidSaveTextDocumentNotification.method);u.push(T.onNotificationSent(L=>{let F=L.textDocument;(s.filter===void 0||!s.filter(F,Hu.onSave))&&this.diagnosticRequestor.knows(dn.document,F)&&this.diagnosticRequestor.pull(L.textDocument,()=>{this.backgroundScheduler.trigger()})}))}let S=e.getFeature(Jt.DidCloseTextDocumentNotification.method);u.push(S.onNotificationSent(T=>{this.cleanUpDocument(T.textDocument)})),n.onClose(T=>{for(let L of T)this.cleanUpDocument(L)}),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(()=>{for(let T of Xe.workspace.textDocuments)f(T)&&this.diagnosticRequestor.pull(T)}),i.workspaceDiagnostics===!0&&i.identifier!=="da348dc5-c30a-4515-9d98-31ff3be38d14"&&this.diagnosticRequestor.pullWorkspace(),this.disposable=Xe.Disposable.from(...u,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}cleanUpDocument(e){this.diagnosticRequestor.knows(dn.document,e)&&(this.diagnosticRequestor.forgetDocument(e),this.backgroundScheduler.remove(e))}},Bh=class extends Uh.TextDocumentLanguageFeature{constructor(e){super(e,Jt.DocumentDiagnosticRequest.type)}fillClientCapabilities(e){let n=Uu(Uu(e,"textDocument"),"diagnostic");n.dynamicRegistration=!0,n.relatedDocumentSupport=!1,Uu(Uu(e,"workspace"),"diagnostics").refreshSupport=!0}initialize(e,n){this._client.onRequest(Jt.DiagnosticRefreshRequest.type,async()=>{for(let u of this.getAllProviders())u.onDidChangeDiagnosticsEmitter.fire()});let[s,c]=this.getRegistration(n,e.diagnosticProvider);!s||!c||this.register({id:s,registerOptions:c})}clear(){this.tabs!==void 0&&(this.tabs.dispose(),this.tabs=void 0),super.clear()}registerLanguageProvider(e){this.tabs===void 0&&(this.tabs=new Hh);let n=new Kh(this._client,this.tabs,e);return[n.disposable,n]}};co.DiagnosticFeature=Bh});var ZT=K(Ku=>{"use strict";Object.defineProperty(Ku,"__esModule",{value:!0});Ku.NotebookDocumentSyncFeature=void 0;var Ln=require("vscode"),$A=$u(),Mi=xe(),UA=qt(),JT=cr();function YT(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Ss;(function(t){let e;(function(n){function i(_,S){return{version:_.version,uri:S.asUri(_.uri)}}n.asVersionedNotebookDocumentIdentifier=i;function s(_,S,T){let L=Mi.NotebookDocument.create(T.asUri(_.uri),_.notebookType,_.version,c(S,T));return Object.keys(_.metadata).length>0&&(L.metadata=u(_.metadata)),L}n.asNotebookDocument=s;function c(_,S){return _.map(T=>l(T,S))}n.asNotebookCells=c;function u(_){return h(new Set,_)}n.asMetadata=u;function l(_,S){let T=Mi.NotebookCell.create(f(_.kind),S.asUri(_.document.uri));return Object.keys(_.metadata).length>0&&(T.metadata=u(_.metadata)),_.executionSummary!==void 0&&JT.number(_.executionSummary.executionOrder)&&JT.boolean(_.executionSummary.success)&&(T.executionSummary={executionOrder:_.executionSummary.executionOrder,success:_.executionSummary.success}),T}n.asNotebookCell=l;function f(_){switch(_){case Ln.NotebookCellKind.Markup:return Mi.NotebookCellKind.Markup;case Ln.NotebookCellKind.Code:return Mi.NotebookCellKind.Code}}function h(_,S){if(_.has(S))throw new Error("Can't deep copy cyclic structures.");if(Array.isArray(S)){let T=[];for(let L of S)if(L!==null&&typeof L=="object"||Array.isArray(L))T.push(h(_,L));else{if(L instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");T.push(L)}return T}else{let T=Object.keys(S),L=Object.create(null);for(let F of T){let H=S[F];if(H!==null&&typeof H=="object"||Array.isArray(H))L[F]=h(_,H);else{if(H instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");L[F]=H}}return L}}function g(_,S){let T=S.asChangeTextDocumentParams(_,_.document.uri,_.document.version);return{document:T.textDocument,changes:T.contentChanges}}n.asTextContentChange=g;function C(_,S){let T=Object.create(null);if(_.metadata&&(T.metadata=t.c2p.asMetadata(_.metadata)),_.cells!==void 0){let L=Object.create(null),F=_.cells;F.structure&&(L.structure={array:{start:F.structure.array.start,deleteCount:F.structure.array.deleteCount,cells:F.structure.array.cells!==void 0?F.structure.array.cells.map(H=>t.c2p.asNotebookCell(H,S)):void 0},didOpen:F.structure.didOpen!==void 0?F.structure.didOpen.map(H=>S.asOpenTextDocumentParams(H.document).textDocument):void 0,didClose:F.structure.didClose!==void 0?F.structure.didClose.map(H=>S.asCloseTextDocumentParams(H.document).textDocument):void 0}),F.data!==void 0&&(L.data=F.data.map(H=>t.c2p.asNotebookCell(H,S))),F.textContent!==void 0&&(L.textContent=F.textContent.map(H=>t.c2p.asTextContentChange(H,S))),Object.keys(L).length>0&&(T.cells=L)}return T}n.asNotebookDocumentChangeEvent=C})(e=t.c2p||(t.c2p={}))})(Ss||(Ss={}));var Gh;(function(t){function e(l,f,h){let g=l.length,C=f.length,_=0;for(;_<C&&_<g&&n(l[_],f[_],h);)_++;if(_<C&&_<g){let S=g-1,T=C-1;for(;S>=0&&T>=0&&n(l[S],f[T],h);)S--,T--;let L=S+1-_,F=_===T+1?void 0:f.slice(_,T+1);return F!==void 0?{start:_,deleteCount:L,cells:F}:{start:_,deleteCount:L}}else return _<C?{start:_,deleteCount:0,cells:f.slice(_)}:_<g?{start:_,deleteCount:g-_}:void 0}t.computeDiff=e;function n(l,f,h=!0){return l.kind!==f.kind||l.document.uri.toString()!==f.document.uri.toString()||l.document.languageId!==f.document.languageId||!i(l.executionSummary,f.executionSummary)?!1:!h||h&&c(l.metadata,f.metadata)}function i(l,f){return l===f?!0:l===void 0||f===void 0?!1:l.executionOrder===f.executionOrder&&l.success===f.success&&s(l.timing,f.timing)}function s(l,f){return l===f?!0:l===void 0||f===void 0?!1:l.startTime===f.startTime&&l.endTime===f.endTime}function c(l,f){if(l===f)return!0;if(l==null||f===null||f===void 0||typeof l!=typeof f||typeof l!="object")return!1;let h=Array.isArray(l),g=Array.isArray(f);if(h!==g)return!1;if(h&&g){if(l.length!==f.length)return!1;for(let C=0;C<l.length;C++)if(!c(l[C],f[C]))return!1}if(u(l)&&u(f)){let C=Object.keys(l),_=Object.keys(f);if(C.length!==_.length||(C.sort(),_.sort(),!c(C,_)))return!1;for(let S=0;S<C.length;S++){let T=C[S];if(!c(l[T],f[T]))return!1}return!0}return!1}function u(l){return l!==null&&typeof l=="object"}t.isObjectLiteral=u})(Gh||(Gh={}));var Xh;(function(t){function e(n,i){if(typeof n=="string")return n==="*"||i.notebookType===n;if(n.notebookType!==void 0&&n.notebookType!=="*"&&i.notebookType!==n.notebookType)return!1;let s=i.uri;if(n.scheme!==void 0&&n.scheme!=="*"&&s.scheme!==n.scheme)return!1;if(n.pattern!==void 0){let c=new $A.Minimatch(n.pattern,{noext:!0});if(!c.makeRe()||!c.match(s.fsPath))return!1}return!0}t.matchNotebook=e})(Xh||(Xh={}));var Wu;(function(t){function e(i){let s=i.notebookSelector,c=[];for(let u of s){let l=(typeof u.notebook=="string"?u.notebook:u.notebook?.notebookType)??"*",f=typeof u.notebook=="string"?void 0:u.notebook?.scheme,h=typeof u.notebook=="string"?void 0:u.notebook?.pattern;if(u.cells!==void 0)for(let g of u.cells)c.push(n(l,f,h,g.language));else c.push(n(l,f,h,void 0))}return c}t.asDocumentSelector=e;function n(i,s,c,u){return s===void 0&&c===void 0?{notebook:i,language:u}:{notebook:{notebookType:i,scheme:s,pattern:c},language:u}}})(Wu||(Wu={}));var ju;(function(t){function e(n){return{cells:n,uris:new Set(n.map(i=>i.document.uri.toString()))}}t.create=e})(ju||(ju={}));var xs=class{constructor(e,n){this.client=e,this.options=n,this.notebookSyncInfo=new Map,this.notebookDidOpen=new Set,this.disposables=[],this.selector=e.protocol2CodeConverter.asDocumentSelector(Wu.asDocumentSelector(n)),Ln.workspace.onDidOpenNotebookDocument(i=>{this.notebookDidOpen.add(i.uri.toString()),this.didOpen(i)},void 0,this.disposables);for(let i of Ln.workspace.notebookDocuments)this.notebookDidOpen.add(i.uri.toString()),this.didOpen(i);Ln.workspace.onDidChangeNotebookDocument(i=>this.didChangeNotebookDocument(i),void 0,this.disposables),this.options.save===!0&&Ln.workspace.onDidSaveNotebookDocument(i=>this.didSave(i),void 0,this.disposables),Ln.workspace.onDidCloseNotebookDocument(i=>{this.didClose(i),this.notebookDidOpen.delete(i.uri.toString())},void 0,this.disposables)}getState(){for(let e of Ln.workspace.notebookDocuments)if(this.getMatchingCells(e)!==void 0)return{kind:"document",id:"$internal",registrations:!0,matches:!0};return{kind:"document",id:"$internal",registrations:!0,matches:!1}}get mode(){return"notebook"}handles(e){return Ln.languages.match(this.selector,e)>0}didOpenNotebookCellTextDocument(e,n){if(Ln.languages.match(this.selector,n.document)===0||!this.notebookDidOpen.has(e.uri.toString()))return;let i=this.notebookSyncInfo.get(e.uri.toString()),s=this.cellMatches(e,n);if(i!==void 0){let c=i.uris.has(n.document.uri.toString());if(s&&c||!s&&!c)return;if(s){let u=this.getMatchingCells(e);if(u!==void 0){let l=this.asNotebookDocumentChangeEvent(e,void 0,i,u);l!==void 0&&this.doSendChange(l,u).catch(()=>{})}}}else s&&this.doSendOpen(e,[n]).catch(()=>{})}didChangeNotebookCellTextDocument(e,n){Ln.languages.match(this.selector,n.document)!==0&&this.doSendChange({notebook:e,cells:{textContent:[n]}},void 0).catch(()=>{})}didCloseNotebookCellTextDocument(e,n){let i=this.notebookSyncInfo.get(e.uri.toString());if(i===void 0)return;let s=n.document.uri,c=i.cells.findIndex(u=>u.document.uri.toString()===s.toString());if(c!==-1)if(c===0&&i.cells.length===1)this.doSendClose(e,i.cells).catch(()=>{});else{let u=i.cells.slice(),l=u.splice(c,1);this.doSendChange({notebook:e,cells:{structure:{array:{start:c,deleteCount:1},didClose:l}}},u).catch(()=>{})}}dispose(){for(let e of this.disposables)e.dispose()}didOpen(e,n=this.getMatchingCells(e),i=this.notebookSyncInfo.get(e.uri.toString())){if(i!==void 0)if(n!==void 0){let s=this.asNotebookDocumentChangeEvent(e,void 0,i,n);s!==void 0&&this.doSendChange(s,n).catch(()=>{})}else this.doSendClose(e,[]).catch(()=>{});else{if(n===void 0)return;this.doSendOpen(e,n).catch(()=>{})}}didChangeNotebookDocument(e){let n=e.notebook,i=this.notebookSyncInfo.get(n.uri.toString());if(i===void 0){if(e.contentChanges.length===0)return;let s=this.getMatchingCells(n);if(s===void 0)return;this.didOpen(n,s,i)}else{let s=this.getMatchingCells(n);if(s===void 0){this.didClose(n,i);return}let c=this.asNotebookDocumentChangeEvent(e.notebook,e,i,s);c!==void 0&&this.doSendChange(c,s).catch(()=>{})}}didSave(e){this.notebookSyncInfo.get(e.uri.toString())!==void 0&&this.doSendSave(e).catch(()=>{})}didClose(e,n=this.notebookSyncInfo.get(e.uri.toString())){if(n===void 0)return;let i=e.getCells().filter(s=>n.uris.has(s.document.uri.toString()));this.doSendClose(e,i).catch(()=>{})}async sendDidOpenNotebookDocument(e){let n=this.getMatchingCells(e);if(n!==void 0)return this.doSendOpen(e,n)}async doSendOpen(e,n){let i=async(c,u)=>{let l=Ss.c2p.asNotebookDocument(c,u,this.client.code2ProtocolConverter),f=u.map(h=>this.client.code2ProtocolConverter.asTextDocumentItem(h.document));try{await this.client.sendNotification(Mi.DidOpenNotebookDocumentNotification.type,{notebookDocument:l,cellTextDocuments:f})}catch(h){throw this.client.error("Sending DidOpenNotebookDocumentNotification failed",h),h}},s=this.client.middleware?.notebooks;return this.notebookSyncInfo.set(e.uri.toString(),ju.create(n)),s?.didOpen!==void 0?s.didOpen(e,n,i):i(e,n)}async sendDidChangeNotebookDocument(e){return this.doSendChange(e,void 0)}async doSendChange(e,n=this.getMatchingCells(e.notebook)){let i=async c=>{try{await this.client.sendNotification(Mi.DidChangeNotebookDocumentNotification.type,{notebookDocument:Ss.c2p.asVersionedNotebookDocumentIdentifier(c.notebook,this.client.code2ProtocolConverter),change:Ss.c2p.asNotebookDocumentChangeEvent(c,this.client.code2ProtocolConverter)})}catch(u){throw this.client.error("Sending DidChangeNotebookDocumentNotification failed",u),u}},s=this.client.middleware?.notebooks;return e.cells?.structure!==void 0&&this.notebookSyncInfo.set(e.notebook.uri.toString(),ju.create(n??[])),s?.didChange!==void 0?s?.didChange(e,i):i(e)}async sendDidSaveNotebookDocument(e){return this.doSendSave(e)}async doSendSave(e){let n=async s=>{try{await this.client.sendNotification(Mi.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(s.uri)}})}catch(c){throw this.client.error("Sending DidSaveNotebookDocumentNotification failed",c),c}},i=this.client.middleware?.notebooks;return i?.didSave!==void 0?i.didSave(e,n):n(e)}async sendDidCloseNotebookDocument(e){return this.doSendClose(e,this.getMatchingCells(e)??[])}async doSendClose(e,n){let i=async(c,u)=>{try{await this.client.sendNotification(Mi.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(c.uri)},cellTextDocuments:u.map(l=>this.client.code2ProtocolConverter.asTextDocumentIdentifier(l.document))})}catch(l){throw this.client.error("Sending DidCloseNotebookDocumentNotification failed",l),l}},s=this.client.middleware?.notebooks;return this.notebookSyncInfo.delete(e.uri.toString()),s?.didClose!==void 0?s.didClose(e,n,i):i(e,n)}asNotebookDocumentChangeEvent(e,n,i,s){if(n!==void 0&&n.notebook!==e)throw new Error("Notebook must be identical");let c={notebook:e};n?.metadata!==void 0&&(c.metadata=Ss.c2p.asMetadata(n.metadata));let u;if(n?.cellChanges!==void 0&&n.cellChanges.length>0){let l=[];u=new Set(s.map(f=>f.document.uri.toString()));for(let f of n.cellChanges)u.has(f.cell.document.uri.toString())&&(f.executionSummary!==void 0||f.metadata!==void 0)&&l.push(f.cell);l.length>0&&(c.cells=c.cells??{},c.cells.data=l)}if((n?.contentChanges!==void 0&&n.contentChanges.length>0||n===void 0)&&i!==void 0&&s!==void 0){let l=i.cells,f=s,h=Gh.computeDiff(l,f,!1),g,C;if(h!==void 0){g=h.cells===void 0?new Map:new Map(h.cells.map(T=>[T.document.uri.toString(),T])),C=h.deleteCount===0?new Map:new Map(l.slice(h.start,h.start+h.deleteCount).map(T=>[T.document.uri.toString(),T]));for(let T of Array.from(C.keys()))g.has(T)&&(C.delete(T),g.delete(T));c.cells=c.cells??{};let _=[],S=[];if(g.size>0||C.size>0){for(let T of g.values())_.push(T);for(let T of C.values())S.push(T)}c.cells.structure={array:h,didOpen:_,didClose:S}}}return Object.keys(c).length>1?c:void 0}getMatchingCells(e,n=e.getCells()){if(this.options.notebookSelector!==void 0){for(let i of this.options.notebookSelector)if(i.notebook===void 0||Xh.matchNotebook(i.notebook,e)){let s=this.filterCells(e,n,i.cells);return s.length===0?void 0:s}}}cellMatches(e,n){let i=this.getMatchingCells(e,[n]);return i!==void 0&&i[0]===n}filterCells(e,n,i){let s=i!==void 0?n.filter(c=>{let u=c.document.languageId;return i.some(l=>l.language==="*"||u===l.language)}):n;return typeof this.client.clientOptions.notebookDocumentOptions?.filterCells=="function"?this.client.clientOptions.notebookDocumentOptions.filterCells(e,s):s}},zu=class t{constructor(e){this.client=e,this.registrations=new Map,this.registrationType=Mi.NotebookDocumentSyncRegistrationType.type,Ln.workspace.onDidOpenTextDocument(n=>{if(n.uri.scheme!==t.CellScheme)return;let[i,s]=this.findNotebookDocumentAndCell(n);if(!(i===void 0||s===void 0))for(let c of this.registrations.values())c instanceof xs&&c.didOpenNotebookCellTextDocument(i,s)}),Ln.workspace.onDidChangeTextDocument(n=>{if(n.contentChanges.length===0)return;let i=n.document;if(i.uri.scheme!==t.CellScheme)return;let[s]=this.findNotebookDocumentAndCell(i);if(s!==void 0)for(let c of this.registrations.values())c instanceof xs&&c.didChangeNotebookCellTextDocument(s,n)}),Ln.workspace.onDidCloseTextDocument(n=>{if(n.uri.scheme!==t.CellScheme)return;let[i,s]=this.findNotebookDocumentAndCell(n);if(!(i===void 0||s===void 0))for(let c of this.registrations.values())c instanceof xs&&c.didCloseNotebookCellTextDocument(i,s)})}getState(){if(this.registrations.size===0)return{kind:"document",id:this.registrationType.method,registrations:!1,matches:!1};for(let e of this.registrations.values()){let n=e.getState();if(n.kind==="document"&&n.registrations===!0&&n.matches===!0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!1}}fillClientCapabilities(e){let n=YT(YT(e,"notebookDocument"),"synchronization");n.dynamicRegistration=!0,n.executionSummarySupport=!0}preInitialize(e){let n=e.notebookDocumentSync;n!==void 0&&(this.dedicatedChannel=this.client.protocol2CodeConverter.asDocumentSelector(Wu.asDocumentSelector(n)))}initialize(e){let n=e.notebookDocumentSync;if(n===void 0)return;let i=n.id??UA.generateUuid();this.register({id:i,registerOptions:n})}register(e){let n=new xs(this.client,e.registerOptions);this.registrations.set(e.id,n)}unregister(e){let n=this.registrations.get(e);n&&n.dispose()}clear(){for(let e of this.registrations.values())e.dispose();this.registrations.clear()}handles(e){if(e.uri.scheme!==t.CellScheme)return!1;if(this.dedicatedChannel!==void 0&&Ln.languages.match(this.dedicatedChannel,e)>0)return!0;for(let n of this.registrations.values())if(n.handles(e))return!0;return!1}getProvider(e){for(let n of this.registrations.values())if(n.handles(e.document))return n}findNotebookDocumentAndCell(e){let n=e.uri.toString();for(let i of Ln.workspace.notebookDocuments)for(let s of i.getCells())if(s.document.uri.toString()===n)return[i,s];return[void 0,void 0]}};Ku.NotebookDocumentSyncFeature=zu;zu.CellScheme="vscode-notebook-cell"});var tD=K(uo=>{"use strict";Object.defineProperty(uo,"__esModule",{value:!0});uo.SyncConfigurationFeature=uo.toJSONObject=uo.ConfigurationFeature=void 0;var Ps=require("vscode"),_a=xe(),HA=cr(),WA=qt(),eD=nt(),Qh=class{constructor(e){this._client=e}getState(){return{kind:"static"}}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(_a.ConfigurationRequest.type,(n,i)=>{let s=u=>{let l=[];for(let f of u.items){let h=f.scopeUri!==void 0&&f.scopeUri!==null?this._client.protocol2CodeConverter.asUri(f.scopeUri):void 0;l.push(this.getConfiguration(h,f.section!==null?f.section:void 0))}return l},c=e.middleware.workspace;return c&&c.configuration?c.configuration(n,i,s):s(n,i)})}getConfiguration(e,n){let i=null;if(n){let s=n.lastIndexOf(".");if(s===-1)i=Fo(Ps.workspace.getConfiguration(void 0,e).get(n));else{let c=Ps.workspace.getConfiguration(n.substr(0,s),e);c&&(i=Fo(c.get(n.substr(s+1))))}}else{let s=Ps.workspace.getConfiguration(void 0,e);i={};for(let c of Object.keys(s))s.has(c)&&(i[c]=Fo(s.get(c)))}return i===void 0&&(i=null),i}clear(){}};uo.ConfigurationFeature=Qh;function Fo(t){if(t){if(Array.isArray(t))return t.map(Fo);if(typeof t=="object"){let e=Object.create(null);for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=Fo(t[n]));return e}}return t}uo.toJSONObject=Fo;var Jh=class{constructor(e){this._client=e,this.isCleared=!1,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return _a.DidChangeConfigurationNotification.type}fillClientCapabilities(e){(0,eD.ensure)((0,eD.ensure)(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){this.isCleared=!1;let e=this._client.clientOptions.synchronize?.configurationSection;e!==void 0&&this.register({id:WA.generateUuid(),registerOptions:{section:e}})}register(e){let n=Ps.workspace.onDidChangeConfiguration(i=>{this.onDidChangeConfiguration(e.registerOptions.section,i)});this._listeners.set(e.id,n),e.registerOptions.section!==void 0&&this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let n=this._listeners.get(e);n&&(this._listeners.delete(e),n.dispose())}clear(){for(let e of this._listeners.values())e.dispose();this._listeners.clear(),this.isCleared=!0}onDidChangeConfiguration(e,n){if(this.isCleared)return;let i;if(HA.string(e)?i=[e]:i=e,i!==void 0&&n!==void 0&&!i.some(l=>n.affectsConfiguration(l)))return;let s=async u=>u===void 0?this._client.sendNotification(_a.DidChangeConfigurationNotification.type,{settings:null}):this._client.sendNotification(_a.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(u)}),c=this._client.middleware.workspace?.didChangeConfiguration;(c?c(i,s):s(i)).catch(u=>{this._client.error(`Sending notification ${_a.DidChangeConfigurationNotification.type.method} failed`,u)})}extractSettingsInformation(e){function n(c,u){let l=c;for(let f=0;f<u.length-1;f++){let h=l[u[f]];h||(h=Object.create(null),l[u[f]]=h),l=h}return l}let i=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,s=Object.create(null);for(let c=0;c<e.length;c++){let u=e[c],l=u.indexOf("."),f=null;if(l>=0?f=Ps.workspace.getConfiguration(u.substr(0,l),i).get(u.substr(l+1)):f=Ps.workspace.getConfiguration(void 0,i).get(u),f){let h=e[c].split(".");n(s,h)[h[h.length-1]]=Fo(f)}}return s}};uo.SyncConfigurationFeature=Jh});var nD=K(pr=>{"use strict";Object.defineProperty(pr,"__esModule",{value:!0});pr.DidSaveTextDocumentFeature=pr.WillSaveWaitUntilFeature=pr.WillSaveFeature=pr.DidChangeTextDocumentFeature=pr.DidCloseTextDocumentFeature=pr.DidOpenTextDocumentFeature=void 0;var Or=require("vscode"),wt=xe(),Ht=nt(),Es=qt(),Yh=class extends Ht.TextDocumentEventFeature{constructor(e,n){super(e,Or.workspace.onDidOpenTextDocument,wt.DidOpenTextDocumentNotification.type,()=>e.middleware.didOpen,i=>e.code2ProtocolConverter.asOpenTextDocumentParams(i),i=>i,Ht.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=n}get openDocuments(){return this._syncedDocuments.values()}fillClientCapabilities(e){(0,Ht.ensure)((0,Ht.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,n){let i=e.resolvedTextDocumentSync;n&&i&&i.openClose&&this.register({id:Es.generateUuid(),registerOptions:{documentSelector:n}})}get registrationType(){return wt.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;let n=this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector);Or.workspace.textDocuments.forEach(i=>{let s=i.uri.toString();if(!this._syncedDocuments.has(s)&&Or.languages.match(n,i)>0&&!this._client.hasDedicatedTextSynchronizationFeature(i)){let c=this._client.middleware,u=l=>this._client.sendNotification(this._type,this._createParams(l));(c.didOpen?c.didOpen(i,u):u(i)).catch(l=>{this._client.error(`Sending document notification ${this._type.method} failed`,l)}),this._syncedDocuments.set(s,i)}})}getTextDocument(e){return e}notificationSent(e,n,i){this._syncedDocuments.set(e.uri.toString(),e),super.notificationSent(e,n,i)}};pr.DidOpenTextDocumentFeature=Yh;var Zh=class extends Ht.TextDocumentEventFeature{constructor(e,n,i){super(e,Or.workspace.onDidCloseTextDocument,wt.DidCloseTextDocumentNotification.type,()=>e.middleware.didClose,s=>e.code2ProtocolConverter.asCloseTextDocumentParams(s),s=>s,Ht.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=n,this._pendingTextDocumentChanges=i}get registrationType(){return wt.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){(0,Ht.ensure)((0,Ht.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,n){let i=e.resolvedTextDocumentSync;n&&i&&i.openClose&&this.register({id:Es.generateUuid(),registerOptions:{documentSelector:n}})}async callback(e){await super.callback(e),this._pendingTextDocumentChanges.delete(e.uri.toString())}getTextDocument(e){return e}notificationSent(e,n,i){this._syncedDocuments.delete(e.uri.toString()),super.notificationSent(e,n,i)}unregister(e){let n=this._selectors.get(e);super.unregister(e);let i=this._selectors.values();this._syncedDocuments.forEach(s=>{if(Or.languages.match(n,s)>0&&!this._selectorFilter(i,s)&&!this._client.hasDedicatedTextSynchronizationFeature(s)){let c=this._client.middleware,u=l=>this._client.sendNotification(this._type,this._createParams(l));this._syncedDocuments.delete(s.uri.toString()),(c.didClose?c.didClose(s,u):u(s)).catch(l=>{this._client.error(`Sending document notification ${this._type.method} failed`,l)})}})}};pr.DidCloseTextDocumentFeature=Zh;var eg=class extends Ht.DynamicDocumentFeature{constructor(e,n){super(e),this._changeData=new Map,this._onNotificationSent=new Or.EventEmitter,this._onPendingChangeAdded=new Or.EventEmitter,this._pendingTextDocumentChanges=n,this._syncKind=wt.TextDocumentSyncKind.None}get onNotificationSent(){return this._onNotificationSent.event}get onPendingChangeAdded(){return this._onPendingChangeAdded.event}get syncKind(){return this._syncKind}get registrationType(){return wt.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){(0,Ht.ensure)((0,Ht.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,n){let i=e.resolvedTextDocumentSync;n&&i&&i.change!==void 0&&i.change!==wt.TextDocumentSyncKind.None&&this.register({id:Es.generateUuid(),registerOptions:Object.assign({},{documentSelector:n},{syncKind:i.change})})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=Or.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{syncKind:e.registerOptions.syncKind,documentSelector:this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)}),this.updateSyncKind(e.registerOptions.syncKind))}*getDocumentSelectors(){for(let e of this._changeData.values())yield e.documentSelector}async callback(e){if(e.contentChanges.length===0)return;let n=e.document.uri,i=e.document.version,s=[];for(let c of this._changeData.values())if(Or.languages.match(c.documentSelector,e.document)>0&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let u=this._client.middleware;if(c.syncKind===wt.TextDocumentSyncKind.Incremental){let l=async f=>{let h=this._client.code2ProtocolConverter.asChangeTextDocumentParams(f,n,i);await this._client.sendNotification(wt.DidChangeTextDocumentNotification.type,h),this.notificationSent(f.document,wt.DidChangeTextDocumentNotification.type,h)};s.push(u.didChange?u.didChange(e,f=>l(f)):l(e))}else if(c.syncKind===wt.TextDocumentSyncKind.Full){let l=async f=>{let h=f.document.uri.toString();this._pendingTextDocumentChanges.set(h,f.document),this._onPendingChangeAdded.fire()};s.push(u.didChange?u.didChange(e,f=>l(f)):l(e))}}return Promise.all(s).then(void 0,c=>{throw this._client.error(`Sending document notification ${wt.DidChangeTextDocumentNotification.type.method} failed`,c),c})}notificationSent(e,n,i){this._onNotificationSent.fire({textDocument:e,type:n,params:i})}unregister(e){if(this._changeData.delete(e),this._changeData.size===0)this._listener&&(this._listener.dispose(),this._listener=void 0),this._syncKind=wt.TextDocumentSyncKind.None;else{this._syncKind=wt.TextDocumentSyncKind.None;for(let n of this._changeData.values())if(this.updateSyncKind(n.syncKind),this._syncKind===wt.TextDocumentSyncKind.Full)break}}clear(){this._pendingTextDocumentChanges.clear(),this._changeData.clear(),this._syncKind=wt.TextDocumentSyncKind.None,this._listener&&(this._listener.dispose(),this._listener=void 0)}getPendingDocumentChanges(e){if(this._pendingTextDocumentChanges.size===0)return[];let n;if(e.size===0)n=Array.from(this._pendingTextDocumentChanges.values()),this._pendingTextDocumentChanges.clear();else{n=[];for(let i of this._pendingTextDocumentChanges)e.has(i[0])||(n.push(i[1]),this._pendingTextDocumentChanges.delete(i[0]))}return n}getProvider(e){for(let n of this._changeData.values())if(Or.languages.match(n.documentSelector,e)>0)return{send:i=>this.callback(i)}}updateSyncKind(e){if(this._syncKind!==wt.TextDocumentSyncKind.Full)switch(e){case wt.TextDocumentSyncKind.Full:this._syncKind=e;break;case wt.TextDocumentSyncKind.Incremental:this._syncKind===wt.TextDocumentSyncKind.None&&(this._syncKind=wt.TextDocumentSyncKind.Incremental);break}}};pr.DidChangeTextDocumentFeature=eg;var tg=class extends Ht.TextDocumentEventFeature{constructor(e){super(e,Or.workspace.onWillSaveTextDocument,wt.WillSaveTextDocumentNotification.type,()=>e.middleware.willSave,n=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(n),n=>n.document,(n,i)=>Ht.TextDocumentEventFeature.textDocumentFilter(n,i.document))}get registrationType(){return wt.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let n=(0,Ht.ensure)((0,Ht.ensure)(e,"textDocument"),"synchronization");n.willSave=!0}initialize(e,n){let i=e.resolvedTextDocumentSync;n&&i&&i.willSave&&this.register({id:Es.generateUuid(),registerOptions:{documentSelector:n}})}getTextDocument(e){return e.document}};pr.WillSaveFeature=tg;var ng=class extends Ht.DynamicDocumentFeature{constructor(e){super(e),this._selectors=new Map}getDocumentSelectors(){return this._selectors.values()}get registrationType(){return wt.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let n=(0,Ht.ensure)((0,Ht.ensure)(e,"textDocument"),"synchronization");n.willSaveWaitUntil=!0}initialize(e,n){let i=e.resolvedTextDocumentSync;n&&i&&i.willSaveWaitUntil&&this.register({id:Es.generateUuid(),registerOptions:{documentSelector:n}})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=Or.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}callback(e){if(Ht.TextDocumentEventFeature.textDocumentFilter(this._selectors.values(),e.document)&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let n=this._client.middleware,i=s=>this._client.sendRequest(wt.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(s)).then(async c=>{let u=await this._client.protocol2CodeConverter.asTextEdits(c);return u===void 0?[]:u});e.waitUntil(n.willSaveWaitUntil?n.willSaveWaitUntil(e,i):i(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}clear(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}};pr.WillSaveWaitUntilFeature=ng;var rg=class extends Ht.TextDocumentEventFeature{constructor(e){super(e,Or.workspace.onDidSaveTextDocument,wt.DidSaveTextDocumentNotification.type,()=>e.middleware.didSave,n=>e.code2ProtocolConverter.asSaveTextDocumentParams(n,this._includeText),n=>n,Ht.TextDocumentEventFeature.textDocumentFilter),this._includeText=!1}get registrationType(){return wt.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){(0,Ht.ensure)((0,Ht.ensure)(e,"textDocument"),"synchronization").didSave=!0}initialize(e,n){let i=e.resolvedTextDocumentSync;if(n&&i&&i.save){let s=typeof i.save=="boolean"?{includeText:!1}:{includeText:!!i.save.includeText};this.register({id:Es.generateUuid(),registerOptions:Object.assign({},{documentSelector:n},s)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}getTextDocument(e){return e}};pr.DidSaveTextDocumentFeature=rg});var rD=K(Bu=>{"use strict";Object.defineProperty(Bu,"__esModule",{value:!0});Bu.CompletionItemFeature=void 0;var jA=require("vscode"),Qe=xe(),ig=nt(),zA=qt(),KA=[Qe.CompletionItemKind.Text,Qe.CompletionItemKind.Method,Qe.CompletionItemKind.Function,Qe.CompletionItemKind.Constructor,Qe.CompletionItemKind.Field,Qe.CompletionItemKind.Variable,Qe.CompletionItemKind.Class,Qe.CompletionItemKind.Interface,Qe.CompletionItemKind.Module,Qe.CompletionItemKind.Property,Qe.CompletionItemKind.Unit,Qe.CompletionItemKind.Value,Qe.CompletionItemKind.Enum,Qe.CompletionItemKind.Keyword,Qe.CompletionItemKind.Snippet,Qe.CompletionItemKind.Color,Qe.CompletionItemKind.File,Qe.CompletionItemKind.Reference,Qe.CompletionItemKind.Folder,Qe.CompletionItemKind.EnumMember,Qe.CompletionItemKind.Constant,Qe.CompletionItemKind.Struct,Qe.CompletionItemKind.Event,Qe.CompletionItemKind.Operator,Qe.CompletionItemKind.TypeParameter],og=class extends ig.TextDocumentLanguageFeature{constructor(e){super(e,Qe.CompletionRequest.type),this.labelDetailsSupport=new Map}fillClientCapabilities(e){let n=(0,ig.ensure)((0,ig.ensure)(e,"textDocument"),"completion");n.dynamicRegistration=!0,n.contextSupport=!0,n.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[Qe.MarkupKind.Markdown,Qe.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[Qe.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[Qe.InsertTextMode.asIs,Qe.InsertTextMode.adjustIndentation]},labelDetailsSupport:!0},n.insertTextMode=Qe.InsertTextMode.adjustIndentation,n.completionItemKind={valueSet:KA},n.completionList={itemDefaults:["commitCharacters","editRange","insertTextFormat","insertTextMode","data"]}}initialize(e,n){let i=this.getRegistrationOptions(n,e.completionProvider);i&&this.register({id:zA.generateUuid(),registerOptions:i})}registerLanguageProvider(e,n){this.labelDetailsSupport.set(n,!!e.completionItem?.labelDetailsSupport);let i=e.triggerCharacters??[],s=e.allCommitCharacters,c=e.documentSelector,u={provideCompletionItems:(l,f,h,g)=>{let C=this._client,_=this._client.middleware,S=(T,L,F,H)=>C.sendRequest(Qe.CompletionRequest.type,C.code2ProtocolConverter.asCompletionParams(T,L,F),H).then(B=>H.isCancellationRequested?null:C.protocol2CodeConverter.asCompletionResult(B,s,H),B=>C.handleFailedRequest(Qe.CompletionRequest.type,H,B,null));return _.provideCompletionItem?_.provideCompletionItem(l,f,g,h,S):S(l,f,g,h)},resolveCompletionItem:e.resolveProvider?(l,f)=>{let h=this._client,g=this._client.middleware,C=(_,S)=>h.sendRequest(Qe.CompletionResolveRequest.type,h.code2ProtocolConverter.asCompletionItem(_,!!this.labelDetailsSupport.get(n)),S).then(T=>S.isCancellationRequested?null:h.protocol2CodeConverter.asCompletionItem(T),T=>h.handleFailedRequest(Qe.CompletionResolveRequest.type,S,T,_));return g.resolveCompletionItem?g.resolveCompletionItem(l,f,C):C(l,f)}:void 0};return[jA.languages.registerCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(c),u,...i),u]}};Bu.CompletionItemFeature=og});var iD=K(Vu=>{"use strict";Object.defineProperty(Vu,"__esModule",{value:!0});Vu.HoverFeature=void 0;var BA=require("vscode"),Ta=xe(),sg=nt(),VA=qt(),ag=class extends sg.TextDocumentLanguageFeature{constructor(e){super(e,Ta.HoverRequest.type)}fillClientCapabilities(e){let n=(0,sg.ensure)((0,sg.ensure)(e,"textDocument"),"hover");n.dynamicRegistration=!0,n.contentFormat=[Ta.MarkupKind.Markdown,Ta.MarkupKind.PlainText]}initialize(e,n){let i=this.getRegistrationOptions(n,e.hoverProvider);i&&this.register({id:VA.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,i={provideHover:(s,c,u)=>{let l=this._client,f=(g,C,_)=>l.sendRequest(Ta.HoverRequest.type,l.code2ProtocolConverter.asTextDocumentPositionParams(g,C),_).then(S=>_.isCancellationRequested?null:l.protocol2CodeConverter.asHover(S),S=>l.handleFailedRequest(Ta.HoverRequest.type,_,S,null)),h=l.middleware;return h.provideHover?h.provideHover(s,c,u,f):f(s,c,u)}};return[this.registerProvider(n,i),i]}registerProvider(e,n){return BA.languages.registerHoverProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};Vu.HoverFeature=ag});var oD=K(Gu=>{"use strict";Object.defineProperty(Gu,"__esModule",{value:!0});Gu.DefinitionFeature=void 0;var GA=require("vscode"),cg=xe(),ug=nt(),XA=qt(),lg=class extends ug.TextDocumentLanguageFeature{constructor(e){super(e,cg.DefinitionRequest.type)}fillClientCapabilities(e){let n=(0,ug.ensure)((0,ug.ensure)(e,"textDocument"),"definition");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let i=this.getRegistrationOptions(n,e.definitionProvider);i&&this.register({id:XA.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,i={provideDefinition:(s,c,u)=>{let l=this._client,f=(g,C,_)=>l.sendRequest(cg.DefinitionRequest.type,l.code2ProtocolConverter.asTextDocumentPositionParams(g,C),_).then(S=>_.isCancellationRequested?null:l.protocol2CodeConverter.asDefinitionResult(S,_),S=>l.handleFailedRequest(cg.DefinitionRequest.type,_,S,null)),h=l.middleware;return h.provideDefinition?h.provideDefinition(s,c,u,f):f(s,c,u)}};return[this.registerProvider(n,i),i]}registerProvider(e,n){return GA.languages.registerDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};Gu.DefinitionFeature=lg});var aD=K(Xu=>{"use strict";Object.defineProperty(Xu,"__esModule",{value:!0});Xu.SignatureHelpFeature=void 0;var sD=require("vscode"),Da=xe(),dg=nt(),QA=qt(),fg=class extends dg.TextDocumentLanguageFeature{constructor(e){super(e,Da.SignatureHelpRequest.type)}fillClientCapabilities(e){let n=(0,dg.ensure)((0,dg.ensure)(e,"textDocument"),"signatureHelp");n.dynamicRegistration=!0,n.signatureInformation={documentationFormat:[Da.MarkupKind.Markdown,Da.MarkupKind.PlainText]},n.signatureInformation.parameterInformation={labelOffsetSupport:!0},n.signatureInformation.activeParameterSupport=!0,n.contextSupport=!0}initialize(e,n){let i=this.getRegistrationOptions(n,e.signatureHelpProvider);i&&this.register({id:QA.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let n={provideSignatureHelp:(i,s,c,u)=>{let l=this._client,f=(g,C,_,S)=>l.sendRequest(Da.SignatureHelpRequest.type,l.code2ProtocolConverter.asSignatureHelpParams(g,C,_),S).then(T=>S.isCancellationRequested?null:l.protocol2CodeConverter.asSignatureHelp(T,S),T=>l.handleFailedRequest(Da.SignatureHelpRequest.type,S,T,null)),h=l.middleware;return h.provideSignatureHelp?h.provideSignatureHelp(i,s,u,c,f):f(i,s,u,c)}};return[this.registerProvider(e,n),n]}registerProvider(e,n){let i=this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector);if(e.retriggerCharacters===void 0){let s=e.triggerCharacters||[];return sD.languages.registerSignatureHelpProvider(i,n,...s)}else{let s={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};return sD.languages.registerSignatureHelpProvider(i,n,s)}}};Xu.SignatureHelpFeature=fg});var cD=K(Qu=>{"use strict";Object.defineProperty(Qu,"__esModule",{value:!0});Qu.DocumentHighlightFeature=void 0;var JA=require("vscode"),pg=xe(),hg=nt(),YA=qt(),gg=class extends hg.TextDocumentLanguageFeature{constructor(e){super(e,pg.DocumentHighlightRequest.type)}fillClientCapabilities(e){(0,hg.ensure)((0,hg.ensure)(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,n){let i=this.getRegistrationOptions(n,e.documentHighlightProvider);i&&this.register({id:YA.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,i={provideDocumentHighlights:(s,c,u)=>{let l=this._client,f=(g,C,_)=>l.sendRequest(pg.DocumentHighlightRequest.type,l.code2ProtocolConverter.asTextDocumentPositionParams(g,C),_).then(S=>_.isCancellationRequested?null:l.protocol2CodeConverter.asDocumentHighlights(S,_),S=>l.handleFailedRequest(pg.DocumentHighlightRequest.type,_,S,null)),h=l.middleware;return h.provideDocumentHighlights?h.provideDocumentHighlights(s,c,u,f):f(s,c,u)}};return[JA.languages.registerDocumentHighlightProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),i),i]}};Qu.DocumentHighlightFeature=gg});var yg=K(wi=>{"use strict";Object.defineProperty(wi,"__esModule",{value:!0});wi.DocumentSymbolFeature=wi.SupportedSymbolTags=wi.SupportedSymbolKinds=void 0;var ZA=require("vscode"),dt=xe(),mg=nt(),eL=qt();wi.SupportedSymbolKinds=[dt.SymbolKind.File,dt.SymbolKind.Module,dt.SymbolKind.Namespace,dt.SymbolKind.Package,dt.SymbolKind.Class,dt.SymbolKind.Method,dt.SymbolKind.Property,dt.SymbolKind.Field,dt.SymbolKind.Constructor,dt.SymbolKind.Enum,dt.SymbolKind.Interface,dt.SymbolKind.Function,dt.SymbolKind.Variable,dt.SymbolKind.Constant,dt.SymbolKind.String,dt.SymbolKind.Number,dt.SymbolKind.Boolean,dt.SymbolKind.Array,dt.SymbolKind.Object,dt.SymbolKind.Key,dt.SymbolKind.Null,dt.SymbolKind.EnumMember,dt.SymbolKind.Struct,dt.SymbolKind.Event,dt.SymbolKind.Operator,dt.SymbolKind.TypeParameter];wi.SupportedSymbolTags=[dt.SymbolTag.Deprecated];var vg=class extends mg.TextDocumentLanguageFeature{constructor(e){super(e,dt.DocumentSymbolRequest.type)}fillClientCapabilities(e){let n=(0,mg.ensure)((0,mg.ensure)(e,"textDocument"),"documentSymbol");n.dynamicRegistration=!0,n.symbolKind={valueSet:wi.SupportedSymbolKinds},n.hierarchicalDocumentSymbolSupport=!0,n.tagSupport={valueSet:wi.SupportedSymbolTags},n.labelSupport=!0}initialize(e,n){let i=this.getRegistrationOptions(n,e.documentSymbolProvider);i&&this.register({id:eL.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,i={provideDocumentSymbols:(c,u)=>{let l=this._client,f=async(g,C)=>{try{let _=await l.sendRequest(dt.DocumentSymbolRequest.type,l.code2ProtocolConverter.asDocumentSymbolParams(g),C);if(C.isCancellationRequested||_===void 0||_===null)return null;if(_.length===0)return[];{let S=_[0];return dt.DocumentSymbol.is(S)?await l.protocol2CodeConverter.asDocumentSymbols(_,C):await l.protocol2CodeConverter.asSymbolInformations(_,C)}}catch(_){return l.handleFailedRequest(dt.DocumentSymbolRequest.type,C,_,null)}},h=l.middleware;return h.provideDocumentSymbols?h.provideDocumentSymbols(c,u,f):f(c,u)}},s=e.label!==void 0?{label:e.label}:void 0;return[ZA.languages.registerDocumentSymbolProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),i,s),i]}};wi.DocumentSymbolFeature=vg});var lD=K(Ju=>{"use strict";Object.defineProperty(Ju,"__esModule",{value:!0});Ju.WorkspaceSymbolFeature=void 0;var tL=require("vscode"),Ra=xe(),wg=nt(),uD=yg(),nL=qt(),Cg=class extends wg.WorkspaceFeature{constructor(e){super(e,Ra.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let n=(0,wg.ensure)((0,wg.ensure)(e,"workspace"),"symbol");n.dynamicRegistration=!0,n.symbolKind={valueSet:uD.SupportedSymbolKinds},n.tagSupport={valueSet:uD.SupportedSymbolTags},n.resolveSupport={properties:["location.range"]}}initialize(e){e.workspaceSymbolProvider&&this.register({id:nL.generateUuid(),registerOptions:e.workspaceSymbolProvider===!0?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){let n={provideWorkspaceSymbols:(i,s)=>{let c=this._client,u=(f,h)=>c.sendRequest(Ra.WorkspaceSymbolRequest.type,{query:f},h).then(g=>h.isCancellationRequested?null:c.protocol2CodeConverter.asSymbolInformations(g,h),g=>c.handleFailedRequest(Ra.WorkspaceSymbolRequest.type,h,g,null)),l=c.middleware;return l.provideWorkspaceSymbols?l.provideWorkspaceSymbols(i,s,u):u(i,s)},resolveWorkspaceSymbol:e.resolveProvider===!0?(i,s)=>{let c=this._client,u=(f,h)=>c.sendRequest(Ra.WorkspaceSymbolResolveRequest.type,c.code2ProtocolConverter.asWorkspaceSymbol(f),h).then(g=>h.isCancellationRequested?null:c.protocol2CodeConverter.asSymbolInformation(g),g=>c.handleFailedRequest(Ra.WorkspaceSymbolResolveRequest.type,h,g,null)),l=c.middleware;return l.resolveWorkspaceSymbol?l.resolveWorkspaceSymbol(i,s,u):u(i,s)}:void 0};return[tL.languages.registerWorkspaceSymbolProvider(n),n]}};Ju.WorkspaceSymbolFeature=Cg});var dD=K(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});Yu.ReferencesFeature=void 0;var rL=require("vscode"),bg=xe(),_g=nt(),iL=qt(),Tg=class extends _g.TextDocumentLanguageFeature{constructor(e){super(e,bg.ReferencesRequest.type)}fillClientCapabilities(e){(0,_g.ensure)((0,_g.ensure)(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,n){let i=this.getRegistrationOptions(n,e.referencesProvider);i&&this.register({id:iL.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,i={provideReferences:(s,c,u,l)=>{let f=this._client,h=(C,_,S,T)=>f.sendRequest(bg.ReferencesRequest.type,f.code2ProtocolConverter.asReferenceParams(C,_,S),T).then(L=>T.isCancellationRequested?null:f.protocol2CodeConverter.asReferences(L,T),L=>f.handleFailedRequest(bg.ReferencesRequest.type,T,L,null)),g=f.middleware;return g.provideReferences?g.provideReferences(s,c,u,l,h):h(s,c,u,l)}};return[this.registerProvider(n,i),i]}registerProvider(e,n){return rL.languages.registerReferenceProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};Yu.ReferencesFeature=Tg});var fD=K(Zu=>{"use strict";Object.defineProperty(Zu,"__esModule",{value:!0});Zu.CodeActionFeature=void 0;var oL=require("vscode"),qr=xe(),sL=qt(),Dg=nt(),Rg=class extends Dg.TextDocumentLanguageFeature{constructor(e){super(e,qr.CodeActionRequest.type)}fillClientCapabilities(e){let n=(0,Dg.ensure)((0,Dg.ensure)(e,"textDocument"),"codeAction");n.dynamicRegistration=!0,n.isPreferredSupport=!0,n.disabledSupport=!0,n.dataSupport=!0,n.resolveSupport={properties:["edit"]},n.codeActionLiteralSupport={codeActionKind:{valueSet:[qr.CodeActionKind.Empty,qr.CodeActionKind.QuickFix,qr.CodeActionKind.Refactor,qr.CodeActionKind.RefactorExtract,qr.CodeActionKind.RefactorInline,qr.CodeActionKind.RefactorRewrite,qr.CodeActionKind.Source,qr.CodeActionKind.SourceOrganizeImports]}},n.honorsChangeAnnotations=!0}initialize(e,n){let i=this.getRegistrationOptions(n,e.codeActionProvider);i&&this.register({id:sL.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,i={provideCodeActions:(s,c,u,l)=>{let f=this._client,h=async(C,_,S,T)=>{let L={textDocument:f.code2ProtocolConverter.asTextDocumentIdentifier(C),range:f.code2ProtocolConverter.asRange(_),context:f.code2ProtocolConverter.asCodeActionContextSync(S)};return f.sendRequest(qr.CodeActionRequest.type,L,T).then(F=>T.isCancellationRequested||F===null||F===void 0?null:f.protocol2CodeConverter.asCodeActionResult(F,T),F=>f.handleFailedRequest(qr.CodeActionRequest.type,T,F,null))},g=f.middleware;return g.provideCodeActions?g.provideCodeActions(s,c,u,l,h):h(s,c,u,l)},resolveCodeAction:e.resolveProvider?(s,c)=>{let u=this._client,l=this._client.middleware,f=async(h,g)=>u.sendRequest(qr.CodeActionResolveRequest.type,u.code2ProtocolConverter.asCodeActionSync(h),g).then(C=>g.isCancellationRequested?h:u.protocol2CodeConverter.asCodeAction(C,g),C=>u.handleFailedRequest(qr.CodeActionResolveRequest.type,g,C,h));return l.resolveCodeAction?l.resolveCodeAction(s,c,f):f(s,c)}:void 0};return[oL.languages.registerCodeActionsProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),i,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),i]}};Zu.CodeActionFeature=Rg});var hD=K(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});el.CodeLensFeature=void 0;var pD=require("vscode"),ks=xe(),aL=qt(),Sa=nt(),Sg=class extends Sa.TextDocumentLanguageFeature{constructor(e){super(e,ks.CodeLensRequest.type)}fillClientCapabilities(e){(0,Sa.ensure)((0,Sa.ensure)(e,"textDocument"),"codeLens").dynamicRegistration=!0,(0,Sa.ensure)((0,Sa.ensure)(e,"workspace"),"codeLens").refreshSupport=!0}initialize(e,n){this._client.onRequest(ks.CodeLensRefreshRequest.type,async()=>{for(let c of this.getAllProviders())c.onDidChangeCodeLensEmitter.fire()});let s=this.getRegistrationOptions(n,e.codeLensProvider);s&&this.register({id:aL.generateUuid(),registerOptions:s})}registerLanguageProvider(e){let n=e.documentSelector,i=new pD.EventEmitter,s={onDidChangeCodeLenses:i.event,provideCodeLenses:(c,u)=>{let l=this._client,f=(g,C)=>l.sendRequest(ks.CodeLensRequest.type,l.code2ProtocolConverter.asCodeLensParams(g),C).then(_=>C.isCancellationRequested?null:l.protocol2CodeConverter.asCodeLenses(_,C),_=>l.handleFailedRequest(ks.CodeLensRequest.type,C,_,null)),h=l.middleware;return h.provideCodeLenses?h.provideCodeLenses(c,u,f):f(c,u)},resolveCodeLens:e.resolveProvider?(c,u)=>{let l=this._client,f=(g,C)=>l.sendRequest(ks.CodeLensResolveRequest.type,l.code2ProtocolConverter.asCodeLens(g),C).then(_=>C.isCancellationRequested?g:l.protocol2CodeConverter.asCodeLens(_),_=>l.handleFailedRequest(ks.CodeLensResolveRequest.type,C,_,g)),h=l.middleware;return h.resolveCodeLens?h.resolveCodeLens(c,u,f):f(c,u)}:void 0};return[pD.languages.registerCodeLensProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),s),{provider:s,onDidChangeCodeLensEmitter:i}]}};el.CodeLensFeature=Sg});var gD=K(lo=>{"use strict";Object.defineProperty(lo,"__esModule",{value:!0});lo.DocumentOnTypeFormattingFeature=lo.DocumentRangeFormattingFeature=lo.DocumentFormattingFeature=void 0;var tl=require("vscode"),ci=xe(),kg=qt(),Ni=nt(),Is;(function(t){function e(n){let i=tl.workspace.getConfiguration("files",n);return{trimTrailingWhitespace:i.get("trimTrailingWhitespace"),trimFinalNewlines:i.get("trimFinalNewlines"),insertFinalNewline:i.get("insertFinalNewline")}}t.fromConfiguration=e})(Is||(Is={}));var xg=class extends Ni.TextDocumentLanguageFeature{constructor(e){super(e,ci.DocumentFormattingRequest.type)}fillClientCapabilities(e){(0,Ni.ensure)((0,Ni.ensure)(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,n){let i=this.getRegistrationOptions(n,e.documentFormattingProvider);i&&this.register({id:kg.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,i={provideDocumentFormattingEdits:(s,c,u)=>{let l=this._client,f=(g,C,_)=>{let S={textDocument:l.code2ProtocolConverter.asTextDocumentIdentifier(g),options:l.code2ProtocolConverter.asFormattingOptions(C,Is.fromConfiguration(g))};return l.sendRequest(ci.DocumentFormattingRequest.type,S,_).then(T=>_.isCancellationRequested?null:l.protocol2CodeConverter.asTextEdits(T,_),T=>l.handleFailedRequest(ci.DocumentFormattingRequest.type,_,T,null))},h=l.middleware;return h.provideDocumentFormattingEdits?h.provideDocumentFormattingEdits(s,c,u,f):f(s,c,u)}};return[tl.languages.registerDocumentFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),i),i]}};lo.DocumentFormattingFeature=xg;var Pg=class extends Ni.TextDocumentLanguageFeature{constructor(e){super(e,ci.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){let n=(0,Ni.ensure)((0,Ni.ensure)(e,"textDocument"),"rangeFormatting");n.dynamicRegistration=!0,n.rangesSupport=!0}initialize(e,n){let i=this.getRegistrationOptions(n,e.documentRangeFormattingProvider);i&&this.register({id:kg.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,i={provideDocumentRangeFormattingEdits:(s,c,u,l)=>{let f=this._client,h=(C,_,S,T)=>{let L={textDocument:f.code2ProtocolConverter.asTextDocumentIdentifier(C),range:f.code2ProtocolConverter.asRange(_),options:f.code2ProtocolConverter.asFormattingOptions(S,Is.fromConfiguration(C))};return f.sendRequest(ci.DocumentRangeFormattingRequest.type,L,T).then(F=>T.isCancellationRequested?null:f.protocol2CodeConverter.asTextEdits(F,T),F=>f.handleFailedRequest(ci.DocumentRangeFormattingRequest.type,T,F,null))},g=f.middleware;return g.provideDocumentRangeFormattingEdits?g.provideDocumentRangeFormattingEdits(s,c,u,l,h):h(s,c,u,l)}};return e.rangesSupport&&(i.provideDocumentRangesFormattingEdits=(s,c,u,l)=>{let f=this._client,h=(C,_,S,T)=>{let L={textDocument:f.code2ProtocolConverter.asTextDocumentIdentifier(C),ranges:f.code2ProtocolConverter.asRanges(_),options:f.code2ProtocolConverter.asFormattingOptions(S,Is.fromConfiguration(C))};return f.sendRequest(ci.DocumentRangesFormattingRequest.type,L,T).then(F=>T.isCancellationRequested?null:f.protocol2CodeConverter.asTextEdits(F,T),F=>f.handleFailedRequest(ci.DocumentRangesFormattingRequest.type,T,F,null))},g=f.middleware;return g.provideDocumentRangesFormattingEdits?g.provideDocumentRangesFormattingEdits(s,c,u,l,h):h(s,c,u,l)}),[tl.languages.registerDocumentRangeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),i),i]}};lo.DocumentRangeFormattingFeature=Pg;var Eg=class extends Ni.TextDocumentLanguageFeature{constructor(e){super(e,ci.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){(0,Ni.ensure)((0,Ni.ensure)(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,n){let i=this.getRegistrationOptions(n,e.documentOnTypeFormattingProvider);i&&this.register({id:kg.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,i={provideOnTypeFormattingEdits:(c,u,l,f,h)=>{let g=this._client,C=(S,T,L,F,H)=>{let B={textDocument:g.code2ProtocolConverter.asTextDocumentIdentifier(S),position:g.code2ProtocolConverter.asPosition(T),ch:L,options:g.code2ProtocolConverter.asFormattingOptions(F,Is.fromConfiguration(S))};return g.sendRequest(ci.DocumentOnTypeFormattingRequest.type,B,H).then(U=>H.isCancellationRequested?null:g.protocol2CodeConverter.asTextEdits(U,H),U=>g.handleFailedRequest(ci.DocumentOnTypeFormattingRequest.type,H,U,null))},_=g.middleware;return _.provideOnTypeFormattingEdits?_.provideOnTypeFormattingEdits(c,u,l,f,h,C):C(c,u,l,f,h)}},s=e.moreTriggerCharacter||[];return[tl.languages.registerOnTypeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),i,e.firstTriggerCharacter,...s),i]}};lo.DocumentOnTypeFormattingFeature=Eg});var vD=K(nl=>{"use strict";Object.defineProperty(nl,"__esModule",{value:!0});nl.RenameFeature=void 0;var cL=require("vscode"),Ao=xe(),uL=qt(),mD=cr(),Ig=nt(),Og=class extends Ig.TextDocumentLanguageFeature{constructor(e){super(e,Ao.RenameRequest.type)}fillClientCapabilities(e){let n=(0,Ig.ensure)((0,Ig.ensure)(e,"textDocument"),"rename");n.dynamicRegistration=!0,n.prepareSupport=!0,n.prepareSupportDefaultBehavior=Ao.PrepareSupportDefaultBehavior.Identifier,n.honorsChangeAnnotations=!0}initialize(e,n){let i=this.getRegistrationOptions(n,e.renameProvider);i&&(mD.boolean(e.renameProvider)&&(i.prepareProvider=!1),this.register({id:uL.generateUuid(),registerOptions:i}))}registerLanguageProvider(e){let n=e.documentSelector,i={provideRenameEdits:(s,c,u,l)=>{let f=this._client,h=(C,_,S,T)=>{let L={textDocument:f.code2ProtocolConverter.asTextDocumentIdentifier(C),position:f.code2ProtocolConverter.asPosition(_),newName:S};return f.sendRequest(Ao.RenameRequest.type,L,T).then(F=>T.isCancellationRequested?null:f.protocol2CodeConverter.asWorkspaceEdit(F,T),F=>f.handleFailedRequest(Ao.RenameRequest.type,T,F,null,!1))},g=f.middleware;return g.provideRenameEdits?g.provideRenameEdits(s,c,u,l,h):h(s,c,u,l)},prepareRename:e.prepareProvider?(s,c,u)=>{let l=this._client,f=(g,C,_)=>{let S={textDocument:l.code2ProtocolConverter.asTextDocumentIdentifier(g),position:l.code2ProtocolConverter.asPosition(C)};return l.sendRequest(Ao.PrepareRenameRequest.type,S,_).then(T=>_.isCancellationRequested?null:Ao.Range.is(T)?l.protocol2CodeConverter.asRange(T):this.isDefaultBehavior(T)?T.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):T&&Ao.Range.is(T.range)?{range:l.protocol2CodeConverter.asRange(T.range),placeholder:T.placeholder}:Promise.reject(new Error("The element can't be renamed.")),T=>{throw typeof T.message=="string"?new Error(T.message):new Error("The element can't be renamed.")})},h=l.middleware;return h.prepareRename?h.prepareRename(s,c,u,f):f(s,c,u)}:void 0};return[this.registerProvider(n,i),i]}registerProvider(e,n){return cL.languages.registerRenameProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}isDefaultBehavior(e){let n=e;return n&&mD.boolean(n.defaultBehavior)}};nl.RenameFeature=Og});var yD=K(rl=>{"use strict";Object.defineProperty(rl,"__esModule",{value:!0});rl.DocumentLinkFeature=void 0;var lL=require("vscode"),xa=xe(),qg=nt(),dL=qt(),Fg=class extends qg.TextDocumentLanguageFeature{constructor(e){super(e,xa.DocumentLinkRequest.type)}fillClientCapabilities(e){let n=(0,qg.ensure)((0,qg.ensure)(e,"textDocument"),"documentLink");n.dynamicRegistration=!0,n.tooltipSupport=!0}initialize(e,n){let i=this.getRegistrationOptions(n,e.documentLinkProvider);i&&this.register({id:dL.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,i={provideDocumentLinks:(s,c)=>{let u=this._client,l=(h,g)=>u.sendRequest(xa.DocumentLinkRequest.type,u.code2ProtocolConverter.asDocumentLinkParams(h),g).then(C=>g.isCancellationRequested?null:u.protocol2CodeConverter.asDocumentLinks(C,g),C=>u.handleFailedRequest(xa.DocumentLinkRequest.type,g,C,null)),f=u.middleware;return f.provideDocumentLinks?f.provideDocumentLinks(s,c,l):l(s,c)},resolveDocumentLink:e.resolveProvider?(s,c)=>{let u=this._client,l=(h,g)=>u.sendRequest(xa.DocumentLinkResolveRequest.type,u.code2ProtocolConverter.asDocumentLink(h),g).then(C=>g.isCancellationRequested?h:u.protocol2CodeConverter.asDocumentLink(C),C=>u.handleFailedRequest(xa.DocumentLinkResolveRequest.type,g,C,h)),f=u.middleware;return f.resolveDocumentLink?f.resolveDocumentLink(s,c,l):l(s,c)}:void 0};return[lL.languages.registerDocumentLinkProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),i),i]}};rl.DocumentLinkFeature=Fg});var CD=K(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});il.ExecuteCommandFeature=void 0;var fL=require("vscode"),Ag=xe(),pL=qt(),wD=nt(),Lg=class{constructor(e){this._client=e,this._commands=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._commands.size>0}}get registrationType(){return Ag.ExecuteCommandRequest.type}fillClientCapabilities(e){(0,wD.ensure)((0,wD.ensure)(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){e.executeCommandProvider&&this.register({id:pL.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){let n=this._client,i=n.middleware,s=(c,u)=>{let l={command:c,arguments:u};return n.sendRequest(Ag.ExecuteCommandRequest.type,l).then(void 0,f=>n.handleFailedRequest(Ag.ExecuteCommandRequest.type,void 0,f,void 0))};if(e.registerOptions.commands){let c=[];for(let u of e.registerOptions.commands)c.push(fL.commands.registerCommand(u,(...l)=>i.executeCommand?i.executeCommand(u,l,s):s(u,l)));this._commands.set(e.id,c)}}unregister(e){let n=this._commands.get(e);n&&n.forEach(i=>i.dispose())}clear(){this._commands.forEach(e=>{e.forEach(n=>n.dispose())}),this._commands.clear()}};il.ExecuteCommandFeature=Lg});var bD=K(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:!0});sl.FileSystemWatcherFeature=void 0;var hL=require("vscode"),Lo=xe(),ol=nt(),Mg=class{constructor(e,n){this._client=e,this._notifyFileEvent=n,this._watchers=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._watchers.size>0}}get registrationType(){return Lo.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){(0,ol.ensure)((0,ol.ensure)(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0,(0,ol.ensure)((0,ol.ensure)(e,"workspace"),"didChangeWatchedFiles").relativePatternSupport=!0}initialize(e,n){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;let n=[];for(let i of e.registerOptions.watchers){let s=this._client.protocol2CodeConverter.asGlobPattern(i.globPattern);if(s===void 0)continue;let c=!0,u=!0,l=!0;i.kind!==void 0&&i.kind!==null&&(c=(i.kind&Lo.WatchKind.Create)!==0,u=(i.kind&Lo.WatchKind.Change)!==0,l=(i.kind&Lo.WatchKind.Delete)!==0);let f=hL.workspace.createFileSystemWatcher(s,!c,!u,!l);this.hookListeners(f,c,u,l,n),n.push(f)}this._watchers.set(e.id,n)}registerRaw(e,n){let i=[];for(let s of n)this.hookListeners(s,!0,!0,!0,i);this._watchers.set(e,i)}hookListeners(e,n,i,s,c){n&&e.onDidCreate(u=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(u),type:Lo.FileChangeType.Created}),null,c),i&&e.onDidChange(u=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(u),type:Lo.FileChangeType.Changed}),null,c),s&&e.onDidDelete(u=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(u),type:Lo.FileChangeType.Deleted}),null,c)}unregister(e){let n=this._watchers.get(e);if(n)for(let i of n)i.dispose()}clear(){this._watchers.forEach(e=>{for(let n of e)n.dispose()}),this._watchers.clear()}};sl.FileSystemWatcherFeature=Mg});var _D=K(al=>{"use strict";Object.defineProperty(al,"__esModule",{value:!0});al.ColorProviderFeature=void 0;var gL=require("vscode"),Pa=xe(),Ng=nt(),$g=class extends Ng.TextDocumentLanguageFeature{constructor(e){super(e,Pa.DocumentColorRequest.type)}fillClientCapabilities(e){(0,Ng.ensure)((0,Ng.ensure)(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,n){let[i,s]=this.getRegistration(n,e.colorProvider);!i||!s||this.register({id:i,registerOptions:s})}registerLanguageProvider(e){let n=e.documentSelector,i={provideColorPresentations:(s,c,u)=>{let l=this._client,f=(g,C,_)=>{let S={color:g,textDocument:l.code2ProtocolConverter.asTextDocumentIdentifier(C.document),range:l.code2ProtocolConverter.asRange(C.range)};return l.sendRequest(Pa.ColorPresentationRequest.type,S,_).then(T=>_.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorPresentations(T,_),T=>l.handleFailedRequest(Pa.ColorPresentationRequest.type,_,T,null))},h=l.middleware;return h.provideColorPresentations?h.provideColorPresentations(s,c,u,f):f(s,c,u)},provideDocumentColors:(s,c)=>{let u=this._client,l=(h,g)=>{let C={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(h)};return u.sendRequest(Pa.DocumentColorRequest.type,C,g).then(_=>g.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorInformations(_,g),_=>u.handleFailedRequest(Pa.DocumentColorRequest.type,g,_,null))},f=u.middleware;return f.provideDocumentColors?f.provideDocumentColors(s,c,l):l(s,c)}};return[gL.languages.registerColorProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),i),i]}};al.ColorProviderFeature=$g});var TD=K(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});cl.ImplementationFeature=void 0;var mL=require("vscode"),Ug=xe(),Hg=nt(),Wg=class extends Hg.TextDocumentLanguageFeature{constructor(e){super(e,Ug.ImplementationRequest.type)}fillClientCapabilities(e){let n=(0,Hg.ensure)((0,Hg.ensure)(e,"textDocument"),"implementation");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let[i,s]=this.getRegistration(n,e.implementationProvider);!i||!s||this.register({id:i,registerOptions:s})}registerLanguageProvider(e){let n=e.documentSelector,i={provideImplementation:(s,c,u)=>{let l=this._client,f=(g,C,_)=>l.sendRequest(Ug.ImplementationRequest.type,l.code2ProtocolConverter.asTextDocumentPositionParams(g,C),_).then(S=>_.isCancellationRequested?null:l.protocol2CodeConverter.asDefinitionResult(S,_),S=>l.handleFailedRequest(Ug.ImplementationRequest.type,_,S,null)),h=l.middleware;return h.provideImplementation?h.provideImplementation(s,c,u,f):f(s,c,u)}};return[this.registerProvider(n,i),i]}registerProvider(e,n){return mL.languages.registerImplementationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};cl.ImplementationFeature=Wg});var DD=K(ul=>{"use strict";Object.defineProperty(ul,"__esModule",{value:!0});ul.TypeDefinitionFeature=void 0;var vL=require("vscode"),jg=xe(),Ea=nt(),zg=class extends Ea.TextDocumentLanguageFeature{constructor(e){super(e,jg.TypeDefinitionRequest.type)}fillClientCapabilities(e){(0,Ea.ensure)((0,Ea.ensure)(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let n=(0,Ea.ensure)((0,Ea.ensure)(e,"textDocument"),"typeDefinition");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let[i,s]=this.getRegistration(n,e.typeDefinitionProvider);!i||!s||this.register({id:i,registerOptions:s})}registerLanguageProvider(e){let n=e.documentSelector,i={provideTypeDefinition:(s,c,u)=>{let l=this._client,f=(g,C,_)=>l.sendRequest(jg.TypeDefinitionRequest.type,l.code2ProtocolConverter.asTextDocumentPositionParams(g,C),_).then(S=>_.isCancellationRequested?null:l.protocol2CodeConverter.asDefinitionResult(S,_),S=>l.handleFailedRequest(jg.TypeDefinitionRequest.type,_,S,null)),h=l.middleware;return h.provideTypeDefinition?h.provideTypeDefinition(s,c,u,f):f(s,c,u)}};return[this.registerProvider(n,i),i]}registerProvider(e,n){return vL.languages.registerTypeDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};ul.TypeDefinitionFeature=zg});var RD=K(Os=>{"use strict";Object.defineProperty(Os,"__esModule",{value:!0});Os.WorkspaceFoldersFeature=Os.arrayDiff=void 0;var yL=qt(),ll=require("vscode"),ka=xe();function Kg(t,e){if(t!=null)return t[e]}function Bg(t,e){return t.filter(n=>e.indexOf(n)<0)}Os.arrayDiff=Bg;var Vg=class{constructor(e){this._client=e,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return ka.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let n=ll.workspace.workspaceFolders;this.initializeWithFolders(n),n===void 0?e.workspaceFolders=null:e.workspaceFolders=n.map(i=>this.asProtocol(i))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let n=this._client;n.onRequest(ka.WorkspaceFoldersRequest.type,c=>{let u=()=>{let f=ll.workspace.workspaceFolders;return f===void 0?null:f.map(g=>this.asProtocol(g))},l=n.middleware.workspace;return l&&l.workspaceFolders?l.workspaceFolders(c,u):u(c)});let i=Kg(Kg(Kg(e,"workspace"),"workspaceFolders"),"changeNotifications"),s;typeof i=="string"?s=i:i===!0&&(s=yL.generateUuid()),s&&this.register({id:s,registerOptions:void 0})}sendInitialEvent(e){let n;if(this._initialFolders&&e){let i=Bg(this._initialFolders,e),s=Bg(e,this._initialFolders);(s.length>0||i.length>0)&&(n=this.doSendEvent(s,i))}else this._initialFolders?n=this.doSendEvent([],this._initialFolders):e&&(n=this.doSendEvent(e,[]));n!==void 0&&n.catch(i=>{this._client.error(`Sending notification ${ka.DidChangeWorkspaceFoldersNotification.type.method} failed`,i)})}doSendEvent(e,n){let i={event:{added:e.map(s=>this.asProtocol(s)),removed:n.map(s=>this.asProtocol(s))}};return this._client.sendNotification(ka.DidChangeWorkspaceFoldersNotification.type,i)}register(e){let n=e.id,i=this._client,s=ll.workspace.onDidChangeWorkspaceFolders(c=>{let u=h=>this.doSendEvent(h.added,h.removed),l=i.middleware.workspace;(l&&l.didChangeWorkspaceFolders?l.didChangeWorkspaceFolders(c,u):u(c)).catch(h=>{this._client.error(`Sending notification ${ka.DidChangeWorkspaceFoldersNotification.type.method} failed`,h)})});this._listeners.set(n,s),this.sendInitialEvent(ll.workspace.workspaceFolders)}unregister(e){let n=this._listeners.get(e);n!==void 0&&(this._listeners.delete(e),n.dispose())}clear(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};Os.WorkspaceFoldersFeature=Vg});var xD=K(dl=>{"use strict";Object.defineProperty(dl,"__esModule",{value:!0});dl.FoldingRangeFeature=void 0;var SD=require("vscode"),Mo=xe(),Ia=nt(),Gg=class extends Ia.TextDocumentLanguageFeature{constructor(e){super(e,Mo.FoldingRangeRequest.type)}fillClientCapabilities(e){let n=(0,Ia.ensure)((0,Ia.ensure)(e,"textDocument"),"foldingRange");n.dynamicRegistration=!0,n.rangeLimit=5e3,n.lineFoldingOnly=!0,n.foldingRangeKind={valueSet:[Mo.FoldingRangeKind.Comment,Mo.FoldingRangeKind.Imports,Mo.FoldingRangeKind.Region]},n.foldingRange={collapsedText:!1},(0,Ia.ensure)((0,Ia.ensure)(e,"workspace"),"foldingRange").refreshSupport=!0}initialize(e,n){this._client.onRequest(Mo.FoldingRangeRefreshRequest.type,async()=>{for(let c of this.getAllProviders())c.onDidChangeFoldingRange.fire()});let[i,s]=this.getRegistration(n,e.foldingRangeProvider);!i||!s||this.register({id:i,registerOptions:s})}registerLanguageProvider(e){let n=e.documentSelector,i=new SD.EventEmitter,s={onDidChangeFoldingRanges:i.event,provideFoldingRanges:(c,u,l)=>{let f=this._client,h=(C,_,S)=>{let T={textDocument:f.code2ProtocolConverter.asTextDocumentIdentifier(C)};return f.sendRequest(Mo.FoldingRangeRequest.type,T,S).then(L=>S.isCancellationRequested?null:f.protocol2CodeConverter.asFoldingRanges(L,S),L=>f.handleFailedRequest(Mo.FoldingRangeRequest.type,S,L,null))},g=f.middleware;return g.provideFoldingRanges?g.provideFoldingRanges(c,u,l,h):h(c,u,l)}};return[SD.languages.registerFoldingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),s),{provider:s,onDidChangeFoldingRange:i}]}};dl.FoldingRangeFeature=Gg});var PD=K(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});fl.DeclarationFeature=void 0;var wL=require("vscode"),Xg=xe(),Qg=nt(),Jg=class extends Qg.TextDocumentLanguageFeature{constructor(e){super(e,Xg.DeclarationRequest.type)}fillClientCapabilities(e){let n=(0,Qg.ensure)((0,Qg.ensure)(e,"textDocument"),"declaration");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let[i,s]=this.getRegistration(n,e.declarationProvider);!i||!s||this.register({id:i,registerOptions:s})}registerLanguageProvider(e){let n=e.documentSelector,i={provideDeclaration:(s,c,u)=>{let l=this._client,f=(g,C,_)=>l.sendRequest(Xg.DeclarationRequest.type,l.code2ProtocolConverter.asTextDocumentPositionParams(g,C),_).then(S=>_.isCancellationRequested?null:l.protocol2CodeConverter.asDeclarationResult(S,_),S=>l.handleFailedRequest(Xg.DeclarationRequest.type,_,S,null)),h=l.middleware;return h.provideDeclaration?h.provideDeclaration(s,c,u,f):f(s,c,u)}};return[this.registerProvider(n,i),i]}registerProvider(e,n){return wL.languages.registerDeclarationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};fl.DeclarationFeature=Jg});var ED=K(pl=>{"use strict";Object.defineProperty(pl,"__esModule",{value:!0});pl.SelectionRangeFeature=void 0;var CL=require("vscode"),Yg=xe(),Zg=nt(),em=class extends Zg.TextDocumentLanguageFeature{constructor(e){super(e,Yg.SelectionRangeRequest.type)}fillClientCapabilities(e){let n=(0,Zg.ensure)((0,Zg.ensure)(e,"textDocument"),"selectionRange");n.dynamicRegistration=!0}initialize(e,n){let[i,s]=this.getRegistration(n,e.selectionRangeProvider);!i||!s||this.register({id:i,registerOptions:s})}registerLanguageProvider(e){let n=e.documentSelector,i={provideSelectionRanges:(s,c,u)=>{let l=this._client,f=async(g,C,_)=>{let S={textDocument:l.code2ProtocolConverter.asTextDocumentIdentifier(g),positions:l.code2ProtocolConverter.asPositionsSync(C,_)};return l.sendRequest(Yg.SelectionRangeRequest.type,S,_).then(T=>_.isCancellationRequested?null:l.protocol2CodeConverter.asSelectionRanges(T,_),T=>l.handleFailedRequest(Yg.SelectionRangeRequest.type,_,T,null))},h=l.middleware;return h.provideSelectionRanges?h.provideSelectionRanges(s,c,u,f):f(s,c,u)}};return[this.registerProvider(n,i),i]}registerProvider(e,n){return CL.languages.registerSelectionRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};pl.SelectionRangeFeature=em});var ID=K(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});hl.ProgressFeature=void 0;var kD=xe(),bL=xh();function _L(t,e){return t[e]===void 0&&(t[e]=Object.create(null)),t[e]}var tm=class{constructor(e){this._client=e,this.activeParts=new Set}getState(){return{kind:"window",id:kD.WorkDoneProgressCreateRequest.method,registrations:this.activeParts.size>0}}fillClientCapabilities(e){_L(e,"window").workDoneProgress=!0}initialize(){let e=this._client,n=s=>{this.activeParts.delete(s)},i=s=>{this.activeParts.add(new bL.ProgressPart(this._client,s.token,n))};e.onRequest(kD.WorkDoneProgressCreateRequest.type,i)}clear(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};hl.ProgressFeature=tm});var OD=K(gl=>{"use strict";Object.defineProperty(gl,"__esModule",{value:!0});gl.CallHierarchyFeature=void 0;var TL=require("vscode"),No=xe(),nm=nt(),rm=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareCallHierarchy(e,n,i){let s=this.client,c=this.middleware,u=(l,f,h)=>{let g=s.code2ProtocolConverter.asTextDocumentPositionParams(l,f);return s.sendRequest(No.CallHierarchyPrepareRequest.type,g,h).then(C=>h.isCancellationRequested?null:s.protocol2CodeConverter.asCallHierarchyItems(C,h),C=>s.handleFailedRequest(No.CallHierarchyPrepareRequest.type,h,C,null))};return c.prepareCallHierarchy?c.prepareCallHierarchy(e,n,i,u):u(e,n,i)}provideCallHierarchyIncomingCalls(e,n){let i=this.client,s=this.middleware,c=(u,l)=>{let f={item:i.code2ProtocolConverter.asCallHierarchyItem(u)};return i.sendRequest(No.CallHierarchyIncomingCallsRequest.type,f,l).then(h=>l.isCancellationRequested?null:i.protocol2CodeConverter.asCallHierarchyIncomingCalls(h,l),h=>i.handleFailedRequest(No.CallHierarchyIncomingCallsRequest.type,l,h,null))};return s.provideCallHierarchyIncomingCalls?s.provideCallHierarchyIncomingCalls(e,n,c):c(e,n)}provideCallHierarchyOutgoingCalls(e,n){let i=this.client,s=this.middleware,c=(u,l)=>{let f={item:i.code2ProtocolConverter.asCallHierarchyItem(u)};return i.sendRequest(No.CallHierarchyOutgoingCallsRequest.type,f,l).then(h=>l.isCancellationRequested?null:i.protocol2CodeConverter.asCallHierarchyOutgoingCalls(h,l),h=>i.handleFailedRequest(No.CallHierarchyOutgoingCallsRequest.type,l,h,null))};return s.provideCallHierarchyOutgoingCalls?s.provideCallHierarchyOutgoingCalls(e,n,c):c(e,n)}},im=class extends nm.TextDocumentLanguageFeature{constructor(e){super(e,No.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let n=e,i=(0,nm.ensure)((0,nm.ensure)(n,"textDocument"),"callHierarchy");i.dynamicRegistration=!0}initialize(e,n){let[i,s]=this.getRegistration(n,e.callHierarchyProvider);!i||!s||this.register({id:i,registerOptions:s})}registerLanguageProvider(e){let n=this._client,i=new rm(n);return[TL.languages.registerCallHierarchyProvider(this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector),i),i]}};gl.CallHierarchyFeature=im});var qD=K(vl=>{"use strict";Object.defineProperty(vl,"__esModule",{value:!0});vl.SemanticTokensFeature=void 0;var ml=require("vscode"),Fe=xe(),Oa=nt(),DL=cr(),om=class extends Oa.TextDocumentLanguageFeature{constructor(e){super(e,Fe.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let n=(0,Oa.ensure)((0,Oa.ensure)(e,"textDocument"),"semanticTokens");n.dynamicRegistration=!0,n.tokenTypes=[Fe.SemanticTokenTypes.namespace,Fe.SemanticTokenTypes.type,Fe.SemanticTokenTypes.class,Fe.SemanticTokenTypes.enum,Fe.SemanticTokenTypes.interface,Fe.SemanticTokenTypes.struct,Fe.SemanticTokenTypes.typeParameter,Fe.SemanticTokenTypes.parameter,Fe.SemanticTokenTypes.variable,Fe.SemanticTokenTypes.property,Fe.SemanticTokenTypes.enumMember,Fe.SemanticTokenTypes.event,Fe.SemanticTokenTypes.function,Fe.SemanticTokenTypes.method,Fe.SemanticTokenTypes.macro,Fe.SemanticTokenTypes.keyword,Fe.SemanticTokenTypes.modifier,Fe.SemanticTokenTypes.comment,Fe.SemanticTokenTypes.string,Fe.SemanticTokenTypes.number,Fe.SemanticTokenTypes.regexp,Fe.SemanticTokenTypes.operator,Fe.SemanticTokenTypes.decorator],n.tokenModifiers=[Fe.SemanticTokenModifiers.declaration,Fe.SemanticTokenModifiers.definition,Fe.SemanticTokenModifiers.readonly,Fe.SemanticTokenModifiers.static,Fe.SemanticTokenModifiers.deprecated,Fe.SemanticTokenModifiers.abstract,Fe.SemanticTokenModifiers.async,Fe.SemanticTokenModifiers.modification,Fe.SemanticTokenModifiers.documentation,Fe.SemanticTokenModifiers.defaultLibrary],n.formats=[Fe.TokenFormat.Relative],n.requests={range:!0,full:{delta:!0}},n.multilineTokenSupport=!1,n.overlappingTokenSupport=!1,n.serverCancelSupport=!0,n.augmentsSyntaxTokens=!0,(0,Oa.ensure)((0,Oa.ensure)(e,"workspace"),"semanticTokens").refreshSupport=!0}initialize(e,n){this._client.onRequest(Fe.SemanticTokensRefreshRequest.type,async()=>{for(let u of this.getAllProviders())u.onDidChangeSemanticTokensEmitter.fire()});let[s,c]=this.getRegistration(n,e.semanticTokensProvider);!s||!c||this.register({id:s,registerOptions:c})}registerLanguageProvider(e){let n=e.documentSelector,i=DL.boolean(e.full)?e.full:e.full!==void 0,s=e.full!==void 0&&typeof e.full!="boolean"&&e.full.delta===!0,c=new ml.EventEmitter,u=i?{onDidChangeSemanticTokens:c.event,provideDocumentSemanticTokens:(S,T)=>{let L=this._client,F=L.middleware,H=(B,U)=>{let ee={textDocument:L.code2ProtocolConverter.asTextDocumentIdentifier(B)};return L.sendRequest(Fe.SemanticTokensRequest.type,ee,U).then(oe=>U.isCancellationRequested?null:L.protocol2CodeConverter.asSemanticTokens(oe,U),oe=>L.handleFailedRequest(Fe.SemanticTokensRequest.type,U,oe,null))};return F.provideDocumentSemanticTokens?F.provideDocumentSemanticTokens(S,T,H):H(S,T)},provideDocumentSemanticTokensEdits:s?(S,T,L)=>{let F=this._client,H=F.middleware,B=(U,ee,oe)=>{let ye={textDocument:F.code2ProtocolConverter.asTextDocumentIdentifier(U),previousResultId:ee};return F.sendRequest(Fe.SemanticTokensDeltaRequest.type,ye,oe).then(async se=>oe.isCancellationRequested?null:Fe.SemanticTokens.is(se)?await F.protocol2CodeConverter.asSemanticTokens(se,oe):await F.protocol2CodeConverter.asSemanticTokensEdits(se,oe),se=>F.handleFailedRequest(Fe.SemanticTokensDeltaRequest.type,oe,se,null))};return H.provideDocumentSemanticTokensEdits?H.provideDocumentSemanticTokensEdits(S,T,L,B):B(S,T,L)}:void 0}:void 0,f=e.range===!0?{provideDocumentRangeSemanticTokens:(S,T,L)=>{let F=this._client,H=F.middleware,B=(U,ee,oe)=>{let ye={textDocument:F.code2ProtocolConverter.asTextDocumentIdentifier(U),range:F.code2ProtocolConverter.asRange(ee)};return F.sendRequest(Fe.SemanticTokensRangeRequest.type,ye,oe).then(se=>oe.isCancellationRequested?null:F.protocol2CodeConverter.asSemanticTokens(se,oe),se=>F.handleFailedRequest(Fe.SemanticTokensRangeRequest.type,oe,se,null))};return H.provideDocumentRangeSemanticTokens?H.provideDocumentRangeSemanticTokens(S,T,L,B):B(S,T,L)}}:void 0,h=[],g=this._client,C=g.protocol2CodeConverter.asSemanticTokensLegend(e.legend),_=g.protocol2CodeConverter.asDocumentSelector(n);return u!==void 0&&h.push(ml.languages.registerDocumentSemanticTokensProvider(_,u,C)),f!==void 0&&h.push(ml.languages.registerDocumentRangeSemanticTokensProvider(_,f,C)),[new ml.Disposable(()=>h.forEach(S=>S.dispose())),{range:f,full:u,onDidChangeSemanticTokensEmitter:c}]}};vl.SemanticTokensFeature=om});var LD=K(hr=>{"use strict";Object.defineProperty(hr,"__esModule",{value:!0});hr.WillDeleteFilesFeature=hr.WillRenameFilesFeature=hr.WillCreateFilesFeature=hr.DidDeleteFilesFeature=hr.DidRenameFilesFeature=hr.DidCreateFilesFeature=void 0;var Zr=require("vscode"),RL=$u(),$i=xe(),SL=qt();function FD(t,e){return t[e]===void 0&&(t[e]={}),t[e]}function xL(t,e){return t[e]}function AD(t,e,n){t[e]=n}var qa=class t{constructor(e,n,i,s,c){this._client=e,this._event=n,this._registrationType=i,this._clientCapability=s,this._serverCapability=c,this._filters=new Map}getState(){return{kind:"workspace",id:this._registrationType.method,registrations:this._filters.size>0}}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities(e){let n=FD(FD(e,"workspace"),"fileOperations");AD(n,"dynamicRegistration",!0),AD(n,this._clientCapability,!0)}initialize(e){let n=e.workspace?.fileOperations,i=n!==void 0?xL(n,this._serverCapability):void 0;if(i?.filters!==void 0)try{this.register({id:SL.generateUuid(),registerOptions:{filters:i.filters}})}catch(s){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${s}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let n=e.registerOptions.filters.map(i=>{let s=new RL.Minimatch(i.pattern.glob,t.asMinimatchOptions(i.pattern.options));if(!s.makeRe())throw new Error(`Invalid pattern ${i.pattern.glob}!`);return{scheme:i.scheme,matcher:s,kind:i.pattern.matches}});this._filters.set(e.id,n)}unregister(e){this._filters.delete(e),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}clear(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getFileType(e){return t.getFileType(e)}async filter(e,n){let i=await Promise.all(e.files.map(async c=>{let u=n(c),l=u.fsPath.replace(/\\/g,"/");for(let f of this._filters.values())for(let h of f)if(!(h.scheme!==void 0&&h.scheme!==u.scheme)){if(h.matcher.match(l)){if(h.kind===void 0)return!0;let g=await this.getFileType(u);if(g===void 0)return this._client.error(`Failed to determine file type for ${u.toString()}.`),!0;if(g===Zr.FileType.File&&h.kind===$i.FileOperationPatternKind.file||g===Zr.FileType.Directory&&h.kind===$i.FileOperationPatternKind.folder)return!0}else if(h.kind===$i.FileOperationPatternKind.folder&&await t.getFileType(u)===Zr.FileType.Directory&&h.matcher.match(`${l}/`))return!0}return!1})),s=e.files.filter((c,u)=>i[u]);return{...e,files:s}}static async getFileType(e){try{return(await Zr.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){let n={dot:!0};return e?.ignoreCase===!0&&(n.nocase=!0),n}},yl=class extends qa{constructor(e,n,i,s,c,u,l){super(e,n,i,s,c),this._notificationType=i,this._accessUri=u,this._createParams=l}async send(e){let n=await this.filter(e,this._accessUri);if(n.files.length){let i=async s=>this._client.sendNotification(this._notificationType,this._createParams(s));return this.doSend(n,i)}}},wl=class extends yl{constructor(){super(...arguments),this._fsPathFileTypes=new Map}async getFileType(e){let n=e.fsPath;if(this._fsPathFileTypes.has(n))return this._fsPathFileTypes.get(n);let i=await qa.getFileType(e);return i&&this._fsPathFileTypes.set(n,i),i}async cacheFileTypes(e,n){await this.filter(e,n)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister(e){super.unregister(e),this.filterSize()===0&&this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}clear(){super.clear(),this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}},sm=class extends yl{constructor(e){super(e,Zr.workspace.onDidCreateFiles,$i.DidCreateFilesNotification.type,"didCreate","didCreate",n=>n,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,n){let i=this._client.middleware.workspace;return i?.didCreateFiles?i.didCreateFiles(e,n):n(e)}};hr.DidCreateFilesFeature=sm;var am=class extends wl{constructor(e){super(e,Zr.workspace.onDidRenameFiles,$i.DidRenameFilesNotification.type,"didRename","didRename",n=>n.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}register(e){this._willListener||(this._willListener=Zr.workspace.onWillRenameFiles(this.willRename,this)),super.register(e)}willRename(e){e.waitUntil(this.cacheFileTypes(e,n=>n.oldUri))}doSend(e,n){this.clearFileTypeCache();let i=this._client.middleware.workspace;return i?.didRenameFiles?i.didRenameFiles(e,n):n(e)}};hr.DidRenameFilesFeature=am;var cm=class extends wl{constructor(e){super(e,Zr.workspace.onDidDeleteFiles,$i.DidDeleteFilesNotification.type,"didDelete","didDelete",n=>n,e.code2ProtocolConverter.asDidDeleteFilesParams)}register(e){this._willListener||(this._willListener=Zr.workspace.onWillDeleteFiles(this.willDelete,this)),super.register(e)}willDelete(e){e.waitUntil(this.cacheFileTypes(e,n=>n))}doSend(e,n){this.clearFileTypeCache();let i=this._client.middleware.workspace;return i?.didDeleteFiles?i.didDeleteFiles(e,n):n(e)}};hr.DidDeleteFilesFeature=cm;var Fa=class extends qa{constructor(e,n,i,s,c,u,l){super(e,n,i,s,c),this._requestType=i,this._accessUri=u,this._createParams=l}async send(e){let n=this.waitUntil(e);e.waitUntil(n)}async waitUntil(e){let n=await this.filter(e,this._accessUri);if(n.files.length){let i=s=>this._client.sendRequest(this._requestType,this._createParams(s),s.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(n,i)}else return}},um=class extends Fa{constructor(e){super(e,Zr.workspace.onWillCreateFiles,$i.WillCreateFilesRequest.type,"willCreate","willCreate",n=>n,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,n){let i=this._client.middleware.workspace;return i?.willCreateFiles?i.willCreateFiles(e,n):n(e)}};hr.WillCreateFilesFeature=um;var lm=class extends Fa{constructor(e){super(e,Zr.workspace.onWillRenameFiles,$i.WillRenameFilesRequest.type,"willRename","willRename",n=>n.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,n){let i=this._client.middleware.workspace;return i?.willRenameFiles?i.willRenameFiles(e,n):n(e)}};hr.WillRenameFilesFeature=lm;var dm=class extends Fa{constructor(e){super(e,Zr.workspace.onWillDeleteFiles,$i.WillDeleteFilesRequest.type,"willDelete","willDelete",n=>n,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,n){let i=this._client.middleware.workspace;return i?.willDeleteFiles?i.willDeleteFiles(e,n):n(e)}};hr.WillDeleteFilesFeature=dm});var MD=K(Cl=>{"use strict";Object.defineProperty(Cl,"__esModule",{value:!0});Cl.LinkedEditingFeature=void 0;var PL=require("vscode"),fm=xe(),pm=nt(),hm=class extends pm.TextDocumentLanguageFeature{constructor(e){super(e,fm.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let n=(0,pm.ensure)((0,pm.ensure)(e,"textDocument"),"linkedEditingRange");n.dynamicRegistration=!0}initialize(e,n){let[i,s]=this.getRegistration(n,e.linkedEditingRangeProvider);!i||!s||this.register({id:i,registerOptions:s})}registerLanguageProvider(e){let n=e.documentSelector,i={provideLinkedEditingRanges:(s,c,u)=>{let l=this._client,f=(g,C,_)=>l.sendRequest(fm.LinkedEditingRangeRequest.type,l.code2ProtocolConverter.asTextDocumentPositionParams(g,C),_).then(S=>_.isCancellationRequested?null:l.protocol2CodeConverter.asLinkedEditingRanges(S,_),S=>l.handleFailedRequest(fm.LinkedEditingRangeRequest.type,_,S,null)),h=l.middleware;return h.provideLinkedEditingRange?h.provideLinkedEditingRange(s,c,u,f):f(s,c,u)}};return[this.registerProvider(n,i),i]}registerProvider(e,n){return PL.languages.registerLinkedEditingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};Cl.LinkedEditingFeature=hm});var ND=K(bl=>{"use strict";Object.defineProperty(bl,"__esModule",{value:!0});bl.TypeHierarchyFeature=void 0;var EL=require("vscode"),$o=xe(),gm=nt(),mm=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareTypeHierarchy(e,n,i){let s=this.client,c=this.middleware,u=(l,f,h)=>{let g=s.code2ProtocolConverter.asTextDocumentPositionParams(l,f);return s.sendRequest($o.TypeHierarchyPrepareRequest.type,g,h).then(C=>h.isCancellationRequested?null:s.protocol2CodeConverter.asTypeHierarchyItems(C,h),C=>s.handleFailedRequest($o.TypeHierarchyPrepareRequest.type,h,C,null))};return c.prepareTypeHierarchy?c.prepareTypeHierarchy(e,n,i,u):u(e,n,i)}provideTypeHierarchySupertypes(e,n){let i=this.client,s=this.middleware,c=(u,l)=>{let f={item:i.code2ProtocolConverter.asTypeHierarchyItem(u)};return i.sendRequest($o.TypeHierarchySupertypesRequest.type,f,l).then(h=>l.isCancellationRequested?null:i.protocol2CodeConverter.asTypeHierarchyItems(h,l),h=>i.handleFailedRequest($o.TypeHierarchySupertypesRequest.type,l,h,null))};return s.provideTypeHierarchySupertypes?s.provideTypeHierarchySupertypes(e,n,c):c(e,n)}provideTypeHierarchySubtypes(e,n){let i=this.client,s=this.middleware,c=(u,l)=>{let f={item:i.code2ProtocolConverter.asTypeHierarchyItem(u)};return i.sendRequest($o.TypeHierarchySubtypesRequest.type,f,l).then(h=>l.isCancellationRequested?null:i.protocol2CodeConverter.asTypeHierarchyItems(h,l),h=>i.handleFailedRequest($o.TypeHierarchySubtypesRequest.type,l,h,null))};return s.provideTypeHierarchySubtypes?s.provideTypeHierarchySubtypes(e,n,c):c(e,n)}},vm=class extends gm.TextDocumentLanguageFeature{constructor(e){super(e,$o.TypeHierarchyPrepareRequest.type)}fillClientCapabilities(e){let n=(0,gm.ensure)((0,gm.ensure)(e,"textDocument"),"typeHierarchy");n.dynamicRegistration=!0}initialize(e,n){let[i,s]=this.getRegistration(n,e.typeHierarchyProvider);!i||!s||this.register({id:i,registerOptions:s})}registerLanguageProvider(e){let n=this._client,i=new mm(n);return[EL.languages.registerTypeHierarchyProvider(n.protocol2CodeConverter.asDocumentSelector(e.documentSelector),i),i]}};bl.TypeHierarchyFeature=vm});var UD=K(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});Tl.InlineValueFeature=void 0;var $D=require("vscode"),_l=xe(),Aa=nt(),ym=class extends Aa.TextDocumentLanguageFeature{constructor(e){super(e,_l.InlineValueRequest.type)}fillClientCapabilities(e){(0,Aa.ensure)((0,Aa.ensure)(e,"textDocument"),"inlineValue").dynamicRegistration=!0,(0,Aa.ensure)((0,Aa.ensure)(e,"workspace"),"inlineValue").refreshSupport=!0}initialize(e,n){this._client.onRequest(_l.InlineValueRefreshRequest.type,async()=>{for(let c of this.getAllProviders())c.onDidChangeInlineValues.fire()});let[i,s]=this.getRegistration(n,e.inlineValueProvider);!i||!s||this.register({id:i,registerOptions:s})}registerLanguageProvider(e){let n=e.documentSelector,i=new $D.EventEmitter,s={onDidChangeInlineValues:i.event,provideInlineValues:(c,u,l,f)=>{let h=this._client,g=(_,S,T,L)=>{let F={textDocument:h.code2ProtocolConverter.asTextDocumentIdentifier(_),range:h.code2ProtocolConverter.asRange(S),context:h.code2ProtocolConverter.asInlineValueContext(T)};return h.sendRequest(_l.InlineValueRequest.type,F,L).then(H=>L.isCancellationRequested?null:h.protocol2CodeConverter.asInlineValues(H,L),H=>h.handleFailedRequest(_l.InlineValueRequest.type,L,H,null))},C=h.middleware;return C.provideInlineValues?C.provideInlineValues(c,u,l,f,g):g(c,u,l,f)}};return[this.registerProvider(n,s),{provider:s,onDidChangeInlineValues:i}]}registerProvider(e,n){return $D.languages.registerInlineValuesProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};Tl.InlineValueFeature=ym});var WD=K(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});Dl.InlayHintsFeature=void 0;var HD=require("vscode"),qs=xe(),La=nt(),wm=class extends La.TextDocumentLanguageFeature{constructor(e){super(e,qs.InlayHintRequest.type)}fillClientCapabilities(e){let n=(0,La.ensure)((0,La.ensure)(e,"textDocument"),"inlayHint");n.dynamicRegistration=!0,n.resolveSupport={properties:["tooltip","textEdits","label.tooltip","label.location","label.command"]},(0,La.ensure)((0,La.ensure)(e,"workspace"),"inlayHint").refreshSupport=!0}initialize(e,n){this._client.onRequest(qs.InlayHintRefreshRequest.type,async()=>{for(let c of this.getAllProviders())c.onDidChangeInlayHints.fire()});let[i,s]=this.getRegistration(n,e.inlayHintProvider);!i||!s||this.register({id:i,registerOptions:s})}registerLanguageProvider(e){let n=e.documentSelector,i=new HD.EventEmitter,s={onDidChangeInlayHints:i.event,provideInlayHints:(c,u,l)=>{let f=this._client,h=async(C,_,S)=>{let T={textDocument:f.code2ProtocolConverter.asTextDocumentIdentifier(C),range:f.code2ProtocolConverter.asRange(_)};try{let L=await f.sendRequest(qs.InlayHintRequest.type,T,S);return S.isCancellationRequested?null:f.protocol2CodeConverter.asInlayHints(L,S)}catch(L){return f.handleFailedRequest(qs.InlayHintRequest.type,S,L,null)}},g=f.middleware;return g.provideInlayHints?g.provideInlayHints(c,u,l,h):h(c,u,l)}};return s.resolveInlayHint=e.resolveProvider===!0?(c,u)=>{let l=this._client,f=async(g,C)=>{try{let _=await l.sendRequest(qs.InlayHintResolveRequest.type,l.code2ProtocolConverter.asInlayHint(g),C);if(C.isCancellationRequested)return null;let S=l.protocol2CodeConverter.asInlayHint(_,C);return C.isCancellationRequested?null:S}catch(_){return l.handleFailedRequest(qs.InlayHintResolveRequest.type,C,_,null)}},h=l.middleware;return h.resolveInlayHint?h.resolveInlayHint(c,u,f):f(c,u)}:void 0,[this.registerProvider(n,s),{provider:s,onDidChangeInlayHints:i}]}registerProvider(e,n){return HD.languages.registerInlayHintsProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};Dl.InlayHintsFeature=wm});var jD=K(Rl=>{"use strict";Object.defineProperty(Rl,"__esModule",{value:!0});Rl.InlineCompletionItemFeature=void 0;var kL=require("vscode"),Cm=xe(),bm=nt(),IL=qt(),_m=class extends bm.TextDocumentLanguageFeature{constructor(e){super(e,Cm.InlineCompletionRequest.type)}fillClientCapabilities(e){let n=(0,bm.ensure)((0,bm.ensure)(e,"textDocument"),"inlineCompletion");n.dynamicRegistration=!0}initialize(e,n){let i=this.getRegistrationOptions(n,e.inlineCompletionProvider);i&&this.register({id:IL.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,i={provideInlineCompletionItems:(s,c,u,l)=>{let f=this._client,h=this._client.middleware,g=(C,_,S,T)=>f.sendRequest(Cm.InlineCompletionRequest.type,f.code2ProtocolConverter.asInlineCompletionParams(C,_,S),T).then(L=>T.isCancellationRequested?null:f.protocol2CodeConverter.asInlineCompletionResult(L,T),L=>f.handleFailedRequest(Cm.InlineCompletionRequest.type,T,L,null));return h.provideInlineCompletionItems?h.provideInlineCompletionItems(s,c,u,l,g):g(s,c,u,l)}};return[kL.languages.registerInlineCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),i),i]}};Rl.InlineCompletionItemFeature=_m});var Pm=K(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});vn.ProposedFeatures=vn.BaseLanguageClient=vn.MessageTransports=vn.SuspendMode=vn.State=vn.CloseAction=vn.ErrorAction=vn.RevealOutputChannelOn=void 0;var mt=require("vscode"),ne=xe(),OL=wT(),qL=_T(),li=cr(),Sl=Ou(),zD=qt(),FL=xh(),ui=nt(),AL=Vh(),KD=ZT(),BD=tD(),Fs=nD(),LL=rD(),ML=iD(),NL=oD(),$L=aD(),UL=cD(),HL=yg(),WL=lD(),jL=dD(),zL=fD(),KL=hD(),Tm=gD(),BL=vD(),VL=yD(),GL=CD(),XL=bD(),QL=_D(),JL=TD(),YL=DD(),ZL=RD(),eM=xD(),tM=PD(),nM=ED(),rM=ID(),iM=OD(),oM=qD(),As=LD(),sM=MD(),aM=ND(),cM=UD(),uM=WD(),lM=jD(),Uo;(function(t){t[t.Debug=0]="Debug",t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error",t[t.Never=4]="Never"})(Uo||(vn.RevealOutputChannelOn=Uo={}));var Na;(function(t){t[t.Continue=1]="Continue",t[t.Shutdown=2]="Shutdown"})(Na||(vn.ErrorAction=Na={}));var fo;(function(t){t[t.DoNotRestart=1]="DoNotRestart",t[t.Restart=2]="Restart"})(fo||(vn.CloseAction=fo={}));var Ma;(function(t){t[t.Stopped=1]="Stopped",t[t.Starting=3]="Starting",t[t.Running=2]="Running"})(Ma||(vn.State=Ma={}));var VD;(function(t){t.off="off",t.on="on"})(VD||(vn.SuspendMode=VD={}));var Dm;(function(t){function e(n){return n==null?!1:typeof n=="boolean"||typeof n=="object"&&n!==null&&li.stringArray(n.enabledCommands)?n:!1}t.sanitizeIsTrusted=e})(Dm||(Dm={}));var Rm=class{constructor(e,n){this.client=e,this.maxRestartCount=n,this.restarts=[]}error(e,n,i){return i&&i<=3?{action:Na.Continue}:{action:Na.Shutdown}}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?{action:fo.Restart}:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?{action:fo.DoNotRestart,message:`The ${this.client.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted. See the output for more information.`}:(this.restarts.shift(),{action:fo.Restart})}},je;(function(t){t.Initial="initial",t.Starting="starting",t.StartFailed="startFailed",t.Running="running",t.Stopping="stopping",t.Stopped="stopped"})(je||(je={}));var GD;(function(t){function e(n){return n&&ne.MessageReader.is(n.reader)&&ne.MessageWriter.is(n.writer)}t.is=e})(GD||(vn.MessageTransports=GD={}));var $a=class t{constructor(e,n,i){this._traceFormat=ne.TraceFormat.Text,this._diagnosticQueue=new Map,this._diagnosticQueueState={state:"idle"},this._features=[],this._dynamicFeatures=new Map,this.workspaceEditLock=new Sl.Semaphore(1),this._id=e,this._name=n,i=i||{};let s={isTrusted:!1,supportHtml:!1};i.markdown!==void 0&&(s.isTrusted=Dm.sanitizeIsTrusted(i.markdown.isTrusted),s.supportHtml=i.markdown.supportHtml===!0),this._clientOptions={documentSelector:i.documentSelector??[],synchronize:i.synchronize??{},diagnosticCollectionName:i.diagnosticCollectionName,outputChannelName:i.outputChannelName??this._name,revealOutputChannelOn:i.revealOutputChannelOn??Uo.Error,stdioEncoding:i.stdioEncoding??"utf8",initializationOptions:i.initializationOptions,initializationFailedHandler:i.initializationFailedHandler,progressOnInitialization:!!i.progressOnInitialization,errorHandler:i.errorHandler??this.createDefaultErrorHandler(i.connectionOptions?.maxRestartCount),middleware:i.middleware??{},uriConverters:i.uriConverters,workspaceFolder:i.workspaceFolder,connectionOptions:i.connectionOptions,markdown:s,diagnosticPullOptions:i.diagnosticPullOptions??{onChange:!0,onSave:!1},notebookDocumentOptions:i.notebookDocumentOptions??{}},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=je.Initial,this._ignoredRegistrations=new Set,this._listeners=[],this._notificationHandlers=new Map,this._pendingNotificationHandlers=new Map,this._notificationDisposables=new Map,this._requestHandlers=new Map,this._pendingRequestHandlers=new Map,this._requestDisposables=new Map,this._progressHandlers=new Map,this._pendingProgressHandlers=new Map,this._progressDisposables=new Map,this._connection=void 0,this._initializeResult=void 0,i.outputChannel?(this._outputChannel=i.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=i.traceOutputChannel,this._diagnostics=void 0,this._pendingOpenNotifications=new Set,this._pendingChangeSemaphore=new Sl.Semaphore(1),this._pendingChangeDelayer=new Sl.Delayer(250),this._fileEvents=[],this._fileEventDelayer=new Sl.Delayer(250),this._onStop=void 0,this._telemetryEmitter=new ne.Emitter,this._stateChangeEmitter=new ne.Emitter,this._trace=ne.Trace.Off,this._tracer={log:(c,u)=>{li.string(c)?this.logTrace(c,u):this.logObjectTrace(c)}},this._c2p=OL.createConverter(i.uriConverters?i.uriConverters.code2Protocol:void 0),this._p2c=qL.createConverter(i.uriConverters?i.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted,this._clientOptions.markdown.supportHtml),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get name(){return this._name}get middleware(){return this._clientOptions.middleware??Object.create(null)}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=mt.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}get state(){return this.getPublicState()}get $state(){return this._state}set $state(e){let n=this.getPublicState();this._state=e;let i=this.getPublicState();i!==n&&this._stateChangeEmitter.fire({oldState:n,newState:i})}getPublicState(){switch(this.$state){case je.Starting:return Ma.Starting;case je.Running:return Ma.Running;default:return Ma.Stopped}}get initializeResult(){return this._initializeResult}async sendRequest(e,...n){if(this.$state===je.StartFailed||this.$state===je.Stopping||this.$state===je.Stopped)return Promise.reject(new ne.ResponseError(ne.ErrorCodes.ConnectionInactive,"Client is not running"));let i=await this.$start();this._didChangeTextDocumentFeature.syncKind===ne.TextDocumentSyncKind.Full&&await this.sendPendingFullTextDocumentChanges(i);let s=this._clientOptions.middleware?.sendRequest;if(s!==void 0){let c,u;return n.length===1?ne.CancellationToken.is(n[0])?u=n[0]:c=n[0]:n.length===2&&(c=n[0],u=n[1]),s(e,c,u,(l,f,h)=>{let g=[];return f!==void 0&&g.push(f),h!==void 0&&g.push(h),i.sendRequest(l,...g)})}else return i.sendRequest(e,...n)}onRequest(e,n){let i=typeof e=="string"?e:e.method;this._requestHandlers.set(i,n);let s=this.activeConnection(),c;return s!==void 0?(this._requestDisposables.set(i,s.onRequest(e,n)),c={dispose:()=>{let u=this._requestDisposables.get(i);u!==void 0&&(u.dispose(),this._requestDisposables.delete(i))}}):(this._pendingRequestHandlers.set(i,n),c={dispose:()=>{this._pendingRequestHandlers.delete(i);let u=this._requestDisposables.get(i);u!==void 0&&(u.dispose(),this._requestDisposables.delete(i))}}),{dispose:()=>{this._requestHandlers.delete(i),c.dispose()}}}async sendNotification(e,n){if(this.$state===je.StartFailed||this.$state===je.Stopping||this.$state===je.Stopped)return Promise.reject(new ne.ResponseError(ne.ErrorCodes.ConnectionInactive,"Client is not running"));let i=this._didChangeTextDocumentFeature.syncKind===ne.TextDocumentSyncKind.Full,s;i&&typeof e!="string"&&e.method===ne.DidOpenTextDocumentNotification.method&&(s=n?.textDocument.uri,this._pendingOpenNotifications.add(s));let c=await this.$start();i&&await this.sendPendingFullTextDocumentChanges(c),s!==void 0&&this._pendingOpenNotifications.delete(s);let u=this._clientOptions.middleware?.sendNotification;return u?u(e,c.sendNotification.bind(c),n):c.sendNotification(e,n)}onNotification(e,n){let i=typeof e=="string"?e:e.method;this._notificationHandlers.set(i,n);let s=this.activeConnection(),c;return s!==void 0?(this._notificationDisposables.set(i,s.onNotification(e,n)),c={dispose:()=>{let u=this._notificationDisposables.get(i);u!==void 0&&(u.dispose(),this._notificationDisposables.delete(i))}}):(this._pendingNotificationHandlers.set(i,n),c={dispose:()=>{this._pendingNotificationHandlers.delete(i);let u=this._notificationDisposables.get(i);u!==void 0&&(u.dispose(),this._notificationDisposables.delete(i))}}),{dispose:()=>{this._notificationHandlers.delete(i),c.dispose()}}}async sendProgress(e,n,i){if(this.$state===je.StartFailed||this.$state===je.Stopping||this.$state===je.Stopped)return Promise.reject(new ne.ResponseError(ne.ErrorCodes.ConnectionInactive,"Client is not running"));try{return(await this.$start()).sendProgress(e,n,i)}catch(s){throw this.error(`Sending progress for token ${n} failed.`,s),s}}onProgress(e,n,i){this._progressHandlers.set(n,{type:e,handler:i});let s=this.activeConnection(),c,u=this._clientOptions.middleware?.handleWorkDoneProgress,l=ne.WorkDoneProgress.is(e)&&u!==void 0?f=>{u(n,f,()=>i(f))}:i;return s!==void 0?(this._progressDisposables.set(n,s.onProgress(e,n,l)),c={dispose:()=>{let f=this._progressDisposables.get(n);f!==void 0&&(f.dispose(),this._progressDisposables.delete(n))}}):(this._pendingProgressHandlers.set(n,{type:e,handler:i}),c={dispose:()=>{this._pendingProgressHandlers.delete(n);let f=this._progressDisposables.get(n);f!==void 0&&(f.dispose(),this._progressDisposables.delete(n))}}),{dispose:()=>{this._progressHandlers.delete(n),c.dispose()}}}createDefaultErrorHandler(e){if(e!==void 0&&e<0)throw new Error(`Invalid maxRestartCount: ${e}`);return new Rm(this,e??4)}async setTrace(e){this._trace=e;let n=this.activeConnection();n!==void 0&&await n.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})}data2String(e){if(e instanceof ne.ResponseError){let n=e;return`  Message: ${n.message}
  Code: ${n.code} ${n.data?`
`+n.data.toString():""}`}return e instanceof Error?li.string(e.stack)?e.stack:e.message:li.string(e)?e:e.toString()}debug(e,n,i=!0){this.logOutputMessage(ne.MessageType.Debug,Uo.Debug,"Debug",e,n,i)}info(e,n,i=!0){this.logOutputMessage(ne.MessageType.Info,Uo.Info,"Info",e,n,i)}warn(e,n,i=!0){this.logOutputMessage(ne.MessageType.Warning,Uo.Warn,"Warn",e,n,i)}error(e,n,i=!0){this.logOutputMessage(ne.MessageType.Error,Uo.Error,"Error",e,n,i)}logOutputMessage(e,n,i,s,c,u){this.outputChannel.appendLine(`[${i.padEnd(5)} - ${new Date().toLocaleTimeString()}] ${s}`),c!=null&&this.outputChannel.appendLine(this.data2String(c)),(u==="force"||u&&this._clientOptions.revealOutputChannelOn<=n)&&this.showNotificationMessage(e,s)}showNotificationMessage(e,n){n=n??"A request has failed. See the output for more information.",(e===ne.MessageType.Error?mt.window.showErrorMessage:e===ne.MessageType.Warning?mt.window.showWarningMessage:mt.window.showInformationMessage)(n,"Go to output").then(s=>{s!==void 0&&this.outputChannel.show(!0)})}logTrace(e,n){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),n&&this.traceOutputChannel.appendLine(this.data2String(n))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.$state===je.Initial||this.$state===je.Stopping||this.$state===je.Stopped}needsStop(){return this.$state===je.Starting||this.$state===je.Running}activeConnection(){return this.$state===je.Running&&this._connection!==void 0?this._connection:void 0}isRunning(){return this.$state===je.Running}async start(){if(this._disposed==="disposing"||this._disposed==="disposed")throw new Error("Client got disposed and can't be restarted.");if(this.$state===je.Stopping)throw new Error("Client is currently stopping. Can only restart a full stopped client");if(this._onStart!==void 0)return this._onStart;let[e,n,i]=this.createOnStartPromise();this._onStart=e,this._diagnostics===void 0&&(this._diagnostics=this._clientOptions.diagnosticCollectionName?mt.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):mt.languages.createDiagnosticCollection());for(let[s,c]of this._notificationHandlers)this._pendingNotificationHandlers.has(s)||this._pendingNotificationHandlers.set(s,c);for(let[s,c]of this._requestHandlers)this._pendingRequestHandlers.has(s)||this._pendingRequestHandlers.set(s,c);for(let[s,c]of this._progressHandlers)this._pendingProgressHandlers.has(s)||this._pendingProgressHandlers.set(s,c);this.$state=je.Starting;try{let s=await this.createConnection();s.onNotification(ne.LogMessageNotification.type,c=>{switch(c.type){case ne.MessageType.Error:this.error(c.message,void 0,!1);break;case ne.MessageType.Warning:this.warn(c.message,void 0,!1);break;case ne.MessageType.Info:this.info(c.message,void 0,!1);break;case ne.MessageType.Debug:this.debug(c.message,void 0,!1);break;default:this.outputChannel.appendLine(c.message)}}),s.onNotification(ne.ShowMessageNotification.type,c=>{switch(c.type){case ne.MessageType.Error:mt.window.showErrorMessage(c.message);break;case ne.MessageType.Warning:mt.window.showWarningMessage(c.message);break;case ne.MessageType.Info:mt.window.showInformationMessage(c.message);break;default:mt.window.showInformationMessage(c.message)}}),s.onRequest(ne.ShowMessageRequest.type,c=>{let u;switch(c.type){case ne.MessageType.Error:u=mt.window.showErrorMessage;break;case ne.MessageType.Warning:u=mt.window.showWarningMessage;break;case ne.MessageType.Info:u=mt.window.showInformationMessage;break;default:u=mt.window.showInformationMessage}let l=c.actions||[];return u(c.message,...l)}),s.onNotification(ne.TelemetryEventNotification.type,c=>{this._telemetryEmitter.fire(c)}),s.onRequest(ne.ShowDocumentRequest.type,async c=>{let u=async f=>{let h=this.protocol2CodeConverter.asUri(f.uri);try{if(f.external===!0)return{success:await mt.env.openExternal(h)};{let g={};return f.selection!==void 0&&(g.selection=this.protocol2CodeConverter.asRange(f.selection)),f.takeFocus===void 0||f.takeFocus===!1?g.preserveFocus=!0:f.takeFocus===!0&&(g.preserveFocus=!1),await mt.window.showTextDocument(h,g),{success:!0}}}catch{return{success:!1}}},l=this._clientOptions.middleware.window?.showDocument;return l!==void 0?l(c,u):u(c)}),s.listen(),await this.initialize(s),n()}catch(s){this.$state=je.StartFailed,this.error(`${this._name} client: couldn't create connection to server.`,s,"force"),i(s)}return this._onStart}createOnStartPromise(){let e,n;return[new Promise((s,c)=>{e=s,n=c}),e,n]}async initialize(e){this.refreshTrace(e,!1);let n=this._clientOptions.initializationOptions,[i,s]=this._clientOptions.workspaceFolder!==void 0?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],c={processId:null,clientInfo:{name:mt.env.appName,version:mt.version},locale:this.getLocale(),rootPath:i||null,rootUri:i?this._c2p.asUri(mt.Uri.file(i)):null,capabilities:this.computeClientCapabilities(),initializationOptions:li.func(n)?n():n,trace:ne.Trace.toString(this._trace),workspaceFolders:s};if(this.fillInitializeParams(c),this._clientOptions.progressOnInitialization){let u=zD.generateUuid(),l=new FL.ProgressPart(e,u);c.workDoneToken=u;try{let f=await this.doInitialize(e,c);return l.done(),f}catch(f){throw l.cancel(),f}}else return this.doInitialize(e,c)}async doInitialize(e,n){try{let i=await e.initialize(n);if(i.capabilities.positionEncoding!==void 0&&i.capabilities.positionEncoding!==ne.PositionEncodingKind.UTF16)throw new Error(`Unsupported position encoding (${i.capabilities.positionEncoding}) received from server ${this.name}`);this._initializeResult=i,this.$state=je.Running;let s;li.number(i.capabilities.textDocumentSync)?i.capabilities.textDocumentSync===ne.TextDocumentSyncKind.None?s={openClose:!1,change:ne.TextDocumentSyncKind.None,save:void 0}:s={openClose:!0,change:i.capabilities.textDocumentSync,save:{includeText:!1}}:i.capabilities.textDocumentSync!==void 0&&i.capabilities.textDocumentSync!==null&&(s=i.capabilities.textDocumentSync),this._capabilities=Object.assign({},i.capabilities,{resolvedTextDocumentSync:s}),e.onNotification(ne.PublishDiagnosticsNotification.type,c=>this.handleDiagnostics(c)),e.onRequest(ne.RegistrationRequest.type,c=>this.handleRegistrationRequest(c)),e.onRequest("client/registerFeature",c=>this.handleRegistrationRequest(c)),e.onRequest(ne.UnregistrationRequest.type,c=>this.handleUnregistrationRequest(c)),e.onRequest("client/unregisterFeature",c=>this.handleUnregistrationRequest(c)),e.onRequest(ne.ApplyWorkspaceEditRequest.type,c=>this.handleApplyWorkspaceEdit(c));for(let[c,u]of this._pendingNotificationHandlers)this._notificationDisposables.set(c,e.onNotification(c,u));this._pendingNotificationHandlers.clear();for(let[c,u]of this._pendingRequestHandlers)this._requestDisposables.set(c,e.onRequest(c,u));this._pendingRequestHandlers.clear();for(let[c,u]of this._pendingProgressHandlers)this._progressDisposables.set(c,e.onProgress(u.type,c,u.handler));return this._pendingProgressHandlers.clear(),await e.sendNotification(ne.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),i}catch(i){throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(i)?this.initialize(e):this.stop():i instanceof ne.ResponseError&&i.data&&i.data.retry?mt.window.showErrorMessage(i.message,{title:"Retry",id:"retry"}).then(s=>{s&&s.id==="retry"?this.initialize(e):this.stop()}):(i&&i.message&&mt.window.showErrorMessage(i.message),this.error("Server initialization failed.",i),this.stop()),i}}_clientGetRootPath(){let e=mt.workspace.workspaceFolders;if(!e||e.length===0)return;let n=e[0];if(n.uri.scheme==="file")return n.uri.fsPath}stop(e=2e3){return this.shutdown("stop",e)}dispose(e=2e3){try{return this._disposed="disposing",this.stop(e)}finally{this._disposed="disposed"}}async shutdown(e,n){if(this.$state===je.Stopped||this.$state===je.Initial)return;if(this.$state===je.Stopping){if(this._onStop!==void 0)return this._onStop;throw new Error("Client is stopping but no stop promise available.")}let i=this.activeConnection();if(i===void 0||this.$state!==je.Running)throw new Error(`Client is not running and can't be stopped. It's current state is: ${this.$state}`);this._initializeResult=void 0,this.$state=je.Stopping,this.cleanUp(e);let s=new Promise(u=>{(0,ne.RAL)().timer.setTimeout(u,n)}),c=(async u=>(await u.shutdown(),await u.exit(),u))(i);return this._onStop=Promise.race([s,c]).then(u=>{if(u!==void 0)u.end(),u.dispose();else throw this.error("Stopping server timed out",void 0,!1),new Error("Stopping the server timed out")},u=>{throw this.error("Stopping server failed",u,!1),u}).finally(()=>{this.$state=je.Stopped,e==="stop"&&this.cleanUpChannel(),this._onStart=void 0,this._onStop=void 0,this._connection=void 0,this._ignoredRegistrations.clear()})}cleanUp(e){this._fileEvents=[],this._fileEventDelayer.cancel();let n=this._listeners.splice(0,this._listeners.length);for(let i of n)i.dispose();this._syncedDocuments&&this._syncedDocuments.clear();for(let i of Array.from(this._features.entries()).map(s=>s[1]).reverse())i.clear();e==="stop"&&this._diagnostics!==void 0&&(this._diagnostics.dispose(),this._diagnostics=void 0),this._idleInterval!==void 0&&(this._idleInterval.dispose(),this._idleInterval=void 0)}cleanUpChannel(){this._outputChannel!==void 0&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){let n=this;async function i(c){return n._fileEvents.push(c),n._fileEventDelayer.trigger(async()=>{await n.sendNotification(ne.DidChangeWatchedFilesNotification.type,{changes:n._fileEvents}),n._fileEvents=[]})}let s=this.clientOptions.middleware?.workspace;(s?.didChangeWatchedFile?s.didChangeWatchedFile(e,i):i(e)).catch(c=>{n.error("Notify file events failed.",c)})}async sendPendingFullTextDocumentChanges(e){return this._pendingChangeSemaphore.lock(async()=>{try{let n=this._didChangeTextDocumentFeature.getPendingDocumentChanges(this._pendingOpenNotifications);if(n.length===0)return;for(let i of n){let s=this.code2ProtocolConverter.asChangeTextDocumentParams(i);await e.sendNotification(ne.DidChangeTextDocumentNotification.type,s),this._didChangeTextDocumentFeature.notificationSent(i,ne.DidChangeTextDocumentNotification.type,s)}}catch(n){throw this.error("Sending pending changes failed",n,!1),n}})}triggerPendingChangeDelivery(){this._pendingChangeDelayer.trigger(async()=>{let e=this.activeConnection();if(e===void 0){this.triggerPendingChangeDelivery();return}await this.sendPendingFullTextDocumentChanges(e)}).catch(e=>this.error("Delivering pending changes failed",e,!1))}handleDiagnostics(e){if(!this._diagnostics)return;let n=e.uri;this._diagnosticQueueState.state==="busy"&&this._diagnosticQueueState.document===n&&this._diagnosticQueueState.tokenSource.cancel(),this._diagnosticQueue.set(e.uri,e.diagnostics),this.triggerDiagnosticQueue()}triggerDiagnosticQueue(){(0,ne.RAL)().timer.setImmediate(()=>{this.workDiagnosticQueue()})}workDiagnosticQueue(){if(this._diagnosticQueueState.state==="busy")return;let e=this._diagnosticQueue.entries().next();if(e.done===!0)return;let[n,i]=e.value;this._diagnosticQueue.delete(n);let s=new mt.CancellationTokenSource;this._diagnosticQueueState={state:"busy",document:n,tokenSource:s},this._p2c.asDiagnostics(i,s.token).then(c=>{if(!s.token.isCancellationRequested){let u=this._p2c.asUri(n),l=this.clientOptions.middleware;l.handleDiagnostics?l.handleDiagnostics(u,c,(f,h)=>this.setDiagnostics(f,h)):this.setDiagnostics(u,c)}}).finally(()=>{this._diagnosticQueueState={state:"idle"},this.triggerDiagnosticQueue()})}setDiagnostics(e,n){this._diagnostics&&this._diagnostics.set(e,n)}getLocale(){return mt.env.language}async $start(){if(this.$state===je.StartFailed)throw new Error("Previous start failed. Can't restart server.");await this.start();let e=this.activeConnection();if(e===void 0)throw new Error("Starting server failed");return e}async createConnection(){let e=(s,c,u)=>{this.handleConnectionError(s,c,u).catch(l=>this.error("Handling connection error failed",l))},n=()=>{this.handleConnectionClosed().catch(s=>this.error("Handling connection close failed",s))},i=await this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8");return this._connection=dM(i.reader,i.writer,e,n,this._clientOptions.connectionOptions),this._connection}async handleConnectionClosed(){if(this.$state===je.Stopped)return;try{this._connection!==void 0&&this._connection.dispose()}catch{}let e={action:fo.DoNotRestart};if(this.$state!==je.Stopping)try{e=await this._clientOptions.errorHandler.closed()}catch{}this._connection=void 0,e.action===fo.DoNotRestart?(this.error(e.message??"Connection to server got closed. Server will not be restarted.",void 0,e.handled===!0?!1:"force"),this.cleanUp("stop"),this.$state===je.Starting?this.$state=je.StartFailed:this.$state=je.Stopped,this._onStop=Promise.resolve(),this._onStart=void 0):e.action===fo.Restart&&(this.info(e.message??"Connection to server got closed. Server will restart.",!e.handled),this.cleanUp("restart"),this.$state=je.Initial,this._onStop=Promise.resolve(),this._onStart=void 0,this.start().catch(n=>this.error("Restarting server failed",n,"force")))}async handleConnectionError(e,n,i){let s=await this._clientOptions.errorHandler.error(e,n,i);s.action===Na.Shutdown?(this.error(s.message??`Client ${this._name}: connection to server is erroring.
${e.message}
Shutting down server.`,void 0,s.handled===!0?!1:"force"),this.stop().catch(c=>{this.error("Stopping server failed",c,!1)})):this.error(s.message??`Client ${this._name}: connection to server is erroring.
${e.message}`,void 0,s.handled===!0?!1:"force")}hookConfigurationChanged(e){this._listeners.push(mt.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)}))}refreshTrace(e,n=!1){let i=mt.workspace.getConfiguration(this._id),s=ne.Trace.Off,c=ne.TraceFormat.Text;if(i){let u=i.get("trace.server","off");typeof u=="string"?s=ne.Trace.fromString(u):(s=ne.Trace.fromString(i.get("trace.server.verbosity","off")),c=ne.TraceFormat.fromString(i.get("trace.server.format","text")))}this._trace=s,this._traceFormat=c,e.trace(this._trace,this._tracer,{sendNotification:n,traceFormat:this._traceFormat}).catch(u=>{this.error("Updating trace failed with error",u,!1)})}hookFileEvents(e){let n=this._clientOptions.synchronize.fileEvents;if(!n)return;let i;li.array(n)?i=n:i=[n],i&&this._dynamicFeatures.get(ne.DidChangeWatchedFilesNotification.type.method).registerRaw(zD.generateUuid(),i)}registerFeatures(e){for(let n of e)this.registerFeature(n)}registerFeature(e){if(this._features.push(e),ui.DynamicFeature.is(e)){let n=e.registrationType;this._dynamicFeatures.set(n.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}hasDedicatedTextSynchronizationFeature(e){let n=this.getFeature(ne.NotebookDocumentSyncRegistrationType.method);return n===void 0||!(n instanceof KD.NotebookDocumentSyncFeature)?!1:n.handles(e)}registerBuiltinFeatures(){let e=new Map;this.registerFeature(new BD.ConfigurationFeature(this)),this.registerFeature(new Fs.DidOpenTextDocumentFeature(this,this._syncedDocuments)),this._didChangeTextDocumentFeature=new Fs.DidChangeTextDocumentFeature(this,e),this._didChangeTextDocumentFeature.onPendingChangeAdded(()=>{this.triggerPendingChangeDelivery()}),this.registerFeature(this._didChangeTextDocumentFeature),this.registerFeature(new Fs.WillSaveFeature(this)),this.registerFeature(new Fs.WillSaveWaitUntilFeature(this)),this.registerFeature(new Fs.DidSaveTextDocumentFeature(this)),this.registerFeature(new Fs.DidCloseTextDocumentFeature(this,this._syncedDocuments,e)),this.registerFeature(new XL.FileSystemWatcherFeature(this,n=>this.notifyFileEvent(n))),this.registerFeature(new LL.CompletionItemFeature(this)),this.registerFeature(new ML.HoverFeature(this)),this.registerFeature(new $L.SignatureHelpFeature(this)),this.registerFeature(new NL.DefinitionFeature(this)),this.registerFeature(new jL.ReferencesFeature(this)),this.registerFeature(new UL.DocumentHighlightFeature(this)),this.registerFeature(new HL.DocumentSymbolFeature(this)),this.registerFeature(new WL.WorkspaceSymbolFeature(this)),this.registerFeature(new zL.CodeActionFeature(this)),this.registerFeature(new KL.CodeLensFeature(this)),this.registerFeature(new Tm.DocumentFormattingFeature(this)),this.registerFeature(new Tm.DocumentRangeFormattingFeature(this)),this.registerFeature(new Tm.DocumentOnTypeFormattingFeature(this)),this.registerFeature(new BL.RenameFeature(this)),this.registerFeature(new VL.DocumentLinkFeature(this)),this.registerFeature(new GL.ExecuteCommandFeature(this)),this.registerFeature(new BD.SyncConfigurationFeature(this)),this.registerFeature(new YL.TypeDefinitionFeature(this)),this.registerFeature(new JL.ImplementationFeature(this)),this.registerFeature(new QL.ColorProviderFeature(this)),this.clientOptions.workspaceFolder===void 0&&this.registerFeature(new ZL.WorkspaceFoldersFeature(this)),this.registerFeature(new eM.FoldingRangeFeature(this)),this.registerFeature(new tM.DeclarationFeature(this)),this.registerFeature(new nM.SelectionRangeFeature(this)),this.registerFeature(new rM.ProgressFeature(this)),this.registerFeature(new iM.CallHierarchyFeature(this)),this.registerFeature(new oM.SemanticTokensFeature(this)),this.registerFeature(new sM.LinkedEditingFeature(this)),this.registerFeature(new As.DidCreateFilesFeature(this)),this.registerFeature(new As.DidRenameFilesFeature(this)),this.registerFeature(new As.DidDeleteFilesFeature(this)),this.registerFeature(new As.WillCreateFilesFeature(this)),this.registerFeature(new As.WillRenameFilesFeature(this)),this.registerFeature(new As.WillDeleteFilesFeature(this)),this.registerFeature(new aM.TypeHierarchyFeature(this)),this.registerFeature(new cM.InlineValueFeature(this)),this.registerFeature(new uM.InlayHintsFeature(this)),this.registerFeature(new AL.DiagnosticFeature(this)),this.registerFeature(new KD.NotebookDocumentSyncFeature(this))}registerProposedFeatures(){this.registerFeatures(xm.createAll(this))}fillInitializeParams(e){for(let n of this._features)li.func(n.fillInitializeParams)&&n.fillInitializeParams(e)}computeClientCapabilities(){let e={};(0,ui.ensure)(e,"workspace").applyEdit=!0;let n=(0,ui.ensure)((0,ui.ensure)(e,"workspace"),"workspaceEdit");n.documentChanges=!0,n.resourceOperations=[ne.ResourceOperationKind.Create,ne.ResourceOperationKind.Rename,ne.ResourceOperationKind.Delete],n.failureHandling=ne.FailureHandlingKind.TextOnlyTransactional,n.normalizesLineEndings=!0,n.changeAnnotationSupport={groupsOnLabel:!0};let i=(0,ui.ensure)((0,ui.ensure)(e,"textDocument"),"publishDiagnostics");i.relatedInformation=!0,i.versionSupport=!1,i.tagSupport={valueSet:[ne.DiagnosticTag.Unnecessary,ne.DiagnosticTag.Deprecated]},i.codeDescriptionSupport=!0,i.dataSupport=!0;let s=(0,ui.ensure)(e,"window"),c=(0,ui.ensure)(s,"showMessage");c.messageActionItem={additionalPropertiesSupport:!0};let u=(0,ui.ensure)(s,"showDocument");u.support=!0;let l=(0,ui.ensure)(e,"general");l.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(t.RequestsToCancelOnContentModified)},l.regularExpressions={engine:"ECMAScript",version:"ES2020"},l.markdown={parser:"marked",version:"1.1.0"},l.positionEncodings=["utf-16"],this._clientOptions.markdown.supportHtml&&(l.markdown.allowedTags=["ul","li","p","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"]);for(let f of this._features)f.fillClientCapabilities(e);return e}initializeFeatures(e){let n=this._clientOptions.documentSelector;for(let i of this._features)li.func(i.preInitialize)&&i.preInitialize(this._capabilities,n);for(let i of this._features)i.initialize(this._capabilities,n)}async handleRegistrationRequest(e){let n=this.clientOptions.middleware?.handleRegisterCapability;return n?n(e,i=>this.doRegisterCapability(i)):this.doRegisterCapability(e)}async doRegisterCapability(e){if(!this.isRunning()){for(let n of e.registrations)this._ignoredRegistrations.add(n.id);return}for(let n of e.registrations){let i=this._dynamicFeatures.get(n.method);if(i===void 0)return Promise.reject(new Error(`No feature implementation for ${n.method} found. Registration failed.`));let s=n.registerOptions??{};s.documentSelector=s.documentSelector??this._clientOptions.documentSelector;let c={id:n.id,registerOptions:s};try{i.register(c)}catch(u){return Promise.reject(u)}}}async handleUnregistrationRequest(e){let n=this.clientOptions.middleware?.handleUnregisterCapability;return n?n(e,i=>this.doUnregisterCapability(i)):this.doUnregisterCapability(e)}async doUnregisterCapability(e){for(let n of e.unregisterations){if(this._ignoredRegistrations.has(n.id))continue;let i=this._dynamicFeatures.get(n.method);if(!i)return Promise.reject(new Error(`No feature implementation for ${n.method} found. Unregistration failed.`));i.unregister(n.id)}}async handleApplyWorkspaceEdit(e){let n=e.edit,i=await this.workspaceEditLock.lock(()=>this._p2c.asWorkspaceEdit(n)),s=new Map;mt.workspace.textDocuments.forEach(u=>s.set(u.uri.toString(),u));let c=!1;if(n.documentChanges){for(let u of n.documentChanges)if(ne.TextDocumentEdit.is(u)&&u.textDocument.version&&u.textDocument.version>=0){let l=this._p2c.asUri(u.textDocument.uri).toString(),f=s.get(l);if(f&&f.version!==u.textDocument.version){c=!0;break}}}return c?Promise.resolve({applied:!1}):li.asPromise(mt.workspace.applyEdit(i).then(u=>({applied:u})))}handleFailedRequest(e,n,i,s,c=!0){if(i instanceof ne.ResponseError){if(i.code===ne.ErrorCodes.PendingResponseRejected||i.code===ne.ErrorCodes.ConnectionInactive)return s;if(i.code===ne.LSPErrorCodes.RequestCancelled||i.code===ne.LSPErrorCodes.ServerCancelled){if(n!==void 0&&n.isCancellationRequested)return s;throw i.data!==void 0?new ui.LSPCancellationError(i.data):new mt.CancellationError}else if(i.code===ne.LSPErrorCodes.ContentModified){if(t.RequestsToCancelOnContentModified.has(e.method)||t.CancellableResolveCalls.has(e.method))throw new mt.CancellationError;return s}}throw this.error(`Request ${e.method} failed.`,i,c),i}};vn.BaseLanguageClient=$a;$a.RequestsToCancelOnContentModified=new Set([ne.SemanticTokensRequest.method,ne.SemanticTokensRangeRequest.method,ne.SemanticTokensDeltaRequest.method]);$a.CancellableResolveCalls=new Set([ne.CompletionResolveRequest.method,ne.CodeLensResolveRequest.method,ne.CodeActionResolveRequest.method,ne.InlayHintResolveRequest.method,ne.DocumentLinkResolveRequest.method,ne.WorkspaceSymbolResolveRequest.method]);var Sm=class{error(e){(0,ne.RAL)().console.error(e)}warn(e){(0,ne.RAL)().console.warn(e)}info(e){(0,ne.RAL)().console.info(e)}log(e){(0,ne.RAL)().console.log(e)}};function dM(t,e,n,i,s){let c=new Sm,u=(0,ne.createProtocolConnection)(t,e,c,s);return u.onError(f=>{n(f[0],f[1],f[2])}),u.onClose(i),{listen:()=>u.listen(),sendRequest:u.sendRequest,onRequest:u.onRequest,hasPendingResponse:u.hasPendingResponse,sendNotification:u.sendNotification,onNotification:u.onNotification,onProgress:u.onProgress,sendProgress:u.sendProgress,trace:(f,h,g)=>{let C={sendNotification:!1,traceFormat:ne.TraceFormat.Text};return g===void 0?u.trace(f,h,C):(li.boolean(g),u.trace(f,h,g))},initialize:f=>u.sendRequest(ne.InitializeRequest.type,f),shutdown:()=>u.sendRequest(ne.ShutdownRequest.type,void 0),exit:()=>u.sendNotification(ne.ExitNotification.type),end:()=>u.end(),dispose:()=>u.dispose()}}var xm;(function(t){function e(n){return[new lM.InlineCompletionItemFeature(n)]}t.createAll=e})(xm||(vn.ProposedFeatures=xm={}))});var QD=K(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});xl.terminate=void 0;var XD=require("child_process"),fM=require("path"),pM=process.platform==="win32",hM=process.platform==="darwin",gM=process.platform==="linux";function mM(t,e){if(pM)try{let s={stdio:["pipe","pipe","ignore"]};return e&&(s.cwd=e),XD.execFileSync("taskkill",["/T","/F","/PID",t.pid.toString()],s),!0}catch{return!1}else if(gM||hM)try{var n=(0,fM.join)(__dirname,"terminateProcess.sh"),i=XD.spawnSync(n,[t.pid.toString()]);return!i.error}catch{return!1}else return t.kill("SIGKILL"),!0}xl.terminate=mM});var Em=K((xU,JD)=>{"use strict";JD.exports=xe()});var Ua=K((PU,YD)=>{var vM=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};YD.exports=vM});var Pl=K((EU,ZD)=>{var yM="2.0.0",wM=Number.MAX_SAFE_INTEGER||9007199254740991,CM=16,bM=250,_M=["major","premajor","minor","preminor","patch","prepatch","prerelease"];ZD.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:CM,MAX_SAFE_BUILD_LENGTH:bM,MAX_SAFE_INTEGER:wM,RELEASE_TYPES:_M,SEMVER_SPEC_VERSION:yM,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var El=K((Ci,eR)=>{var{MAX_SAFE_COMPONENT_LENGTH:km,MAX_SAFE_BUILD_LENGTH:TM,MAX_LENGTH:DM}=Pl(),RM=Ua();Ci=eR.exports={};var SM=Ci.re=[],xM=Ci.safeRe=[],de=Ci.src=[],PM=Ci.safeSrc=[],fe=Ci.t={},EM=0,Im="[a-zA-Z0-9-]",kM=[["\\s",1],["\\d",DM],[Im,TM]],IM=t=>{for(let[e,n]of kM)t=t.split(`${e}*`).join(`${e}{0,${n}}`).split(`${e}+`).join(`${e}{1,${n}}`);return t},Ae=(t,e,n)=>{let i=IM(e),s=EM++;RM(t,s,e),fe[t]=s,de[s]=e,PM[s]=i,SM[s]=new RegExp(e,n?"g":void 0),xM[s]=new RegExp(i,n?"g":void 0)};Ae("NUMERICIDENTIFIER","0|[1-9]\\d*");Ae("NUMERICIDENTIFIERLOOSE","\\d+");Ae("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${Im}*`);Ae("MAINVERSION",`(${de[fe.NUMERICIDENTIFIER]})\\.(${de[fe.NUMERICIDENTIFIER]})\\.(${de[fe.NUMERICIDENTIFIER]})`);Ae("MAINVERSIONLOOSE",`(${de[fe.NUMERICIDENTIFIERLOOSE]})\\.(${de[fe.NUMERICIDENTIFIERLOOSE]})\\.(${de[fe.NUMERICIDENTIFIERLOOSE]})`);Ae("PRERELEASEIDENTIFIER",`(?:${de[fe.NUMERICIDENTIFIER]}|${de[fe.NONNUMERICIDENTIFIER]})`);Ae("PRERELEASEIDENTIFIERLOOSE",`(?:${de[fe.NUMERICIDENTIFIERLOOSE]}|${de[fe.NONNUMERICIDENTIFIER]})`);Ae("PRERELEASE",`(?:-(${de[fe.PRERELEASEIDENTIFIER]}(?:\\.${de[fe.PRERELEASEIDENTIFIER]})*))`);Ae("PRERELEASELOOSE",`(?:-?(${de[fe.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${de[fe.PRERELEASEIDENTIFIERLOOSE]})*))`);Ae("BUILDIDENTIFIER",`${Im}+`);Ae("BUILD",`(?:\\+(${de[fe.BUILDIDENTIFIER]}(?:\\.${de[fe.BUILDIDENTIFIER]})*))`);Ae("FULLPLAIN",`v?${de[fe.MAINVERSION]}${de[fe.PRERELEASE]}?${de[fe.BUILD]}?`);Ae("FULL",`^${de[fe.FULLPLAIN]}$`);Ae("LOOSEPLAIN",`[v=\\s]*${de[fe.MAINVERSIONLOOSE]}${de[fe.PRERELEASELOOSE]}?${de[fe.BUILD]}?`);Ae("LOOSE",`^${de[fe.LOOSEPLAIN]}$`);Ae("GTLT","((?:<|>)?=?)");Ae("XRANGEIDENTIFIERLOOSE",`${de[fe.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Ae("XRANGEIDENTIFIER",`${de[fe.NUMERICIDENTIFIER]}|x|X|\\*`);Ae("XRANGEPLAIN",`[v=\\s]*(${de[fe.XRANGEIDENTIFIER]})(?:\\.(${de[fe.XRANGEIDENTIFIER]})(?:\\.(${de[fe.XRANGEIDENTIFIER]})(?:${de[fe.PRERELEASE]})?${de[fe.BUILD]}?)?)?`);Ae("XRANGEPLAINLOOSE",`[v=\\s]*(${de[fe.XRANGEIDENTIFIERLOOSE]})(?:\\.(${de[fe.XRANGEIDENTIFIERLOOSE]})(?:\\.(${de[fe.XRANGEIDENTIFIERLOOSE]})(?:${de[fe.PRERELEASELOOSE]})?${de[fe.BUILD]}?)?)?`);Ae("XRANGE",`^${de[fe.GTLT]}\\s*${de[fe.XRANGEPLAIN]}$`);Ae("XRANGELOOSE",`^${de[fe.GTLT]}\\s*${de[fe.XRANGEPLAINLOOSE]}$`);Ae("COERCEPLAIN",`(^|[^\\d])(\\d{1,${km}})(?:\\.(\\d{1,${km}}))?(?:\\.(\\d{1,${km}}))?`);Ae("COERCE",`${de[fe.COERCEPLAIN]}(?:$|[^\\d])`);Ae("COERCEFULL",de[fe.COERCEPLAIN]+`(?:${de[fe.PRERELEASE]})?(?:${de[fe.BUILD]})?(?:$|[^\\d])`);Ae("COERCERTL",de[fe.COERCE],!0);Ae("COERCERTLFULL",de[fe.COERCEFULL],!0);Ae("LONETILDE","(?:~>?)");Ae("TILDETRIM",`(\\s*)${de[fe.LONETILDE]}\\s+`,!0);Ci.tildeTrimReplace="$1~";Ae("TILDE",`^${de[fe.LONETILDE]}${de[fe.XRANGEPLAIN]}$`);Ae("TILDELOOSE",`^${de[fe.LONETILDE]}${de[fe.XRANGEPLAINLOOSE]}$`);Ae("LONECARET","(?:\\^)");Ae("CARETTRIM",`(\\s*)${de[fe.LONECARET]}\\s+`,!0);Ci.caretTrimReplace="$1^";Ae("CARET",`^${de[fe.LONECARET]}${de[fe.XRANGEPLAIN]}$`);Ae("CARETLOOSE",`^${de[fe.LONECARET]}${de[fe.XRANGEPLAINLOOSE]}$`);Ae("COMPARATORLOOSE",`^${de[fe.GTLT]}\\s*(${de[fe.LOOSEPLAIN]})$|^$`);Ae("COMPARATOR",`^${de[fe.GTLT]}\\s*(${de[fe.FULLPLAIN]})$|^$`);Ae("COMPARATORTRIM",`(\\s*)${de[fe.GTLT]}\\s*(${de[fe.LOOSEPLAIN]}|${de[fe.XRANGEPLAIN]})`,!0);Ci.comparatorTrimReplace="$1$2$3";Ae("HYPHENRANGE",`^\\s*(${de[fe.XRANGEPLAIN]})\\s+-\\s+(${de[fe.XRANGEPLAIN]})\\s*$`);Ae("HYPHENRANGELOOSE",`^\\s*(${de[fe.XRANGEPLAINLOOSE]})\\s+-\\s+(${de[fe.XRANGEPLAINLOOSE]})\\s*$`);Ae("STAR","(<|>)?=?\\s*\\*");Ae("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");Ae("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var kl=K((kU,tR)=>{var OM=Object.freeze({loose:!0}),qM=Object.freeze({}),FM=t=>t?typeof t!="object"?OM:t:qM;tR.exports=FM});var oR=K((IU,iR)=>{var nR=/^[0-9]+$/,rR=(t,e)=>{let n=nR.test(t),i=nR.test(e);return n&&i&&(t=+t,e=+e),t===e?0:n&&!i?-1:i&&!n?1:t<e?-1:1},AM=(t,e)=>rR(e,t);iR.exports={compareIdentifiers:rR,rcompareIdentifiers:AM}});var Ha=K((OU,uR)=>{var Il=Ua(),{MAX_LENGTH:sR,MAX_SAFE_INTEGER:Ol}=Pl(),{safeRe:aR,safeSrc:cR,t:ql}=El(),LM=kl(),{compareIdentifiers:Ls}=oR(),Om=class t{constructor(e,n){if(n=LM(n),e instanceof t){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>sR)throw new TypeError(`version is longer than ${sR} characters`);Il("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let i=e.trim().match(n.loose?aR[ql.LOOSE]:aR[ql.FULL]);if(!i)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>Ol||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Ol||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Ol||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){let c=+s;if(c>=0&&c<Ol)return c}return s}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Il("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),Ls(this.major,e.major)||Ls(this.minor,e.minor)||Ls(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{let i=this.prerelease[n],s=e.prerelease[n];if(Il("prerelease compare",n,i,s),i===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(i===void 0)return-1;if(i===s)continue;return Ls(i,s)}while(++n)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let n=0;do{let i=this.build[n],s=e.build[n];if(Il("build compare",n,i,s),i===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(i===void 0)return-1;if(i===s)continue;return Ls(i,s)}while(++n)}inc(e,n,i){if(e.startsWith("pre")){if(!n&&i===!1)throw new Error("invalid increment argument: identifier is empty");if(n){let s=new RegExp(`^${this.options.loose?cR[ql.PRERELEASELOOSE]:cR[ql.PRERELEASE]}$`),c=`-${n}`.match(s);if(!c||c[1]!==n)throw new Error(`invalid identifier: ${n}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,i);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,i);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,i),this.inc("pre",n,i);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,i),this.inc("pre",n,i);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let s=Number(i)?1:0;if(this.prerelease.length===0)this.prerelease=[s];else{let c=this.prerelease.length;for(;--c>=0;)typeof this.prerelease[c]=="number"&&(this.prerelease[c]++,c=-2);if(c===-1){if(n===this.prerelease.join(".")&&i===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(n){let c=[n,s];i===!1&&(c=[n]),Ls(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=c):this.prerelease=c}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};uR.exports=Om});var fR=K((qU,dR)=>{var lR=Ha(),MM=(t,e,n=!1)=>{if(t instanceof lR)return t;try{return new lR(t,e)}catch(i){if(!n)return null;throw i}};dR.exports=MM});var hR=K((FU,pR)=>{var qm=class{constructor(){this.max=1e3,this.map=new Map}get(e){let n=this.map.get(e);if(n!==void 0)return this.map.delete(e),this.map.set(e,n),n}delete(e){return this.map.delete(e)}set(e,n){if(!this.delete(e)&&n!==void 0){if(this.map.size>=this.max){let s=this.map.keys().next().value;this.delete(s)}this.map.set(e,n)}return this}};pR.exports=qm});var Ho=K((AU,mR)=>{var gR=Ha(),NM=(t,e,n)=>new gR(t,n).compare(new gR(e,n));mR.exports=NM});var yR=K((LU,vR)=>{var $M=Ho(),UM=(t,e,n)=>$M(t,e,n)===0;vR.exports=UM});var CR=K((MU,wR)=>{var HM=Ho(),WM=(t,e,n)=>HM(t,e,n)!==0;wR.exports=WM});var _R=K((NU,bR)=>{var jM=Ho(),zM=(t,e,n)=>jM(t,e,n)>0;bR.exports=zM});var DR=K(($U,TR)=>{var KM=Ho(),BM=(t,e,n)=>KM(t,e,n)>=0;TR.exports=BM});var SR=K((UU,RR)=>{var VM=Ho(),GM=(t,e,n)=>VM(t,e,n)<0;RR.exports=GM});var PR=K((HU,xR)=>{var XM=Ho(),QM=(t,e,n)=>XM(t,e,n)<=0;xR.exports=QM});var kR=K((WU,ER)=>{var JM=yR(),YM=CR(),ZM=_R(),eN=DR(),tN=SR(),nN=PR(),rN=(t,e,n,i)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return JM(t,n,i);case"!=":return YM(t,n,i);case">":return ZM(t,n,i);case">=":return eN(t,n,i);case"<":return tN(t,n,i);case"<=":return nN(t,n,i);default:throw new TypeError(`Invalid operator: ${e}`)}};ER.exports=rN});var MR=K((jU,LR)=>{var Wa=Symbol("SemVer ANY"),Lm=class t{static get ANY(){return Wa}constructor(e,n){if(n=IR(n),e instanceof t){if(e.loose===!!n.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),Am("comparator",e,n),this.options=n,this.loose=!!n.loose,this.parse(e),this.semver===Wa?this.value="":this.value=this.operator+this.semver.version,Am("comp",this)}parse(e){let n=this.options.loose?OR[qR.COMPARATORLOOSE]:OR[qR.COMPARATOR],i=e.match(n);if(!i)throw new TypeError(`Invalid comparator: ${e}`);this.operator=i[1]!==void 0?i[1]:"",this.operator==="="&&(this.operator=""),i[2]?this.semver=new FR(i[2],this.options.loose):this.semver=Wa}toString(){return this.value}test(e){if(Am("Comparator.test",e,this.options.loose),this.semver===Wa||e===Wa)return!0;if(typeof e=="string")try{e=new FR(e,this.options)}catch{return!1}return Fm(e,this.operator,this.semver,this.options)}intersects(e,n){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new AR(e.value,n).test(this.value):e.operator===""?e.value===""?!0:new AR(this.value,n).test(e.semver):(n=IR(n),n.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!n.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||Fm(this.semver,"<",e.semver,n)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||Fm(this.semver,">",e.semver,n)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};LR.exports=Lm;var IR=kl(),{safeRe:OR,t:qR}=El(),Fm=kR(),Am=Ua(),FR=Ha(),AR=Mm()});var Mm=K((zU,HR)=>{var iN=/\s+/g,Nm=class t{constructor(e,n){if(n=sN(n),e instanceof t)return e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease?e:new t(e.raw,n);if(e instanceof $m)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=e.trim().replace(iN," "),this.set=this.raw.split("||").map(i=>this.parseRange(i.trim())).filter(i=>i.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let i=this.set[0];if(this.set=this.set.filter(s=>!$R(s[0])),this.set.length===0)this.set=[i];else if(this.set.length>1){for(let s of this.set)if(s.length===1&&pN(s[0])){this.set=[s];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let n=this.set[e];for(let i=0;i<n.length;i++)i>0&&(this.formatted+=" "),this.formatted+=n[i].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let i=((this.options.includePrerelease&&dN)|(this.options.loose&&fN))+":"+e,s=NR.get(i);if(s)return s;let c=this.options.loose,u=c?gr[Yn.HYPHENRANGELOOSE]:gr[Yn.HYPHENRANGE];e=e.replace(u,TN(this.options.includePrerelease)),Pt("hyphen replace",e),e=e.replace(gr[Yn.COMPARATORTRIM],cN),Pt("comparator trim",e),e=e.replace(gr[Yn.TILDETRIM],uN),Pt("tilde trim",e),e=e.replace(gr[Yn.CARETTRIM],lN),Pt("caret trim",e);let l=e.split(" ").map(C=>hN(C,this.options)).join(" ").split(/\s+/).map(C=>_N(C,this.options));c&&(l=l.filter(C=>(Pt("loose invalid filter",C,this.options),!!C.match(gr[Yn.COMPARATORLOOSE])))),Pt("range list",l);let f=new Map,h=l.map(C=>new $m(C,this.options));for(let C of h){if($R(C))return[C];f.set(C.value,C)}f.size>1&&f.has("")&&f.delete("");let g=[...f.values()];return NR.set(i,g),g}intersects(e,n){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(i=>UR(i,n)&&e.set.some(s=>UR(s,n)&&i.every(c=>s.every(u=>c.intersects(u,n)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new aN(e,this.options)}catch{return!1}for(let n=0;n<this.set.length;n++)if(DN(this.set[n],e,this.options))return!0;return!1}};HR.exports=Nm;var oN=hR(),NR=new oN,sN=kl(),$m=MR(),Pt=Ua(),aN=Ha(),{safeRe:gr,t:Yn,comparatorTrimReplace:cN,tildeTrimReplace:uN,caretTrimReplace:lN}=El(),{FLAG_INCLUDE_PRERELEASE:dN,FLAG_LOOSE:fN}=Pl(),$R=t=>t.value==="<0.0.0-0",pN=t=>t.value==="",UR=(t,e)=>{let n=!0,i=t.slice(),s=i.pop();for(;n&&i.length;)n=i.every(c=>s.intersects(c,e)),s=i.pop();return n},hN=(t,e)=>(Pt("comp",t,e),t=vN(t,e),Pt("caret",t),t=gN(t,e),Pt("tildes",t),t=wN(t,e),Pt("xrange",t),t=bN(t,e),Pt("stars",t),t),Zn=t=>!t||t.toLowerCase()==="x"||t==="*",gN=(t,e)=>t.trim().split(/\s+/).map(n=>mN(n,e)).join(" "),mN=(t,e)=>{let n=e.loose?gr[Yn.TILDELOOSE]:gr[Yn.TILDE];return t.replace(n,(i,s,c,u,l)=>{Pt("tilde",t,i,s,c,u,l);let f;return Zn(s)?f="":Zn(c)?f=`>=${s}.0.0 <${+s+1}.0.0-0`:Zn(u)?f=`>=${s}.${c}.0 <${s}.${+c+1}.0-0`:l?(Pt("replaceTilde pr",l),f=`>=${s}.${c}.${u}-${l} <${s}.${+c+1}.0-0`):f=`>=${s}.${c}.${u} <${s}.${+c+1}.0-0`,Pt("tilde return",f),f})},vN=(t,e)=>t.trim().split(/\s+/).map(n=>yN(n,e)).join(" "),yN=(t,e)=>{Pt("caret",t,e);let n=e.loose?gr[Yn.CARETLOOSE]:gr[Yn.CARET],i=e.includePrerelease?"-0":"";return t.replace(n,(s,c,u,l,f)=>{Pt("caret",t,s,c,u,l,f);let h;return Zn(c)?h="":Zn(u)?h=`>=${c}.0.0${i} <${+c+1}.0.0-0`:Zn(l)?c==="0"?h=`>=${c}.${u}.0${i} <${c}.${+u+1}.0-0`:h=`>=${c}.${u}.0${i} <${+c+1}.0.0-0`:f?(Pt("replaceCaret pr",f),c==="0"?u==="0"?h=`>=${c}.${u}.${l}-${f} <${c}.${u}.${+l+1}-0`:h=`>=${c}.${u}.${l}-${f} <${c}.${+u+1}.0-0`:h=`>=${c}.${u}.${l}-${f} <${+c+1}.0.0-0`):(Pt("no pr"),c==="0"?u==="0"?h=`>=${c}.${u}.${l}${i} <${c}.${u}.${+l+1}-0`:h=`>=${c}.${u}.${l}${i} <${c}.${+u+1}.0-0`:h=`>=${c}.${u}.${l} <${+c+1}.0.0-0`),Pt("caret return",h),h})},wN=(t,e)=>(Pt("replaceXRanges",t,e),t.split(/\s+/).map(n=>CN(n,e)).join(" ")),CN=(t,e)=>{t=t.trim();let n=e.loose?gr[Yn.XRANGELOOSE]:gr[Yn.XRANGE];return t.replace(n,(i,s,c,u,l,f)=>{Pt("xRange",t,i,s,c,u,l,f);let h=Zn(c),g=h||Zn(u),C=g||Zn(l),_=C;return s==="="&&_&&(s=""),f=e.includePrerelease?"-0":"",h?s===">"||s==="<"?i="<0.0.0-0":i="*":s&&_?(g&&(u=0),l=0,s===">"?(s=">=",g?(c=+c+1,u=0,l=0):(u=+u+1,l=0)):s==="<="&&(s="<",g?c=+c+1:u=+u+1),s==="<"&&(f="-0"),i=`${s+c}.${u}.${l}${f}`):g?i=`>=${c}.0.0${f} <${+c+1}.0.0-0`:C&&(i=`>=${c}.${u}.0${f} <${c}.${+u+1}.0-0`),Pt("xRange return",i),i})},bN=(t,e)=>(Pt("replaceStars",t,e),t.trim().replace(gr[Yn.STAR],"")),_N=(t,e)=>(Pt("replaceGTE0",t,e),t.trim().replace(gr[e.includePrerelease?Yn.GTE0PRE:Yn.GTE0],"")),TN=t=>(e,n,i,s,c,u,l,f,h,g,C,_)=>(Zn(i)?n="":Zn(s)?n=`>=${i}.0.0${t?"-0":""}`:Zn(c)?n=`>=${i}.${s}.0${t?"-0":""}`:u?n=`>=${n}`:n=`>=${n}${t?"-0":""}`,Zn(h)?f="":Zn(g)?f=`<${+h+1}.0.0-0`:Zn(C)?f=`<${h}.${+g+1}.0-0`:_?f=`<=${h}.${g}.${C}-${_}`:t?f=`<${h}.${g}.${+C+1}-0`:f=`<=${f}`,`${n} ${f}`.trim()),DN=(t,e,n)=>{for(let i=0;i<t.length;i++)if(!t[i].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(let i=0;i<t.length;i++)if(Pt(t[i].semver),t[i].semver!==$m.ANY&&t[i].semver.prerelease.length>0){let s=t[i].semver;if(s.major===e.major&&s.minor===e.minor&&s.patch===e.patch)return!0}return!1}return!0}});var jR=K((KU,WR)=>{var RN=Mm(),SN=(t,e,n)=>{try{e=new RN(e,n)}catch{return!1}return e.test(t)};WR.exports=SN});var KR=K(Fr=>{"use strict";var xN=Fr&&Fr.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var s=Object.getOwnPropertyDescriptor(e,n);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,s)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Um=Fr&&Fr.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&xN(e,t,n)};Object.defineProperty(Fr,"__esModule",{value:!0});Fr.DiagnosticPullMode=Fr.vsdiag=void 0;Um(xe(),Fr);Um(nt(),Fr);var zR=Vh();Object.defineProperty(Fr,"vsdiag",{enumerable:!0,get:function(){return zR.vsdiag}});Object.defineProperty(Fr,"DiagnosticPullMode",{enumerable:!0,get:function(){return zR.DiagnosticPullMode}});Um(Pm(),Fr)});var Fl=K(mr=>{"use strict";var PN=mr&&mr.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var s=Object.getOwnPropertyDescriptor(e,n);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,s)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),GR=mr&&mr.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&PN(e,t,n)};Object.defineProperty(mr,"__esModule",{value:!0});mr.SettingMonitor=mr.LanguageClient=mr.TransportKind=void 0;var Ui=require("child_process"),Hm=require("fs"),Wm=require("path"),ho=require("vscode"),Ft=cr(),BR=Pm(),EN=QD(),Wt=Em(),kN=fR(),IN=jR();GR(Em(),mr);GR(KR(),mr);var VR="^1.82.0",jt;(function(t){t[t.stdio=0]="stdio",t[t.ipc=1]="ipc",t[t.pipe=2]="pipe",t[t.socket=3]="socket"})(jt||(mr.TransportKind=jt={}));var po;(function(t){function e(n){let i=n;return i&&i.kind===jt.socket&&Ft.number(i.port)}t.isSocket=e})(po||(po={}));var jm;(function(t){function e(n){return Ft.string(n.command)}t.is=e})(jm||(jm={}));var zm;(function(t){function e(n){return Ft.string(n.module)}t.is=e})(zm||(zm={}));var Km;(function(t){function e(n){let i=n;return i&&i.writer!==void 0&&i.reader!==void 0}t.is=e})(Km||(Km={}));var Bm;(function(t){function e(n){let i=n;return i&&i.process!==void 0&&typeof i.detached=="boolean"}t.is=e})(Bm||(Bm={}));var Vm=class extends BR.BaseLanguageClient{constructor(e,n,i,s,c){let u,l,f,h,g;Ft.string(n)?(u=e,l=n,f=i,h=s,g=!!c):(u=e.toLowerCase(),l=e,f=n,h=i,g=s),g===void 0&&(g=!1),super(u,l,h),this._serverOptions=f,this._forceDebug=g,this._isInDebugMode=g;try{this.checkVersion()}catch(C){throw Ft.string(C.message)&&this.outputChannel.appendLine(C.message),C}}checkVersion(){let e=kN(ho.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${ho.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!IN(e,VR))throw new Error(`The language client requires VS Code version ${VR} but received version ${ho.version}`)}get isInDebugMode(){return this._isInDebugMode}async restart(){await this.stop(),this.isInDebugMode?(await new Promise(e=>setTimeout(e,1e3)),await this.start()):await this.start()}stop(e=2e3){return super.stop(e).finally(()=>{if(this._serverProcess){let n=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(n),this._isDetached=void 0}})}checkProcessDied(e){!e||e.pid===void 0||setTimeout(()=>{try{e.pid!==void 0&&(process.kill(e.pid,0),(0,EN.terminate)(e))}catch{}},2e3)}handleConnectionClosed(){return this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),e.processId===null&&(e.processId=process.pid)}createMessageTransports(e){function n(g,C){if(!g&&!C)return;let _=Object.create(null);return Object.keys(process.env).forEach(S=>_[S]=process.env[S]),C&&(_.ELECTRON_RUN_AS_NODE="1",_.ELECTRON_NO_ASAR="1"),g&&Object.keys(g).forEach(S=>_[S]=g[S]),_}let i=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],s=["--debug","--debug-brk","--inspect","--inspect-brk"];function c(){let g=process.execArgv;return g?g.some(C=>i.some(_=>C.startsWith(_))||s.some(_=>C===_)):!1}function u(g){if(g.stdin===null||g.stdout===null||g.stderr===null)throw new Error("Process created without stdio streams")}let l=this._serverOptions;if(Ft.func(l))return l().then(g=>{if(BR.MessageTransports.is(g))return this._isDetached=!!g.detached,g;if(Km.is(g))return this._isDetached=!!g.detached,{reader:new Wt.StreamMessageReader(g.reader),writer:new Wt.StreamMessageWriter(g.writer)};{let C;return Bm.is(g)?(C=g.process,this._isDetached=g.detached):(C=g,this._isDetached=!1),C.stderr.on("data",_=>this.outputChannel.append(Ft.string(_)?_:_.toString(e))),{reader:new Wt.StreamMessageReader(C.stdout),writer:new Wt.StreamMessageWriter(C.stdin)}}});let f,h=l;return h.run||h.debug?this._forceDebug||c()?(f=h.debug,this._isInDebugMode=!0):(f=h.run,this._isInDebugMode=!1):f=l,this._getServerWorkingDir(f.options).then(g=>{if(zm.is(f)&&f.module){let C=f,_=C.transport||jt.stdio;if(C.runtime){let S=[],T=C.options??Object.create(null);T.execArgv&&T.execArgv.forEach(B=>S.push(B)),S.push(C.module),C.args&&C.args.forEach(B=>S.push(B));let L=Object.create(null);L.cwd=g,L.env=n(T.env,!1);let F=this._getRuntimePath(C.runtime,g),H;if(_===jt.ipc?(L.stdio=[null,null,null,"ipc"],S.push("--node-ipc")):_===jt.stdio?S.push("--stdio"):_===jt.pipe?(H=(0,Wt.generateRandomPipeName)(),S.push(`--pipe=${H}`)):po.isSocket(_)&&S.push(`--socket=${_.port}`),S.push(`--clientProcessId=${process.pid.toString()}`),_===jt.ipc||_===jt.stdio){let B=Ui.spawn(F,S,L);return!B||!B.pid?Ms(B,`Launching server using runtime ${F} failed.`):(this._serverProcess=B,B.stderr.on("data",U=>this.outputChannel.append(Ft.string(U)?U:U.toString(e))),_===jt.ipc?(B.stdout.on("data",U=>this.outputChannel.append(Ft.string(U)?U:U.toString(e))),Promise.resolve({reader:new Wt.IPCMessageReader(B),writer:new Wt.IPCMessageWriter(B)})):Promise.resolve({reader:new Wt.StreamMessageReader(B.stdout),writer:new Wt.StreamMessageWriter(B.stdin)}))}else{if(_===jt.pipe)return(0,Wt.createClientPipeTransport)(H).then(B=>{let U=Ui.spawn(F,S,L);return!U||!U.pid?Ms(U,`Launching server using runtime ${F} failed.`):(this._serverProcess=U,U.stderr.on("data",ee=>this.outputChannel.append(Ft.string(ee)?ee:ee.toString(e))),U.stdout.on("data",ee=>this.outputChannel.append(Ft.string(ee)?ee:ee.toString(e))),B.onConnected().then(ee=>({reader:ee[0],writer:ee[1]})))});if(po.isSocket(_))return(0,Wt.createClientSocketTransport)(_.port).then(B=>{let U=Ui.spawn(F,S,L);return!U||!U.pid?Ms(U,`Launching server using runtime ${F} failed.`):(this._serverProcess=U,U.stderr.on("data",ee=>this.outputChannel.append(Ft.string(ee)?ee:ee.toString(e))),U.stdout.on("data",ee=>this.outputChannel.append(Ft.string(ee)?ee:ee.toString(e))),B.onConnected().then(ee=>({reader:ee[0],writer:ee[1]})))})}}else{let S;return new Promise((T,L)=>{let F=(C.args&&C.args.slice())??[];_===jt.ipc?F.push("--node-ipc"):_===jt.stdio?F.push("--stdio"):_===jt.pipe?(S=(0,Wt.generateRandomPipeName)(),F.push(`--pipe=${S}`)):po.isSocket(_)&&F.push(`--socket=${_.port}`),F.push(`--clientProcessId=${process.pid.toString()}`);let H=C.options??Object.create(null);if(H.env=n(H.env,!0),H.execArgv=H.execArgv||[],H.cwd=g,H.silent=!0,_===jt.ipc||_===jt.stdio){let B=Ui.fork(C.module,F||[],H);u(B),this._serverProcess=B,B.stderr.on("data",U=>this.outputChannel.append(Ft.string(U)?U:U.toString(e))),_===jt.ipc?(B.stdout.on("data",U=>this.outputChannel.append(Ft.string(U)?U:U.toString(e))),T({reader:new Wt.IPCMessageReader(this._serverProcess),writer:new Wt.IPCMessageWriter(this._serverProcess)})):T({reader:new Wt.StreamMessageReader(B.stdout),writer:new Wt.StreamMessageWriter(B.stdin)})}else _===jt.pipe?(0,Wt.createClientPipeTransport)(S).then(B=>{let U=Ui.fork(C.module,F||[],H);u(U),this._serverProcess=U,U.stderr.on("data",ee=>this.outputChannel.append(Ft.string(ee)?ee:ee.toString(e))),U.stdout.on("data",ee=>this.outputChannel.append(Ft.string(ee)?ee:ee.toString(e))),B.onConnected().then(ee=>{T({reader:ee[0],writer:ee[1]})},L)},L):po.isSocket(_)&&(0,Wt.createClientSocketTransport)(_.port).then(B=>{let U=Ui.fork(C.module,F||[],H);u(U),this._serverProcess=U,U.stderr.on("data",ee=>this.outputChannel.append(Ft.string(ee)?ee:ee.toString(e))),U.stdout.on("data",ee=>this.outputChannel.append(Ft.string(ee)?ee:ee.toString(e))),B.onConnected().then(ee=>{T({reader:ee[0],writer:ee[1]})},L)},L)})}}else if(jm.is(f)&&f.command){let C=f,_=f.args!==void 0?f.args.slice(0):[],S,T=f.transport;if(T===jt.stdio)_.push("--stdio");else if(T===jt.pipe)S=(0,Wt.generateRandomPipeName)(),_.push(`--pipe=${S}`);else if(po.isSocket(T))_.push(`--socket=${T.port}`);else if(T===jt.ipc)throw new Error("Transport kind ipc is not support for command executable");let L=Object.assign({},C.options);if(L.cwd=L.cwd||g,T===void 0||T===jt.stdio){let F=Ui.spawn(C.command,_,L);return!F||!F.pid?Ms(F,`Launching server using command ${C.command} failed.`):(F.stderr.on("data",H=>this.outputChannel.append(Ft.string(H)?H:H.toString(e))),this._serverProcess=F,this._isDetached=!!L.detached,Promise.resolve({reader:new Wt.StreamMessageReader(F.stdout),writer:new Wt.StreamMessageWriter(F.stdin)}))}else{if(T===jt.pipe)return(0,Wt.createClientPipeTransport)(S).then(F=>{let H=Ui.spawn(C.command,_,L);return!H||!H.pid?Ms(H,`Launching server using command ${C.command} failed.`):(this._serverProcess=H,this._isDetached=!!L.detached,H.stderr.on("data",B=>this.outputChannel.append(Ft.string(B)?B:B.toString(e))),H.stdout.on("data",B=>this.outputChannel.append(Ft.string(B)?B:B.toString(e))),F.onConnected().then(B=>({reader:B[0],writer:B[1]})))});if(po.isSocket(T))return(0,Wt.createClientSocketTransport)(T.port).then(F=>{let H=Ui.spawn(C.command,_,L);return!H||!H.pid?Ms(H,`Launching server using command ${C.command} failed.`):(this._serverProcess=H,this._isDetached=!!L.detached,H.stderr.on("data",B=>this.outputChannel.append(Ft.string(B)?B:B.toString(e))),H.stdout.on("data",B=>this.outputChannel.append(Ft.string(B)?B:B.toString(e))),F.onConnected().then(B=>({reader:B[0],writer:B[1]})))})}}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(l,null,4)))}).finally(()=>{this._serverProcess!==void 0&&this._serverProcess.on("exit",(g,C)=>{g!==null&&this.error(`Server process exited with code ${g}.`,void 0,!1),C!==null&&this.error(`Server process exited with signal ${C}.`,void 0,!1)})})}_getRuntimePath(e,n){if(Wm.isAbsolute(e))return e;let i=this._mainGetRootPath();if(i!==void 0){let s=Wm.join(i,e);if(Hm.existsSync(s))return s}if(n!==void 0){let s=Wm.join(n,e);if(Hm.existsSync(s))return s}return e}_mainGetRootPath(){let e=ho.workspace.workspaceFolders;if(!e||e.length===0)return;let n=e[0];if(n.uri.scheme==="file")return n.uri.fsPath}_getServerWorkingDir(e){let n=e&&e.cwd;return n||(n=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),n?new Promise(i=>{Hm.lstat(n,(s,c)=>{i(!s&&c.isDirectory()?n:void 0)})}):Promise.resolve(void 0)}};mr.LanguageClient=Vm;var Gm=class{constructor(e,n){this._client=e,this._setting=n,this._listeners=[]}start(){return ho.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new ho.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),n=e>=0?this._setting.substr(0,e):this._setting,i=e>=0?this._setting.substr(e+1):void 0,s=i?ho.workspace.getConfiguration(n).get(i,!1):ho.workspace.getConfiguration(n);s&&this._client.needsStart()?this._client.start().catch(c=>this._client.error("Start failed after configuration change",c,"force")):!s&&this._client.needsStop()&&this._client.stop().catch(c=>this._client.error("Stop failed after configuration change",c,"force"))}};mr.SettingMonitor=Gm;function Ms(t,e){return t===null?Promise.reject(e):new Promise((n,i)=>{t.on("error",s=>{i(`${e} ${s}`)}),setImmediate(()=>i(e))})}});var Al=K((GU,XR)=>{"use strict";XR.exports=Fl()});var ov=K((dH,ZS)=>{"use strict";var YS=function(){function t(e,n){for(var i=0;i<n.length;i++){var s=n[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function n2(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var go=[[{color:"0, 0, 0",class:"ansi-black"},{color:"187, 0, 0",class:"ansi-red"},{color:"0, 187, 0",class:"ansi-green"},{color:"187, 187, 0",class:"ansi-yellow"},{color:"0, 0, 187",class:"ansi-blue"},{color:"187, 0, 187",class:"ansi-magenta"},{color:"0, 187, 187",class:"ansi-cyan"},{color:"255,255,255",class:"ansi-white"}],[{color:"85, 85, 85",class:"ansi-bright-black"},{color:"255, 85, 85",class:"ansi-bright-red"},{color:"0, 255, 0",class:"ansi-bright-green"},{color:"255, 255, 85",class:"ansi-bright-yellow"},{color:"85, 85, 255",class:"ansi-bright-blue"},{color:"255, 85, 255",class:"ansi-bright-magenta"},{color:"85, 255, 255",class:"ansi-bright-cyan"},{color:"255, 255, 255",class:"ansi-bright-white"}]],r2=/(https?:\/\/(?:[A-Za-z0-9#;/?:@=+$',_.!~*()[\]-]|&amp;|%[A-Fa-f0-9]{2})+)/gm,i2=function(){YS(t,null,[{key:"escapeForHtml",value:function(n){return new t().escapeForHtml(n)}},{key:"linkify",value:function(n){return new t().linkify(n)}},{key:"ansiToHtml",value:function(n,i){return new t().ansiToHtml(n,i)}},{key:"ansiToJson",value:function(n,i){return new t().ansiToJson(n,i)}},{key:"ansiToText",value:function(n){return new t().ansiToText(n)}}]);function t(){n2(this,t),this.fg=this.bg=this.fg_truecolor=this.bg_truecolor=null,this.bright=0,this.decorations=[]}return YS(t,[{key:"setupPalette",value:function(){this.PALETTE_COLORS=[];for(var n=0;n<2;++n)for(var i=0;i<8;++i)this.PALETTE_COLORS.push(go[n][i].color);for(var s=[0,95,135,175,215,255],c=function(L,F,H){return s[L]+", "+s[F]+", "+s[H]},u=void 0,l=void 0,f=void 0,h=0;h<6;++h)for(var g=0;g<6;++g)for(var C=0;C<6;++C)this.PALETTE_COLORS.push(c(h,g,C));for(var _=8,S=0;S<24;++S,_+=10)this.PALETTE_COLORS.push(c(_,_,_))}},{key:"escapeForHtml",value:function(n){return n.replace(/[&<>\"]/gm,function(i){return i=="&"?"&amp;":i=='"'?"&quot;":i=="<"?"&lt;":i==">"?"&gt;":""})}},{key:"linkify",value:function(n){return n.replace(r2,function(i){return'<a href="'+i+'">'+i+"</a>"})}},{key:"ansiToHtml",value:function(n,i){return this.process(n,i,!0)}},{key:"ansiToJson",value:function(n,i){return i=i||{},i.json=!0,i.clearLine=!1,this.process(n,i,!0)}},{key:"ansiToText",value:function(n){return this.process(n,{},!1)}},{key:"process",value:function(n,i,s){var c=this,u=this,l=n.split(/\033\[/),f=l.shift();i==null&&(i={}),i.clearLine=/\r/.test(n);var h=l.map(function(C){return c.processChunk(C,i,s)});if(i&&i.json){var g=u.processChunkJson("");return g.content=f,g.clearLine=i.clearLine,h.unshift(g),i.remove_empty&&(h=h.filter(function(C){return!C.isEmpty()})),h}else h.unshift(f);return h.join("")}},{key:"processChunkJson",value:function(n,i,s){i=typeof i>"u"?{}:i;var c=i.use_classes=typeof i.use_classes<"u"&&i.use_classes,u=i.key=c?"class":"color",l={content:n,fg:null,bg:null,fg_truecolor:null,bg_truecolor:null,isInverted:!1,clearLine:i.clearLine,decoration:null,decorations:[],was_processed:!1,isEmpty:function(){return!l.content}},f=n.match(/^([!\x3c-\x3f]*)([\d;]*)([\x20-\x2c]*[\x40-\x7e])([\s\S]*)/m);if(!f)return l;var h=l.content=f[4],g=f[2].split(";");if(f[1]!==""||f[3]!=="m"||!s)return l;for(var C=this;g.length>0;){var _=g.shift(),S=parseInt(_);if(isNaN(S)||S===0)C.fg=C.bg=null,C.decorations=[];else if(S===1)C.decorations.push("bold");else if(S===2)C.decorations.push("dim");else if(S===3)C.decorations.push("italic");else if(S===4)C.decorations.push("underline");else if(S===5)C.decorations.push("blink");else if(S===7)C.decorations.push("reverse");else if(S===8)C.decorations.push("hidden");else if(S===9)C.decorations.push("strikethrough");else if(S===21)C.removeDecoration("bold");else if(S===22)C.removeDecoration("bold"),C.removeDecoration("dim");else if(S===23)C.removeDecoration("italic");else if(S===24)C.removeDecoration("underline");else if(S===25)C.removeDecoration("blink");else if(S===27)C.removeDecoration("reverse");else if(S===28)C.removeDecoration("hidden");else if(S===29)C.removeDecoration("strikethrough");else if(S===39)C.fg=null;else if(S===49)C.bg=null;else if(S>=30&&S<38)C.fg=go[0][S%10][u];else if(S>=90&&S<98)C.fg=go[1][S%10][u];else if(S>=40&&S<48)C.bg=go[0][S%10][u];else if(S>=100&&S<108)C.bg=go[1][S%10][u];else if(S===38||S===48){var T=S===38;if(g.length>=1){var L=g.shift();if(L==="5"&&g.length>=1){var F=parseInt(g.shift());if(F>=0&&F<=255)if(!c)this.PALETTE_COLORS||C.setupPalette(),T?C.fg=this.PALETTE_COLORS[F]:C.bg=this.PALETTE_COLORS[F];else{var H=F>=16?"ansi-palette-"+F:go[F>7?1:0][F%8].class;T?C.fg=H:C.bg=H}}else if(L==="2"&&g.length>=3){var B=parseInt(g.shift()),U=parseInt(g.shift()),ee=parseInt(g.shift());if(B>=0&&B<=255&&U>=0&&U<=255&&ee>=0&&ee<=255){var oe=B+", "+U+", "+ee;c?T?(C.fg="ansi-truecolor",C.fg_truecolor=oe):(C.bg="ansi-truecolor",C.bg_truecolor=oe):T?C.fg=oe:C.bg=oe}}}}}if(C.fg===null&&C.bg===null&&C.decorations.length===0)return l;var ye=[],se=[],we={};return l.fg=C.fg,l.bg=C.bg,l.fg_truecolor=C.fg_truecolor,l.bg_truecolor=C.bg_truecolor,l.decorations=C.decorations,l.decoration=C.decorations.slice(-1).pop()||null,l.was_processed=!0,l}},{key:"processChunk",value:function(n,i,s){var c=this;i=i||{};var u=this.processChunkJson(n,i,s),l=i.use_classes;if(u.decorations=u.decorations.filter(function(S){if(S==="reverse"){u.fg||(u.fg=go[0][7][l?"class":"color"]),u.bg||(u.bg=go[0][0][l?"class":"color"]);var T=u.fg;u.fg=u.bg,u.bg=T;var L=u.fg_truecolor;return u.fg_truecolor=u.bg_truecolor,u.bg_truecolor=L,u.isInverted=!0,!1}return!0}),i.json)return u;if(u.isEmpty())return"";if(!u.was_processed)return u.content;var f=[],h=[],g=[],C={},_=function(T){var L=[],F=void 0;for(F in T)T.hasOwnProperty(F)&&L.push("data-"+F+'="'+c.escapeForHtml(T[F])+'"');return L.length>0?" "+L.join(" "):""};return u.isInverted&&(C["ansi-is-inverted"]="true"),u.fg&&(l?(f.push(u.fg+"-fg"),u.fg_truecolor!==null&&(C["ansi-truecolor-fg"]=u.fg_truecolor,u.fg_truecolor=null)):f.push("color:rgb("+u.fg+")")),u.bg&&(l?(f.push(u.bg+"-bg"),u.bg_truecolor!==null&&(C["ansi-truecolor-bg"]=u.bg_truecolor,u.bg_truecolor=null)):f.push("background-color:rgb("+u.bg+")")),u.decorations.forEach(function(S){if(l){h.push("ansi-"+S);return}S==="bold"?h.push("font-weight:bold"):S==="dim"?h.push("opacity:0.5"):S==="italic"?h.push("font-style:italic"):S==="hidden"?h.push("visibility:hidden"):S==="strikethrough"?g.push("line-through"):g.push(S)}),g.length&&h.push("text-decoration:"+g.join(" ")),l?'<span class="'+f.concat(h).join(" ")+'"'+_(C)+">"+u.content+"</span>":'<span style="'+f.concat(h).join(";")+'"'+_(C)+">"+u.content+"</span>"}},{key:"removeDecoration",value:function(n){var i=this.decorations.indexOf(n);i>=0&&this.decorations.splice(i,1)}}]),t}();ZS.exports=i2});var nx=K((Us,Za)=>{(function(){var t,e="4.17.21",n=200,i="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",c="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",l=500,f="__lodash_placeholder__",h=1,g=2,C=4,_=1,S=2,T=1,L=2,F=4,H=8,B=16,U=32,ee=64,oe=128,ye=256,se=512,we=30,Ie="...",Lt=800,Et=16,Mt=1,tr=2,yn=3,Rt=1/0,Ct=9007199254740991,yr=17976931348623157e292,Un=NaN,Ke=4294967295,Rn=Ke-1,wn=Ke>>>1,sn=[["ary",oe],["bind",T],["bindKey",L],["curry",H],["curryRight",B],["flip",se],["partial",U],["partialRight",ee],["rearg",ye]],Hn="[object Arguments]",Wn="[object Array]",Ar="[object AsyncFunction]",jn="[object Boolean]",nr="[object Date]",Lr="[object DOMException]",Sn="[object Error]",xn="[object Function]",wr="[object GeneratorFunction]",st="[object Map]",zn="[object Number]",Cr="[object Null]",Kt="[object Object]",ei="[object Promise]",rr="[object Proxy]",Pn="[object RegExp]",rt="[object Set]",Bt="[object String]",Vt="[object Symbol]",Kn="[object Undefined]",tn="[object WeakMap]",Mr="[object WeakSet]",Bn="[object ArrayBuffer]",fn="[object DataView]",br="[object Float32Array]",an="[object Float64Array]",E="[object Int8Array]",V="[object Int16Array]",re="[object Int32Array]",ae="[object Uint8Array]",Be="[object Uint8ClampedArray]",We="[object Uint16Array]",Ze="[object Uint32Array]",ft=/\b__p \+= '';/g,Pe=/\b(__p \+=) '' \+/g,et=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ne=/&(?:amp|lt|gt|quot|#39);/g,at=/[&<>"']/g,kt=RegExp(Ne.source),nn=RegExp(at.source),di=/<%-([\s\S]+?)%>/g,fi=/<%([\s\S]+?)%>/g,y=/<%=([\s\S]+?)%>/g,j=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,le=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,A=/[\\^$.*+?()[\]{}|]/g,w=RegExp(A.source),k=/^\s+/,I=/\s/,R=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,v=/\{\n\/\* \[wrapped with (.+)\] \*/,$=/,? & /,J=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Re=/[()=,{}\[\]\/\s]/,bt=/\\(\\)?/g,pt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Cn=/\w*$/,Vn=/^[-+]0x[0-9a-f]+$/i,_r=/^0b[01]+$/i,$e=/^\[object .+?Constructor\]$/,Nr=/^0o[0-7]+$/i,p=/^(?:0|[1-9]\d*)$/,q=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Q=/($^)/,he=/['\n\r\u2028\u2029\\]/g,Nt="\\ud800-\\udfff",cn="\\u0300-\\u036f",ct="\\ufe20-\\ufe2f",$r="\\u20d0-\\u20ff",ht=cn+ct+$r,vo="\\u2700-\\u27bf",zs="a-z\\xdf-\\xf6\\xf8-\\xff",rc="\\xac\\xb1\\xd7\\xf7",Ks="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ld="\\u2000-\\u206f",ic=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",fv="A-Z\\xc0-\\xd6\\xd8-\\xde",pv="\\ufe0e\\ufe0f",hv=rc+Ks+ld+ic,dd="['\u2019]",DP="["+Nt+"]",gv="["+hv+"]",oc="["+ht+"]",mv="\\d+",RP="["+vo+"]",vv="["+zs+"]",yv="[^"+Nt+hv+mv+vo+zs+fv+"]",fd="\\ud83c[\\udffb-\\udfff]",SP="(?:"+oc+"|"+fd+")",wv="[^"+Nt+"]",pd="(?:\\ud83c[\\udde6-\\uddff]){2}",hd="[\\ud800-\\udbff][\\udc00-\\udfff]",Bo="["+fv+"]",Cv="\\u200d",bv="(?:"+vv+"|"+yv+")",xP="(?:"+Bo+"|"+yv+")",_v="(?:"+dd+"(?:d|ll|m|re|s|t|ve))?",Tv="(?:"+dd+"(?:D|LL|M|RE|S|T|VE))?",Dv=SP+"?",Rv="["+pv+"]?",PP="(?:"+Cv+"(?:"+[wv,pd,hd].join("|")+")"+Rv+Dv+")*",EP="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",kP="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Sv=Rv+Dv+PP,IP="(?:"+[RP,pd,hd].join("|")+")"+Sv,OP="(?:"+[wv+oc+"?",oc,pd,hd,DP].join("|")+")",qP=RegExp(dd,"g"),FP=RegExp(oc,"g"),gd=RegExp(fd+"(?="+fd+")|"+OP+Sv,"g"),AP=RegExp([Bo+"?"+vv+"+"+_v+"(?="+[gv,Bo,"$"].join("|")+")",xP+"+"+Tv+"(?="+[gv,Bo+bv,"$"].join("|")+")",Bo+"?"+bv+"+"+_v,Bo+"+"+Tv,kP,EP,mv,IP].join("|"),"g"),LP=RegExp("["+Cv+Nt+ht+pv+"]"),MP=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,NP=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],$P=-1,St={};St[br]=St[an]=St[E]=St[V]=St[re]=St[ae]=St[Be]=St[We]=St[Ze]=!0,St[Hn]=St[Wn]=St[Bn]=St[jn]=St[fn]=St[nr]=St[Sn]=St[xn]=St[st]=St[zn]=St[Kt]=St[Pn]=St[rt]=St[Bt]=St[tn]=!1;var _t={};_t[Hn]=_t[Wn]=_t[Bn]=_t[fn]=_t[jn]=_t[nr]=_t[br]=_t[an]=_t[E]=_t[V]=_t[re]=_t[st]=_t[zn]=_t[Kt]=_t[Pn]=_t[rt]=_t[Bt]=_t[Vt]=_t[ae]=_t[Be]=_t[We]=_t[Ze]=!0,_t[Sn]=_t[xn]=_t[tn]=!1;var UP={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},HP={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},WP={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},jP={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},zP=parseFloat,KP=parseInt,xv=typeof global=="object"&&global&&global.Object===Object&&global,BP=typeof self=="object"&&self&&self.Object===Object&&self,pn=xv||BP||Function("return this")(),md=typeof Us=="object"&&Us&&!Us.nodeType&&Us,yo=md&&typeof Za=="object"&&Za&&!Za.nodeType&&Za,Pv=yo&&yo.exports===md,vd=Pv&&xv.process,Ur=function(){try{var M=yo&&yo.require&&yo.require("util").types;return M||vd&&vd.binding&&vd.binding("util")}catch{}}(),Ev=Ur&&Ur.isArrayBuffer,kv=Ur&&Ur.isDate,Iv=Ur&&Ur.isMap,Ov=Ur&&Ur.isRegExp,qv=Ur&&Ur.isSet,Fv=Ur&&Ur.isTypedArray;function Tr(M,G,W){switch(W.length){case 0:return M.call(G);case 1:return M.call(G,W[0]);case 2:return M.call(G,W[0],W[1]);case 3:return M.call(G,W[0],W[1],W[2])}return M.apply(G,W)}function VP(M,G,W,pe){for(var Ee=-1,ut=M==null?0:M.length;++Ee<ut;){var un=M[Ee];G(pe,un,W(un),M)}return pe}function Hr(M,G){for(var W=-1,pe=M==null?0:M.length;++W<pe&&G(M[W],W,M)!==!1;);return M}function GP(M,G){for(var W=M==null?0:M.length;W--&&G(M[W],W,M)!==!1;);return M}function Av(M,G){for(var W=-1,pe=M==null?0:M.length;++W<pe;)if(!G(M[W],W,M))return!1;return!0}function Wi(M,G){for(var W=-1,pe=M==null?0:M.length,Ee=0,ut=[];++W<pe;){var un=M[W];G(un,W,M)&&(ut[Ee++]=un)}return ut}function sc(M,G){var W=M==null?0:M.length;return!!W&&Vo(M,G,0)>-1}function yd(M,G,W){for(var pe=-1,Ee=M==null?0:M.length;++pe<Ee;)if(W(G,M[pe]))return!0;return!1}function It(M,G){for(var W=-1,pe=M==null?0:M.length,Ee=Array(pe);++W<pe;)Ee[W]=G(M[W],W,M);return Ee}function ji(M,G){for(var W=-1,pe=G.length,Ee=M.length;++W<pe;)M[Ee+W]=G[W];return M}function wd(M,G,W,pe){var Ee=-1,ut=M==null?0:M.length;for(pe&&ut&&(W=M[++Ee]);++Ee<ut;)W=G(W,M[Ee],Ee,M);return W}function XP(M,G,W,pe){var Ee=M==null?0:M.length;for(pe&&Ee&&(W=M[--Ee]);Ee--;)W=G(W,M[Ee],Ee,M);return W}function Cd(M,G){for(var W=-1,pe=M==null?0:M.length;++W<pe;)if(G(M[W],W,M))return!0;return!1}var QP=bd("length");function JP(M){return M.split("")}function YP(M){return M.match(J)||[]}function Lv(M,G,W){var pe;return W(M,function(Ee,ut,un){if(G(Ee,ut,un))return pe=ut,!1}),pe}function ac(M,G,W,pe){for(var Ee=M.length,ut=W+(pe?1:-1);pe?ut--:++ut<Ee;)if(G(M[ut],ut,M))return ut;return-1}function Vo(M,G,W){return G===G?lE(M,G,W):ac(M,Mv,W)}function ZP(M,G,W,pe){for(var Ee=W-1,ut=M.length;++Ee<ut;)if(pe(M[Ee],G))return Ee;return-1}function Mv(M){return M!==M}function Nv(M,G){var W=M==null?0:M.length;return W?Td(M,G)/W:Un}function bd(M){return function(G){return G==null?t:G[M]}}function _d(M){return function(G){return M==null?t:M[G]}}function $v(M,G,W,pe,Ee){return Ee(M,function(ut,un,yt){W=pe?(pe=!1,ut):G(W,ut,un,yt)}),W}function eE(M,G){var W=M.length;for(M.sort(G);W--;)M[W]=M[W].value;return M}function Td(M,G){for(var W,pe=-1,Ee=M.length;++pe<Ee;){var ut=G(M[pe]);ut!==t&&(W=W===t?ut:W+ut)}return W}function Dd(M,G){for(var W=-1,pe=Array(M);++W<M;)pe[W]=G(W);return pe}function tE(M,G){return It(G,function(W){return[W,M[W]]})}function Uv(M){return M&&M.slice(0,zv(M)+1).replace(k,"")}function Dr(M){return function(G){return M(G)}}function Rd(M,G){return It(G,function(W){return M[W]})}function Bs(M,G){return M.has(G)}function Hv(M,G){for(var W=-1,pe=M.length;++W<pe&&Vo(G,M[W],0)>-1;);return W}function Wv(M,G){for(var W=M.length;W--&&Vo(G,M[W],0)>-1;);return W}function nE(M,G){for(var W=M.length,pe=0;W--;)M[W]===G&&++pe;return pe}var rE=_d(UP),iE=_d(HP);function oE(M){return"\\"+jP[M]}function sE(M,G){return M==null?t:M[G]}function Go(M){return LP.test(M)}function aE(M){return MP.test(M)}function cE(M){for(var G,W=[];!(G=M.next()).done;)W.push(G.value);return W}function Sd(M){var G=-1,W=Array(M.size);return M.forEach(function(pe,Ee){W[++G]=[Ee,pe]}),W}function jv(M,G){return function(W){return M(G(W))}}function zi(M,G){for(var W=-1,pe=M.length,Ee=0,ut=[];++W<pe;){var un=M[W];(un===G||un===f)&&(M[W]=f,ut[Ee++]=W)}return ut}function cc(M){var G=-1,W=Array(M.size);return M.forEach(function(pe){W[++G]=pe}),W}function uE(M){var G=-1,W=Array(M.size);return M.forEach(function(pe){W[++G]=[pe,pe]}),W}function lE(M,G,W){for(var pe=W-1,Ee=M.length;++pe<Ee;)if(M[pe]===G)return pe;return-1}function dE(M,G,W){for(var pe=W+1;pe--;)if(M[pe]===G)return pe;return pe}function Xo(M){return Go(M)?pE(M):QP(M)}function ti(M){return Go(M)?hE(M):JP(M)}function zv(M){for(var G=M.length;G--&&I.test(M.charAt(G)););return G}var fE=_d(WP);function pE(M){for(var G=gd.lastIndex=0;gd.test(M);)++G;return G}function hE(M){return M.match(gd)||[]}function gE(M){return M.match(AP)||[]}var mE=function M(G){G=G==null?pn:Ki.defaults(pn.Object(),G,Ki.pick(pn,NP));var W=G.Array,pe=G.Date,Ee=G.Error,ut=G.Function,un=G.Math,yt=G.Object,xd=G.RegExp,vE=G.String,Wr=G.TypeError,uc=W.prototype,yE=ut.prototype,Qo=yt.prototype,lc=G["__core-js_shared__"],dc=yE.toString,vt=Qo.hasOwnProperty,wE=0,Kv=function(){var r=/[^.]+$/.exec(lc&&lc.keys&&lc.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),fc=Qo.toString,CE=dc.call(yt),bE=pn._,_E=xd("^"+dc.call(vt).replace(A,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pc=Pv?G.Buffer:t,Bi=G.Symbol,hc=G.Uint8Array,Bv=pc?pc.allocUnsafe:t,gc=jv(yt.getPrototypeOf,yt),Vv=yt.create,Gv=Qo.propertyIsEnumerable,mc=uc.splice,Xv=Bi?Bi.isConcatSpreadable:t,Vs=Bi?Bi.iterator:t,wo=Bi?Bi.toStringTag:t,vc=function(){try{var r=Do(yt,"defineProperty");return r({},"",{}),r}catch{}}(),TE=G.clearTimeout!==pn.clearTimeout&&G.clearTimeout,DE=pe&&pe.now!==pn.Date.now&&pe.now,RE=G.setTimeout!==pn.setTimeout&&G.setTimeout,yc=un.ceil,wc=un.floor,Pd=yt.getOwnPropertySymbols,SE=pc?pc.isBuffer:t,Qv=G.isFinite,xE=uc.join,PE=jv(yt.keys,yt),ln=un.max,En=un.min,EE=pe.now,kE=G.parseInt,Jv=un.random,IE=uc.reverse,Ed=Do(G,"DataView"),Gs=Do(G,"Map"),kd=Do(G,"Promise"),Jo=Do(G,"Set"),Xs=Do(G,"WeakMap"),Qs=Do(yt,"create"),Cc=Xs&&new Xs,Yo={},OE=Ro(Ed),qE=Ro(Gs),FE=Ro(kd),AE=Ro(Jo),LE=Ro(Xs),bc=Bi?Bi.prototype:t,Js=bc?bc.valueOf:t,Yv=bc?bc.toString:t;function b(r){if(Gt(r)&&!Oe(r)&&!(r instanceof Ge)){if(r instanceof jr)return r;if(vt.call(r,"__wrapped__"))return Zy(r)}return new jr(r)}var Zo=function(){function r(){}return function(o){if(!$t(o))return{};if(Vv)return Vv(o);r.prototype=o;var a=new r;return r.prototype=t,a}}();function _c(){}function jr(r,o){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!o,this.__index__=0,this.__values__=t}b.templateSettings={escape:di,evaluate:fi,interpolate:y,variable:"",imports:{_:b}},b.prototype=_c.prototype,b.prototype.constructor=b,jr.prototype=Zo(_c.prototype),jr.prototype.constructor=jr;function Ge(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ke,this.__views__=[]}function ME(){var r=new Ge(this.__wrapped__);return r.__actions__=ir(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=ir(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=ir(this.__views__),r}function NE(){if(this.__filtered__){var r=new Ge(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function $E(){var r=this.__wrapped__.value(),o=this.__dir__,a=Oe(r),d=o<0,m=a?r.length:0,D=J0(0,m,this.__views__),P=D.start,O=D.end,N=O-P,Y=d?O:P-1,Z=this.__iteratees__,te=Z.length,ue=0,ge=En(N,this.__takeCount__);if(!a||!d&&m==N&&ge==N)return _y(r,this.__actions__);var be=[];e:for(;N--&&ue<ge;){Y+=o;for(var Me=-1,_e=r[Y];++Me<te;){var Ve=Z[Me],Je=Ve.iteratee,xr=Ve.type,Qn=Je(_e);if(xr==tr)_e=Qn;else if(!Qn){if(xr==Mt)continue e;break e}}be[ue++]=_e}return be}Ge.prototype=Zo(_c.prototype),Ge.prototype.constructor=Ge;function Co(r){var o=-1,a=r==null?0:r.length;for(this.clear();++o<a;){var d=r[o];this.set(d[0],d[1])}}function UE(){this.__data__=Qs?Qs(null):{},this.size=0}function HE(r){var o=this.has(r)&&delete this.__data__[r];return this.size-=o?1:0,o}function WE(r){var o=this.__data__;if(Qs){var a=o[r];return a===u?t:a}return vt.call(o,r)?o[r]:t}function jE(r){var o=this.__data__;return Qs?o[r]!==t:vt.call(o,r)}function zE(r,o){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=Qs&&o===t?u:o,this}Co.prototype.clear=UE,Co.prototype.delete=HE,Co.prototype.get=WE,Co.prototype.has=jE,Co.prototype.set=zE;function Ri(r){var o=-1,a=r==null?0:r.length;for(this.clear();++o<a;){var d=r[o];this.set(d[0],d[1])}}function KE(){this.__data__=[],this.size=0}function BE(r){var o=this.__data__,a=Tc(o,r);if(a<0)return!1;var d=o.length-1;return a==d?o.pop():mc.call(o,a,1),--this.size,!0}function VE(r){var o=this.__data__,a=Tc(o,r);return a<0?t:o[a][1]}function GE(r){return Tc(this.__data__,r)>-1}function XE(r,o){var a=this.__data__,d=Tc(a,r);return d<0?(++this.size,a.push([r,o])):a[d][1]=o,this}Ri.prototype.clear=KE,Ri.prototype.delete=BE,Ri.prototype.get=VE,Ri.prototype.has=GE,Ri.prototype.set=XE;function Si(r){var o=-1,a=r==null?0:r.length;for(this.clear();++o<a;){var d=r[o];this.set(d[0],d[1])}}function QE(){this.size=0,this.__data__={hash:new Co,map:new(Gs||Ri),string:new Co}}function JE(r){var o=Ac(this,r).delete(r);return this.size-=o?1:0,o}function YE(r){return Ac(this,r).get(r)}function ZE(r){return Ac(this,r).has(r)}function e0(r,o){var a=Ac(this,r),d=a.size;return a.set(r,o),this.size+=a.size==d?0:1,this}Si.prototype.clear=QE,Si.prototype.delete=JE,Si.prototype.get=YE,Si.prototype.has=ZE,Si.prototype.set=e0;function bo(r){var o=-1,a=r==null?0:r.length;for(this.__data__=new Si;++o<a;)this.add(r[o])}function t0(r){return this.__data__.set(r,u),this}function n0(r){return this.__data__.has(r)}bo.prototype.add=bo.prototype.push=t0,bo.prototype.has=n0;function ni(r){var o=this.__data__=new Ri(r);this.size=o.size}function r0(){this.__data__=new Ri,this.size=0}function i0(r){var o=this.__data__,a=o.delete(r);return this.size=o.size,a}function o0(r){return this.__data__.get(r)}function s0(r){return this.__data__.has(r)}function a0(r,o){var a=this.__data__;if(a instanceof Ri){var d=a.__data__;if(!Gs||d.length<n-1)return d.push([r,o]),this.size=++a.size,this;a=this.__data__=new Si(d)}return a.set(r,o),this.size=a.size,this}ni.prototype.clear=r0,ni.prototype.delete=i0,ni.prototype.get=o0,ni.prototype.has=s0,ni.prototype.set=a0;function Zv(r,o){var a=Oe(r),d=!a&&So(r),m=!a&&!d&&Ji(r),D=!a&&!d&&!m&&rs(r),P=a||d||m||D,O=P?Dd(r.length,vE):[],N=O.length;for(var Y in r)(o||vt.call(r,Y))&&!(P&&(Y=="length"||m&&(Y=="offset"||Y=="parent")||D&&(Y=="buffer"||Y=="byteLength"||Y=="byteOffset")||ki(Y,N)))&&O.push(Y);return O}function ey(r){var o=r.length;return o?r[Hd(0,o-1)]:t}function c0(r,o){return Lc(ir(r),_o(o,0,r.length))}function u0(r){return Lc(ir(r))}function Id(r,o,a){(a!==t&&!ri(r[o],a)||a===t&&!(o in r))&&xi(r,o,a)}function Ys(r,o,a){var d=r[o];(!(vt.call(r,o)&&ri(d,a))||a===t&&!(o in r))&&xi(r,o,a)}function Tc(r,o){for(var a=r.length;a--;)if(ri(r[a][0],o))return a;return-1}function l0(r,o,a,d){return Vi(r,function(m,D,P){o(d,m,a(m),P)}),d}function ty(r,o){return r&&hi(o,hn(o),r)}function d0(r,o){return r&&hi(o,sr(o),r)}function xi(r,o,a){o=="__proto__"&&vc?vc(r,o,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[o]=a}function Od(r,o){for(var a=-1,d=o.length,m=W(d),D=r==null;++a<d;)m[a]=D?t:pf(r,o[a]);return m}function _o(r,o,a){return r===r&&(a!==t&&(r=r<=a?r:a),o!==t&&(r=r>=o?r:o)),r}function zr(r,o,a,d,m,D){var P,O=o&h,N=o&g,Y=o&C;if(a&&(P=m?a(r,d,m,D):a(r)),P!==t)return P;if(!$t(r))return r;var Z=Oe(r);if(Z){if(P=Z0(r),!O)return ir(r,P)}else{var te=kn(r),ue=te==xn||te==wr;if(Ji(r))return Ry(r,O);if(te==Kt||te==Hn||ue&&!m){if(P=N||ue?{}:zy(r),!O)return N?W0(r,d0(P,r)):H0(r,ty(P,r))}else{if(!_t[te])return m?r:{};P=ek(r,te,O)}}D||(D=new ni);var ge=D.get(r);if(ge)return ge;D.set(r,P),ww(r)?r.forEach(function(_e){P.add(zr(_e,o,a,_e,r,D))}):vw(r)&&r.forEach(function(_e,Ve){P.set(Ve,zr(_e,o,a,Ve,r,D))});var be=Y?N?Yd:Jd:N?sr:hn,Me=Z?t:be(r);return Hr(Me||r,function(_e,Ve){Me&&(Ve=_e,_e=r[Ve]),Ys(P,Ve,zr(_e,o,a,Ve,r,D))}),P}function f0(r){var o=hn(r);return function(a){return ny(a,r,o)}}function ny(r,o,a){var d=a.length;if(r==null)return!d;for(r=yt(r);d--;){var m=a[d],D=o[m],P=r[m];if(P===t&&!(m in r)||!D(P))return!1}return!0}function ry(r,o,a){if(typeof r!="function")throw new Wr(s);return oa(function(){r.apply(t,a)},o)}function Zs(r,o,a,d){var m=-1,D=sc,P=!0,O=r.length,N=[],Y=o.length;if(!O)return N;a&&(o=It(o,Dr(a))),d?(D=yd,P=!1):o.length>=n&&(D=Bs,P=!1,o=new bo(o));e:for(;++m<O;){var Z=r[m],te=a==null?Z:a(Z);if(Z=d||Z!==0?Z:0,P&&te===te){for(var ue=Y;ue--;)if(o[ue]===te)continue e;N.push(Z)}else D(o,te,d)||N.push(Z)}return N}var Vi=ky(pi),iy=ky(Fd,!0);function p0(r,o){var a=!0;return Vi(r,function(d,m,D){return a=!!o(d,m,D),a}),a}function Dc(r,o,a){for(var d=-1,m=r.length;++d<m;){var D=r[d],P=o(D);if(P!=null&&(O===t?P===P&&!Sr(P):a(P,O)))var O=P,N=D}return N}function h0(r,o,a,d){var m=r.length;for(a=Le(a),a<0&&(a=-a>m?0:m+a),d=d===t||d>m?m:Le(d),d<0&&(d+=m),d=a>d?0:bw(d);a<d;)r[a++]=o;return r}function oy(r,o){var a=[];return Vi(r,function(d,m,D){o(d,m,D)&&a.push(d)}),a}function bn(r,o,a,d,m){var D=-1,P=r.length;for(a||(a=nk),m||(m=[]);++D<P;){var O=r[D];o>0&&a(O)?o>1?bn(O,o-1,a,d,m):ji(m,O):d||(m[m.length]=O)}return m}var qd=Iy(),sy=Iy(!0);function pi(r,o){return r&&qd(r,o,hn)}function Fd(r,o){return r&&sy(r,o,hn)}function Rc(r,o){return Wi(o,function(a){return Ii(r[a])})}function To(r,o){o=Xi(o,r);for(var a=0,d=o.length;r!=null&&a<d;)r=r[gi(o[a++])];return a&&a==d?r:t}function ay(r,o,a){var d=o(r);return Oe(r)?d:ji(d,a(r))}function Gn(r){return r==null?r===t?Kn:Cr:wo&&wo in yt(r)?Q0(r):uk(r)}function Ad(r,o){return r>o}function g0(r,o){return r!=null&&vt.call(r,o)}function m0(r,o){return r!=null&&o in yt(r)}function v0(r,o,a){return r>=En(o,a)&&r<ln(o,a)}function Ld(r,o,a){for(var d=a?yd:sc,m=r[0].length,D=r.length,P=D,O=W(D),N=1/0,Y=[];P--;){var Z=r[P];P&&o&&(Z=It(Z,Dr(o))),N=En(Z.length,N),O[P]=!a&&(o||m>=120&&Z.length>=120)?new bo(P&&Z):t}Z=r[0];var te=-1,ue=O[0];e:for(;++te<m&&Y.length<N;){var ge=Z[te],be=o?o(ge):ge;if(ge=a||ge!==0?ge:0,!(ue?Bs(ue,be):d(Y,be,a))){for(P=D;--P;){var Me=O[P];if(!(Me?Bs(Me,be):d(r[P],be,a)))continue e}ue&&ue.push(be),Y.push(ge)}}return Y}function y0(r,o,a,d){return pi(r,function(m,D,P){o(d,a(m),D,P)}),d}function ea(r,o,a){o=Xi(o,r),r=Gy(r,o);var d=r==null?r:r[gi(Br(o))];return d==null?t:Tr(d,r,a)}function cy(r){return Gt(r)&&Gn(r)==Hn}function w0(r){return Gt(r)&&Gn(r)==Bn}function C0(r){return Gt(r)&&Gn(r)==nr}function ta(r,o,a,d,m){return r===o?!0:r==null||o==null||!Gt(r)&&!Gt(o)?r!==r&&o!==o:b0(r,o,a,d,ta,m)}function b0(r,o,a,d,m,D){var P=Oe(r),O=Oe(o),N=P?Wn:kn(r),Y=O?Wn:kn(o);N=N==Hn?Kt:N,Y=Y==Hn?Kt:Y;var Z=N==Kt,te=Y==Kt,ue=N==Y;if(ue&&Ji(r)){if(!Ji(o))return!1;P=!0,Z=!1}if(ue&&!Z)return D||(D=new ni),P||rs(r)?Hy(r,o,a,d,m,D):G0(r,o,N,a,d,m,D);if(!(a&_)){var ge=Z&&vt.call(r,"__wrapped__"),be=te&&vt.call(o,"__wrapped__");if(ge||be){var Me=ge?r.value():r,_e=be?o.value():o;return D||(D=new ni),m(Me,_e,a,d,D)}}return ue?(D||(D=new ni),X0(r,o,a,d,m,D)):!1}function _0(r){return Gt(r)&&kn(r)==st}function Md(r,o,a,d){var m=a.length,D=m,P=!d;if(r==null)return!D;for(r=yt(r);m--;){var O=a[m];if(P&&O[2]?O[1]!==r[O[0]]:!(O[0]in r))return!1}for(;++m<D;){O=a[m];var N=O[0],Y=r[N],Z=O[1];if(P&&O[2]){if(Y===t&&!(N in r))return!1}else{var te=new ni;if(d)var ue=d(Y,Z,N,r,o,te);if(!(ue===t?ta(Z,Y,_|S,d,te):ue))return!1}}return!0}function uy(r){if(!$t(r)||ik(r))return!1;var o=Ii(r)?_E:$e;return o.test(Ro(r))}function T0(r){return Gt(r)&&Gn(r)==Pn}function D0(r){return Gt(r)&&kn(r)==rt}function R0(r){return Gt(r)&&Wc(r.length)&&!!St[Gn(r)]}function ly(r){return typeof r=="function"?r:r==null?ar:typeof r=="object"?Oe(r)?py(r[0],r[1]):fy(r):Ow(r)}function Nd(r){if(!ia(r))return PE(r);var o=[];for(var a in yt(r))vt.call(r,a)&&a!="constructor"&&o.push(a);return o}function S0(r){if(!$t(r))return ck(r);var o=ia(r),a=[];for(var d in r)d=="constructor"&&(o||!vt.call(r,d))||a.push(d);return a}function $d(r,o){return r<o}function dy(r,o){var a=-1,d=or(r)?W(r.length):[];return Vi(r,function(m,D,P){d[++a]=o(m,D,P)}),d}function fy(r){var o=ef(r);return o.length==1&&o[0][2]?By(o[0][0],o[0][1]):function(a){return a===r||Md(a,r,o)}}function py(r,o){return nf(r)&&Ky(o)?By(gi(r),o):function(a){var d=pf(a,r);return d===t&&d===o?hf(a,r):ta(o,d,_|S)}}function Sc(r,o,a,d,m){r!==o&&qd(o,function(D,P){if(m||(m=new ni),$t(D))x0(r,o,P,a,Sc,d,m);else{var O=d?d(of(r,P),D,P+"",r,o,m):t;O===t&&(O=D),Id(r,P,O)}},sr)}function x0(r,o,a,d,m,D,P){var O=of(r,a),N=of(o,a),Y=P.get(N);if(Y){Id(r,a,Y);return}var Z=D?D(O,N,a+"",r,o,P):t,te=Z===t;if(te){var ue=Oe(N),ge=!ue&&Ji(N),be=!ue&&!ge&&rs(N);Z=N,ue||ge||be?Oe(O)?Z=O:Yt(O)?Z=ir(O):ge?(te=!1,Z=Ry(N,!0)):be?(te=!1,Z=Sy(N,!0)):Z=[]:sa(N)||So(N)?(Z=O,So(O)?Z=_w(O):(!$t(O)||Ii(O))&&(Z=zy(N))):te=!1}te&&(P.set(N,Z),m(Z,N,d,D,P),P.delete(N)),Id(r,a,Z)}function hy(r,o){var a=r.length;if(a)return o+=o<0?a:0,ki(o,a)?r[o]:t}function gy(r,o,a){o.length?o=It(o,function(D){return Oe(D)?function(P){return To(P,D.length===1?D[0]:D)}:D}):o=[ar];var d=-1;o=It(o,Dr(Ce()));var m=dy(r,function(D,P,O){var N=It(o,function(Y){return Y(D)});return{criteria:N,index:++d,value:D}});return eE(m,function(D,P){return U0(D,P,a)})}function P0(r,o){return my(r,o,function(a,d){return hf(r,d)})}function my(r,o,a){for(var d=-1,m=o.length,D={};++d<m;){var P=o[d],O=To(r,P);a(O,P)&&na(D,Xi(P,r),O)}return D}function E0(r){return function(o){return To(o,r)}}function Ud(r,o,a,d){var m=d?ZP:Vo,D=-1,P=o.length,O=r;for(r===o&&(o=ir(o)),a&&(O=It(r,Dr(a)));++D<P;)for(var N=0,Y=o[D],Z=a?a(Y):Y;(N=m(O,Z,N,d))>-1;)O!==r&&mc.call(O,N,1),mc.call(r,N,1);return r}function vy(r,o){for(var a=r?o.length:0,d=a-1;a--;){var m=o[a];if(a==d||m!==D){var D=m;ki(m)?mc.call(r,m,1):zd(r,m)}}return r}function Hd(r,o){return r+wc(Jv()*(o-r+1))}function k0(r,o,a,d){for(var m=-1,D=ln(yc((o-r)/(a||1)),0),P=W(D);D--;)P[d?D:++m]=r,r+=a;return P}function Wd(r,o){var a="";if(!r||o<1||o>Ct)return a;do o%2&&(a+=r),o=wc(o/2),o&&(r+=r);while(o);return a}function Ue(r,o){return sf(Vy(r,o,ar),r+"")}function I0(r){return ey(is(r))}function O0(r,o){var a=is(r);return Lc(a,_o(o,0,a.length))}function na(r,o,a,d){if(!$t(r))return r;o=Xi(o,r);for(var m=-1,D=o.length,P=D-1,O=r;O!=null&&++m<D;){var N=gi(o[m]),Y=a;if(N==="__proto__"||N==="constructor"||N==="prototype")return r;if(m!=P){var Z=O[N];Y=d?d(Z,N,O):t,Y===t&&(Y=$t(Z)?Z:ki(o[m+1])?[]:{})}Ys(O,N,Y),O=O[N]}return r}var yy=Cc?function(r,o){return Cc.set(r,o),r}:ar,q0=vc?function(r,o){return vc(r,"toString",{configurable:!0,enumerable:!1,value:mf(o),writable:!0})}:ar;function F0(r){return Lc(is(r))}function Kr(r,o,a){var d=-1,m=r.length;o<0&&(o=-o>m?0:m+o),a=a>m?m:a,a<0&&(a+=m),m=o>a?0:a-o>>>0,o>>>=0;for(var D=W(m);++d<m;)D[d]=r[d+o];return D}function A0(r,o){var a;return Vi(r,function(d,m,D){return a=o(d,m,D),!a}),!!a}function xc(r,o,a){var d=0,m=r==null?d:r.length;if(typeof o=="number"&&o===o&&m<=wn){for(;d<m;){var D=d+m>>>1,P=r[D];P!==null&&!Sr(P)&&(a?P<=o:P<o)?d=D+1:m=D}return m}return jd(r,o,ar,a)}function jd(r,o,a,d){var m=0,D=r==null?0:r.length;if(D===0)return 0;o=a(o);for(var P=o!==o,O=o===null,N=Sr(o),Y=o===t;m<D;){var Z=wc((m+D)/2),te=a(r[Z]),ue=te!==t,ge=te===null,be=te===te,Me=Sr(te);if(P)var _e=d||be;else Y?_e=be&&(d||ue):O?_e=be&&ue&&(d||!ge):N?_e=be&&ue&&!ge&&(d||!Me):ge||Me?_e=!1:_e=d?te<=o:te<o;_e?m=Z+1:D=Z}return En(D,Rn)}function wy(r,o){for(var a=-1,d=r.length,m=0,D=[];++a<d;){var P=r[a],O=o?o(P):P;if(!a||!ri(O,N)){var N=O;D[m++]=P===0?0:P}}return D}function Cy(r){return typeof r=="number"?r:Sr(r)?Un:+r}function Rr(r){if(typeof r=="string")return r;if(Oe(r))return It(r,Rr)+"";if(Sr(r))return Yv?Yv.call(r):"";var o=r+"";return o=="0"&&1/r==-Rt?"-0":o}function Gi(r,o,a){var d=-1,m=sc,D=r.length,P=!0,O=[],N=O;if(a)P=!1,m=yd;else if(D>=n){var Y=o?null:B0(r);if(Y)return cc(Y);P=!1,m=Bs,N=new bo}else N=o?[]:O;e:for(;++d<D;){var Z=r[d],te=o?o(Z):Z;if(Z=a||Z!==0?Z:0,P&&te===te){for(var ue=N.length;ue--;)if(N[ue]===te)continue e;o&&N.push(te),O.push(Z)}else m(N,te,a)||(N!==O&&N.push(te),O.push(Z))}return O}function zd(r,o){return o=Xi(o,r),r=Gy(r,o),r==null||delete r[gi(Br(o))]}function by(r,o,a,d){return na(r,o,a(To(r,o)),d)}function Pc(r,o,a,d){for(var m=r.length,D=d?m:-1;(d?D--:++D<m)&&o(r[D],D,r););return a?Kr(r,d?0:D,d?D+1:m):Kr(r,d?D+1:0,d?m:D)}function _y(r,o){var a=r;return a instanceof Ge&&(a=a.value()),wd(o,function(d,m){return m.func.apply(m.thisArg,ji([d],m.args))},a)}function Kd(r,o,a){var d=r.length;if(d<2)return d?Gi(r[0]):[];for(var m=-1,D=W(d);++m<d;)for(var P=r[m],O=-1;++O<d;)O!=m&&(D[m]=Zs(D[m]||P,r[O],o,a));return Gi(bn(D,1),o,a)}function Ty(r,o,a){for(var d=-1,m=r.length,D=o.length,P={};++d<m;){var O=d<D?o[d]:t;a(P,r[d],O)}return P}function Bd(r){return Yt(r)?r:[]}function Vd(r){return typeof r=="function"?r:ar}function Xi(r,o){return Oe(r)?r:nf(r,o)?[r]:Yy(gt(r))}var L0=Ue;function Qi(r,o,a){var d=r.length;return a=a===t?d:a,!o&&a>=d?r:Kr(r,o,a)}var Dy=TE||function(r){return pn.clearTimeout(r)};function Ry(r,o){if(o)return r.slice();var a=r.length,d=Bv?Bv(a):new r.constructor(a);return r.copy(d),d}function Gd(r){var o=new r.constructor(r.byteLength);return new hc(o).set(new hc(r)),o}function M0(r,o){var a=o?Gd(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.byteLength)}function N0(r){var o=new r.constructor(r.source,Cn.exec(r));return o.lastIndex=r.lastIndex,o}function $0(r){return Js?yt(Js.call(r)):{}}function Sy(r,o){var a=o?Gd(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.length)}function xy(r,o){if(r!==o){var a=r!==t,d=r===null,m=r===r,D=Sr(r),P=o!==t,O=o===null,N=o===o,Y=Sr(o);if(!O&&!Y&&!D&&r>o||D&&P&&N&&!O&&!Y||d&&P&&N||!a&&N||!m)return 1;if(!d&&!D&&!Y&&r<o||Y&&a&&m&&!d&&!D||O&&a&&m||!P&&m||!N)return-1}return 0}function U0(r,o,a){for(var d=-1,m=r.criteria,D=o.criteria,P=m.length,O=a.length;++d<P;){var N=xy(m[d],D[d]);if(N){if(d>=O)return N;var Y=a[d];return N*(Y=="desc"?-1:1)}}return r.index-o.index}function Py(r,o,a,d){for(var m=-1,D=r.length,P=a.length,O=-1,N=o.length,Y=ln(D-P,0),Z=W(N+Y),te=!d;++O<N;)Z[O]=o[O];for(;++m<P;)(te||m<D)&&(Z[a[m]]=r[m]);for(;Y--;)Z[O++]=r[m++];return Z}function Ey(r,o,a,d){for(var m=-1,D=r.length,P=-1,O=a.length,N=-1,Y=o.length,Z=ln(D-O,0),te=W(Z+Y),ue=!d;++m<Z;)te[m]=r[m];for(var ge=m;++N<Y;)te[ge+N]=o[N];for(;++P<O;)(ue||m<D)&&(te[ge+a[P]]=r[m++]);return te}function ir(r,o){var a=-1,d=r.length;for(o||(o=W(d));++a<d;)o[a]=r[a];return o}function hi(r,o,a,d){var m=!a;a||(a={});for(var D=-1,P=o.length;++D<P;){var O=o[D],N=d?d(a[O],r[O],O,a,r):t;N===t&&(N=r[O]),m?xi(a,O,N):Ys(a,O,N)}return a}function H0(r,o){return hi(r,tf(r),o)}function W0(r,o){return hi(r,Wy(r),o)}function Ec(r,o){return function(a,d){var m=Oe(a)?VP:l0,D=o?o():{};return m(a,r,Ce(d,2),D)}}function es(r){return Ue(function(o,a){var d=-1,m=a.length,D=m>1?a[m-1]:t,P=m>2?a[2]:t;for(D=r.length>3&&typeof D=="function"?(m--,D):t,P&&Xn(a[0],a[1],P)&&(D=m<3?t:D,m=1),o=yt(o);++d<m;){var O=a[d];O&&r(o,O,d,D)}return o})}function ky(r,o){return function(a,d){if(a==null)return a;if(!or(a))return r(a,d);for(var m=a.length,D=o?m:-1,P=yt(a);(o?D--:++D<m)&&d(P[D],D,P)!==!1;);return a}}function Iy(r){return function(o,a,d){for(var m=-1,D=yt(o),P=d(o),O=P.length;O--;){var N=P[r?O:++m];if(a(D[N],N,D)===!1)break}return o}}function j0(r,o,a){var d=o&T,m=ra(r);function D(){var P=this&&this!==pn&&this instanceof D?m:r;return P.apply(d?a:this,arguments)}return D}function Oy(r){return function(o){o=gt(o);var a=Go(o)?ti(o):t,d=a?a[0]:o.charAt(0),m=a?Qi(a,1).join(""):o.slice(1);return d[r]()+m}}function ts(r){return function(o){return wd(kw(Ew(o).replace(qP,"")),r,"")}}function ra(r){return function(){var o=arguments;switch(o.length){case 0:return new r;case 1:return new r(o[0]);case 2:return new r(o[0],o[1]);case 3:return new r(o[0],o[1],o[2]);case 4:return new r(o[0],o[1],o[2],o[3]);case 5:return new r(o[0],o[1],o[2],o[3],o[4]);case 6:return new r(o[0],o[1],o[2],o[3],o[4],o[5]);case 7:return new r(o[0],o[1],o[2],o[3],o[4],o[5],o[6])}var a=Zo(r.prototype),d=r.apply(a,o);return $t(d)?d:a}}function z0(r,o,a){var d=ra(r);function m(){for(var D=arguments.length,P=W(D),O=D,N=ns(m);O--;)P[O]=arguments[O];var Y=D<3&&P[0]!==N&&P[D-1]!==N?[]:zi(P,N);if(D-=Y.length,D<a)return My(r,o,kc,m.placeholder,t,P,Y,t,t,a-D);var Z=this&&this!==pn&&this instanceof m?d:r;return Tr(Z,this,P)}return m}function qy(r){return function(o,a,d){var m=yt(o);if(!or(o)){var D=Ce(a,3);o=hn(o),a=function(O){return D(m[O],O,m)}}var P=r(o,a,d);return P>-1?m[D?o[P]:P]:t}}function Fy(r){return Ei(function(o){var a=o.length,d=a,m=jr.prototype.thru;for(r&&o.reverse();d--;){var D=o[d];if(typeof D!="function")throw new Wr(s);if(m&&!P&&Fc(D)=="wrapper")var P=new jr([],!0)}for(d=P?d:a;++d<a;){D=o[d];var O=Fc(D),N=O=="wrapper"?Zd(D):t;N&&rf(N[0])&&N[1]==(oe|H|U|ye)&&!N[4].length&&N[9]==1?P=P[Fc(N[0])].apply(P,N[3]):P=D.length==1&&rf(D)?P[O]():P.thru(D)}return function(){var Y=arguments,Z=Y[0];if(P&&Y.length==1&&Oe(Z))return P.plant(Z).value();for(var te=0,ue=a?o[te].apply(this,Y):Z;++te<a;)ue=o[te].call(this,ue);return ue}})}function kc(r,o,a,d,m,D,P,O,N,Y){var Z=o&oe,te=o&T,ue=o&L,ge=o&(H|B),be=o&se,Me=ue?t:ra(r);function _e(){for(var Ve=arguments.length,Je=W(Ve),xr=Ve;xr--;)Je[xr]=arguments[xr];if(ge)var Qn=ns(_e),Pr=nE(Je,Qn);if(d&&(Je=Py(Je,d,m,ge)),D&&(Je=Ey(Je,D,P,ge)),Ve-=Pr,ge&&Ve<Y){var Zt=zi(Je,Qn);return My(r,o,kc,_e.placeholder,a,Je,Zt,O,N,Y-Ve)}var ii=te?a:this,qi=ue?ii[r]:r;return Ve=Je.length,O?Je=lk(Je,O):be&&Ve>1&&Je.reverse(),Z&&N<Ve&&(Je.length=N),this&&this!==pn&&this instanceof _e&&(qi=Me||ra(qi)),qi.apply(ii,Je)}return _e}function Ay(r,o){return function(a,d){return y0(a,r,o(d),{})}}function Ic(r,o){return function(a,d){var m;if(a===t&&d===t)return o;if(a!==t&&(m=a),d!==t){if(m===t)return d;typeof a=="string"||typeof d=="string"?(a=Rr(a),d=Rr(d)):(a=Cy(a),d=Cy(d)),m=r(a,d)}return m}}function Xd(r){return Ei(function(o){return o=It(o,Dr(Ce())),Ue(function(a){var d=this;return r(o,function(m){return Tr(m,d,a)})})})}function Oc(r,o){o=o===t?" ":Rr(o);var a=o.length;if(a<2)return a?Wd(o,r):o;var d=Wd(o,yc(r/Xo(o)));return Go(o)?Qi(ti(d),0,r).join(""):d.slice(0,r)}function K0(r,o,a,d){var m=o&T,D=ra(r);function P(){for(var O=-1,N=arguments.length,Y=-1,Z=d.length,te=W(Z+N),ue=this&&this!==pn&&this instanceof P?D:r;++Y<Z;)te[Y]=d[Y];for(;N--;)te[Y++]=arguments[++O];return Tr(ue,m?a:this,te)}return P}function Ly(r){return function(o,a,d){return d&&typeof d!="number"&&Xn(o,a,d)&&(a=d=t),o=Oi(o),a===t?(a=o,o=0):a=Oi(a),d=d===t?o<a?1:-1:Oi(d),k0(o,a,d,r)}}function qc(r){return function(o,a){return typeof o=="string"&&typeof a=="string"||(o=Vr(o),a=Vr(a)),r(o,a)}}function My(r,o,a,d,m,D,P,O,N,Y){var Z=o&H,te=Z?P:t,ue=Z?t:P,ge=Z?D:t,be=Z?t:D;o|=Z?U:ee,o&=~(Z?ee:U),o&F||(o&=~(T|L));var Me=[r,o,m,ge,te,be,ue,O,N,Y],_e=a.apply(t,Me);return rf(r)&&Xy(_e,Me),_e.placeholder=d,Qy(_e,r,o)}function Qd(r){var o=un[r];return function(a,d){if(a=Vr(a),d=d==null?0:En(Le(d),292),d&&Qv(a)){var m=(gt(a)+"e").split("e"),D=o(m[0]+"e"+(+m[1]+d));return m=(gt(D)+"e").split("e"),+(m[0]+"e"+(+m[1]-d))}return o(a)}}var B0=Jo&&1/cc(new Jo([,-0]))[1]==Rt?function(r){return new Jo(r)}:wf;function Ny(r){return function(o){var a=kn(o);return a==st?Sd(o):a==rt?uE(o):tE(o,r(o))}}function Pi(r,o,a,d,m,D,P,O){var N=o&L;if(!N&&typeof r!="function")throw new Wr(s);var Y=d?d.length:0;if(Y||(o&=~(U|ee),d=m=t),P=P===t?P:ln(Le(P),0),O=O===t?O:Le(O),Y-=m?m.length:0,o&ee){var Z=d,te=m;d=m=t}var ue=N?t:Zd(r),ge=[r,o,a,d,m,Z,te,D,P,O];if(ue&&ak(ge,ue),r=ge[0],o=ge[1],a=ge[2],d=ge[3],m=ge[4],O=ge[9]=ge[9]===t?N?0:r.length:ln(ge[9]-Y,0),!O&&o&(H|B)&&(o&=~(H|B)),!o||o==T)var be=j0(r,o,a);else o==H||o==B?be=z0(r,o,O):(o==U||o==(T|U))&&!m.length?be=K0(r,o,a,d):be=kc.apply(t,ge);var Me=ue?yy:Xy;return Qy(Me(be,ge),r,o)}function $y(r,o,a,d){return r===t||ri(r,Qo[a])&&!vt.call(d,a)?o:r}function Uy(r,o,a,d,m,D){return $t(r)&&$t(o)&&(D.set(o,r),Sc(r,o,t,Uy,D),D.delete(o)),r}function V0(r){return sa(r)?t:r}function Hy(r,o,a,d,m,D){var P=a&_,O=r.length,N=o.length;if(O!=N&&!(P&&N>O))return!1;var Y=D.get(r),Z=D.get(o);if(Y&&Z)return Y==o&&Z==r;var te=-1,ue=!0,ge=a&S?new bo:t;for(D.set(r,o),D.set(o,r);++te<O;){var be=r[te],Me=o[te];if(d)var _e=P?d(Me,be,te,o,r,D):d(be,Me,te,r,o,D);if(_e!==t){if(_e)continue;ue=!1;break}if(ge){if(!Cd(o,function(Ve,Je){if(!Bs(ge,Je)&&(be===Ve||m(be,Ve,a,d,D)))return ge.push(Je)})){ue=!1;break}}else if(!(be===Me||m(be,Me,a,d,D))){ue=!1;break}}return D.delete(r),D.delete(o),ue}function G0(r,o,a,d,m,D,P){switch(a){case fn:if(r.byteLength!=o.byteLength||r.byteOffset!=o.byteOffset)return!1;r=r.buffer,o=o.buffer;case Bn:return!(r.byteLength!=o.byteLength||!D(new hc(r),new hc(o)));case jn:case nr:case zn:return ri(+r,+o);case Sn:return r.name==o.name&&r.message==o.message;case Pn:case Bt:return r==o+"";case st:var O=Sd;case rt:var N=d&_;if(O||(O=cc),r.size!=o.size&&!N)return!1;var Y=P.get(r);if(Y)return Y==o;d|=S,P.set(r,o);var Z=Hy(O(r),O(o),d,m,D,P);return P.delete(r),Z;case Vt:if(Js)return Js.call(r)==Js.call(o)}return!1}function X0(r,o,a,d,m,D){var P=a&_,O=Jd(r),N=O.length,Y=Jd(o),Z=Y.length;if(N!=Z&&!P)return!1;for(var te=N;te--;){var ue=O[te];if(!(P?ue in o:vt.call(o,ue)))return!1}var ge=D.get(r),be=D.get(o);if(ge&&be)return ge==o&&be==r;var Me=!0;D.set(r,o),D.set(o,r);for(var _e=P;++te<N;){ue=O[te];var Ve=r[ue],Je=o[ue];if(d)var xr=P?d(Je,Ve,ue,o,r,D):d(Ve,Je,ue,r,o,D);if(!(xr===t?Ve===Je||m(Ve,Je,a,d,D):xr)){Me=!1;break}_e||(_e=ue=="constructor")}if(Me&&!_e){var Qn=r.constructor,Pr=o.constructor;Qn!=Pr&&"constructor"in r&&"constructor"in o&&!(typeof Qn=="function"&&Qn instanceof Qn&&typeof Pr=="function"&&Pr instanceof Pr)&&(Me=!1)}return D.delete(r),D.delete(o),Me}function Ei(r){return sf(Vy(r,t,nw),r+"")}function Jd(r){return ay(r,hn,tf)}function Yd(r){return ay(r,sr,Wy)}var Zd=Cc?function(r){return Cc.get(r)}:wf;function Fc(r){for(var o=r.name+"",a=Yo[o],d=vt.call(Yo,o)?a.length:0;d--;){var m=a[d],D=m.func;if(D==null||D==r)return m.name}return o}function ns(r){var o=vt.call(b,"placeholder")?b:r;return o.placeholder}function Ce(){var r=b.iteratee||vf;return r=r===vf?ly:r,arguments.length?r(arguments[0],arguments[1]):r}function Ac(r,o){var a=r.__data__;return rk(o)?a[typeof o=="string"?"string":"hash"]:a.map}function ef(r){for(var o=hn(r),a=o.length;a--;){var d=o[a],m=r[d];o[a]=[d,m,Ky(m)]}return o}function Do(r,o){var a=sE(r,o);return uy(a)?a:t}function Q0(r){var o=vt.call(r,wo),a=r[wo];try{r[wo]=t;var d=!0}catch{}var m=fc.call(r);return d&&(o?r[wo]=a:delete r[wo]),m}var tf=Pd?function(r){return r==null?[]:(r=yt(r),Wi(Pd(r),function(o){return Gv.call(r,o)}))}:Cf,Wy=Pd?function(r){for(var o=[];r;)ji(o,tf(r)),r=gc(r);return o}:Cf,kn=Gn;(Ed&&kn(new Ed(new ArrayBuffer(1)))!=fn||Gs&&kn(new Gs)!=st||kd&&kn(kd.resolve())!=ei||Jo&&kn(new Jo)!=rt||Xs&&kn(new Xs)!=tn)&&(kn=function(r){var o=Gn(r),a=o==Kt?r.constructor:t,d=a?Ro(a):"";if(d)switch(d){case OE:return fn;case qE:return st;case FE:return ei;case AE:return rt;case LE:return tn}return o});function J0(r,o,a){for(var d=-1,m=a.length;++d<m;){var D=a[d],P=D.size;switch(D.type){case"drop":r+=P;break;case"dropRight":o-=P;break;case"take":o=En(o,r+P);break;case"takeRight":r=ln(r,o-P);break}}return{start:r,end:o}}function Y0(r){var o=r.match(v);return o?o[1].split($):[]}function jy(r,o,a){o=Xi(o,r);for(var d=-1,m=o.length,D=!1;++d<m;){var P=gi(o[d]);if(!(D=r!=null&&a(r,P)))break;r=r[P]}return D||++d!=m?D:(m=r==null?0:r.length,!!m&&Wc(m)&&ki(P,m)&&(Oe(r)||So(r)))}function Z0(r){var o=r.length,a=new r.constructor(o);return o&&typeof r[0]=="string"&&vt.call(r,"index")&&(a.index=r.index,a.input=r.input),a}function zy(r){return typeof r.constructor=="function"&&!ia(r)?Zo(gc(r)):{}}function ek(r,o,a){var d=r.constructor;switch(o){case Bn:return Gd(r);case jn:case nr:return new d(+r);case fn:return M0(r,a);case br:case an:case E:case V:case re:case ae:case Be:case We:case Ze:return Sy(r,a);case st:return new d;case zn:case Bt:return new d(r);case Pn:return N0(r);case rt:return new d;case Vt:return $0(r)}}function tk(r,o){var a=o.length;if(!a)return r;var d=a-1;return o[d]=(a>1?"& ":"")+o[d],o=o.join(a>2?", ":" "),r.replace(R,`{
/* [wrapped with `+o+`] */
`)}function nk(r){return Oe(r)||So(r)||!!(Xv&&r&&r[Xv])}function ki(r,o){var a=typeof r;return o=o??Ct,!!o&&(a=="number"||a!="symbol"&&p.test(r))&&r>-1&&r%1==0&&r<o}function Xn(r,o,a){if(!$t(a))return!1;var d=typeof o;return(d=="number"?or(a)&&ki(o,a.length):d=="string"&&o in a)?ri(a[o],r):!1}function nf(r,o){if(Oe(r))return!1;var a=typeof r;return a=="number"||a=="symbol"||a=="boolean"||r==null||Sr(r)?!0:le.test(r)||!j.test(r)||o!=null&&r in yt(o)}function rk(r){var o=typeof r;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?r!=="__proto__":r===null}function rf(r){var o=Fc(r),a=b[o];if(typeof a!="function"||!(o in Ge.prototype))return!1;if(r===a)return!0;var d=Zd(a);return!!d&&r===d[0]}function ik(r){return!!Kv&&Kv in r}var ok=lc?Ii:bf;function ia(r){var o=r&&r.constructor,a=typeof o=="function"&&o.prototype||Qo;return r===a}function Ky(r){return r===r&&!$t(r)}function By(r,o){return function(a){return a==null?!1:a[r]===o&&(o!==t||r in yt(a))}}function sk(r){var o=Uc(r,function(d){return a.size===l&&a.clear(),d}),a=o.cache;return o}function ak(r,o){var a=r[1],d=o[1],m=a|d,D=m<(T|L|oe),P=d==oe&&a==H||d==oe&&a==ye&&r[7].length<=o[8]||d==(oe|ye)&&o[7].length<=o[8]&&a==H;if(!(D||P))return r;d&T&&(r[2]=o[2],m|=a&T?0:F);var O=o[3];if(O){var N=r[3];r[3]=N?Py(N,O,o[4]):O,r[4]=N?zi(r[3],f):o[4]}return O=o[5],O&&(N=r[5],r[5]=N?Ey(N,O,o[6]):O,r[6]=N?zi(r[5],f):o[6]),O=o[7],O&&(r[7]=O),d&oe&&(r[8]=r[8]==null?o[8]:En(r[8],o[8])),r[9]==null&&(r[9]=o[9]),r[0]=o[0],r[1]=m,r}function ck(r){var o=[];if(r!=null)for(var a in yt(r))o.push(a);return o}function uk(r){return fc.call(r)}function Vy(r,o,a){return o=ln(o===t?r.length-1:o,0),function(){for(var d=arguments,m=-1,D=ln(d.length-o,0),P=W(D);++m<D;)P[m]=d[o+m];m=-1;for(var O=W(o+1);++m<o;)O[m]=d[m];return O[o]=a(P),Tr(r,this,O)}}function Gy(r,o){return o.length<2?r:To(r,Kr(o,0,-1))}function lk(r,o){for(var a=r.length,d=En(o.length,a),m=ir(r);d--;){var D=o[d];r[d]=ki(D,a)?m[D]:t}return r}function of(r,o){if(!(o==="constructor"&&typeof r[o]=="function")&&o!="__proto__")return r[o]}var Xy=Jy(yy),oa=RE||function(r,o){return pn.setTimeout(r,o)},sf=Jy(q0);function Qy(r,o,a){var d=o+"";return sf(r,tk(d,dk(Y0(d),a)))}function Jy(r){var o=0,a=0;return function(){var d=EE(),m=Et-(d-a);if(a=d,m>0){if(++o>=Lt)return arguments[0]}else o=0;return r.apply(t,arguments)}}function Lc(r,o){var a=-1,d=r.length,m=d-1;for(o=o===t?d:o;++a<o;){var D=Hd(a,m),P=r[D];r[D]=r[a],r[a]=P}return r.length=o,r}var Yy=sk(function(r){var o=[];return r.charCodeAt(0)===46&&o.push(""),r.replace(tt,function(a,d,m,D){o.push(m?D.replace(bt,"$1"):d||a)}),o});function gi(r){if(typeof r=="string"||Sr(r))return r;var o=r+"";return o=="0"&&1/r==-Rt?"-0":o}function Ro(r){if(r!=null){try{return dc.call(r)}catch{}try{return r+""}catch{}}return""}function dk(r,o){return Hr(sn,function(a){var d="_."+a[0];o&a[1]&&!sc(r,d)&&r.push(d)}),r.sort()}function Zy(r){if(r instanceof Ge)return r.clone();var o=new jr(r.__wrapped__,r.__chain__);return o.__actions__=ir(r.__actions__),o.__index__=r.__index__,o.__values__=r.__values__,o}function fk(r,o,a){(a?Xn(r,o,a):o===t)?o=1:o=ln(Le(o),0);var d=r==null?0:r.length;if(!d||o<1)return[];for(var m=0,D=0,P=W(yc(d/o));m<d;)P[D++]=Kr(r,m,m+=o);return P}function pk(r){for(var o=-1,a=r==null?0:r.length,d=0,m=[];++o<a;){var D=r[o];D&&(m[d++]=D)}return m}function hk(){var r=arguments.length;if(!r)return[];for(var o=W(r-1),a=arguments[0],d=r;d--;)o[d-1]=arguments[d];return ji(Oe(a)?ir(a):[a],bn(o,1))}var gk=Ue(function(r,o){return Yt(r)?Zs(r,bn(o,1,Yt,!0)):[]}),mk=Ue(function(r,o){var a=Br(o);return Yt(a)&&(a=t),Yt(r)?Zs(r,bn(o,1,Yt,!0),Ce(a,2)):[]}),vk=Ue(function(r,o){var a=Br(o);return Yt(a)&&(a=t),Yt(r)?Zs(r,bn(o,1,Yt,!0),t,a):[]});function yk(r,o,a){var d=r==null?0:r.length;return d?(o=a||o===t?1:Le(o),Kr(r,o<0?0:o,d)):[]}function wk(r,o,a){var d=r==null?0:r.length;return d?(o=a||o===t?1:Le(o),o=d-o,Kr(r,0,o<0?0:o)):[]}function Ck(r,o){return r&&r.length?Pc(r,Ce(o,3),!0,!0):[]}function bk(r,o){return r&&r.length?Pc(r,Ce(o,3),!0):[]}function _k(r,o,a,d){var m=r==null?0:r.length;return m?(a&&typeof a!="number"&&Xn(r,o,a)&&(a=0,d=m),h0(r,o,a,d)):[]}function ew(r,o,a){var d=r==null?0:r.length;if(!d)return-1;var m=a==null?0:Le(a);return m<0&&(m=ln(d+m,0)),ac(r,Ce(o,3),m)}function tw(r,o,a){var d=r==null?0:r.length;if(!d)return-1;var m=d-1;return a!==t&&(m=Le(a),m=a<0?ln(d+m,0):En(m,d-1)),ac(r,Ce(o,3),m,!0)}function nw(r){var o=r==null?0:r.length;return o?bn(r,1):[]}function Tk(r){var o=r==null?0:r.length;return o?bn(r,Rt):[]}function Dk(r,o){var a=r==null?0:r.length;return a?(o=o===t?1:Le(o),bn(r,o)):[]}function Rk(r){for(var o=-1,a=r==null?0:r.length,d={};++o<a;){var m=r[o];d[m[0]]=m[1]}return d}function rw(r){return r&&r.length?r[0]:t}function Sk(r,o,a){var d=r==null?0:r.length;if(!d)return-1;var m=a==null?0:Le(a);return m<0&&(m=ln(d+m,0)),Vo(r,o,m)}function xk(r){var o=r==null?0:r.length;return o?Kr(r,0,-1):[]}var Pk=Ue(function(r){var o=It(r,Bd);return o.length&&o[0]===r[0]?Ld(o):[]}),Ek=Ue(function(r){var o=Br(r),a=It(r,Bd);return o===Br(a)?o=t:a.pop(),a.length&&a[0]===r[0]?Ld(a,Ce(o,2)):[]}),kk=Ue(function(r){var o=Br(r),a=It(r,Bd);return o=typeof o=="function"?o:t,o&&a.pop(),a.length&&a[0]===r[0]?Ld(a,t,o):[]});function Ik(r,o){return r==null?"":xE.call(r,o)}function Br(r){var o=r==null?0:r.length;return o?r[o-1]:t}function Ok(r,o,a){var d=r==null?0:r.length;if(!d)return-1;var m=d;return a!==t&&(m=Le(a),m=m<0?ln(d+m,0):En(m,d-1)),o===o?dE(r,o,m):ac(r,Mv,m,!0)}function qk(r,o){return r&&r.length?hy(r,Le(o)):t}var Fk=Ue(iw);function iw(r,o){return r&&r.length&&o&&o.length?Ud(r,o):r}function Ak(r,o,a){return r&&r.length&&o&&o.length?Ud(r,o,Ce(a,2)):r}function Lk(r,o,a){return r&&r.length&&o&&o.length?Ud(r,o,t,a):r}var Mk=Ei(function(r,o){var a=r==null?0:r.length,d=Od(r,o);return vy(r,It(o,function(m){return ki(m,a)?+m:m}).sort(xy)),d});function Nk(r,o){var a=[];if(!(r&&r.length))return a;var d=-1,m=[],D=r.length;for(o=Ce(o,3);++d<D;){var P=r[d];o(P,d,r)&&(a.push(P),m.push(d))}return vy(r,m),a}function af(r){return r==null?r:IE.call(r)}function $k(r,o,a){var d=r==null?0:r.length;return d?(a&&typeof a!="number"&&Xn(r,o,a)?(o=0,a=d):(o=o==null?0:Le(o),a=a===t?d:Le(a)),Kr(r,o,a)):[]}function Uk(r,o){return xc(r,o)}function Hk(r,o,a){return jd(r,o,Ce(a,2))}function Wk(r,o){var a=r==null?0:r.length;if(a){var d=xc(r,o);if(d<a&&ri(r[d],o))return d}return-1}function jk(r,o){return xc(r,o,!0)}function zk(r,o,a){return jd(r,o,Ce(a,2),!0)}function Kk(r,o){var a=r==null?0:r.length;if(a){var d=xc(r,o,!0)-1;if(ri(r[d],o))return d}return-1}function Bk(r){return r&&r.length?wy(r):[]}function Vk(r,o){return r&&r.length?wy(r,Ce(o,2)):[]}function Gk(r){var o=r==null?0:r.length;return o?Kr(r,1,o):[]}function Xk(r,o,a){return r&&r.length?(o=a||o===t?1:Le(o),Kr(r,0,o<0?0:o)):[]}function Qk(r,o,a){var d=r==null?0:r.length;return d?(o=a||o===t?1:Le(o),o=d-o,Kr(r,o<0?0:o,d)):[]}function Jk(r,o){return r&&r.length?Pc(r,Ce(o,3),!1,!0):[]}function Yk(r,o){return r&&r.length?Pc(r,Ce(o,3)):[]}var Zk=Ue(function(r){return Gi(bn(r,1,Yt,!0))}),eI=Ue(function(r){var o=Br(r);return Yt(o)&&(o=t),Gi(bn(r,1,Yt,!0),Ce(o,2))}),tI=Ue(function(r){var o=Br(r);return o=typeof o=="function"?o:t,Gi(bn(r,1,Yt,!0),t,o)});function nI(r){return r&&r.length?Gi(r):[]}function rI(r,o){return r&&r.length?Gi(r,Ce(o,2)):[]}function iI(r,o){return o=typeof o=="function"?o:t,r&&r.length?Gi(r,t,o):[]}function cf(r){if(!(r&&r.length))return[];var o=0;return r=Wi(r,function(a){if(Yt(a))return o=ln(a.length,o),!0}),Dd(o,function(a){return It(r,bd(a))})}function ow(r,o){if(!(r&&r.length))return[];var a=cf(r);return o==null?a:It(a,function(d){return Tr(o,t,d)})}var oI=Ue(function(r,o){return Yt(r)?Zs(r,o):[]}),sI=Ue(function(r){return Kd(Wi(r,Yt))}),aI=Ue(function(r){var o=Br(r);return Yt(o)&&(o=t),Kd(Wi(r,Yt),Ce(o,2))}),cI=Ue(function(r){var o=Br(r);return o=typeof o=="function"?o:t,Kd(Wi(r,Yt),t,o)}),uI=Ue(cf);function lI(r,o){return Ty(r||[],o||[],Ys)}function dI(r,o){return Ty(r||[],o||[],na)}var fI=Ue(function(r){var o=r.length,a=o>1?r[o-1]:t;return a=typeof a=="function"?(r.pop(),a):t,ow(r,a)});function sw(r){var o=b(r);return o.__chain__=!0,o}function pI(r,o){return o(r),r}function Mc(r,o){return o(r)}var hI=Ei(function(r){var o=r.length,a=o?r[0]:0,d=this.__wrapped__,m=function(D){return Od(D,r)};return o>1||this.__actions__.length||!(d instanceof Ge)||!ki(a)?this.thru(m):(d=d.slice(a,+a+(o?1:0)),d.__actions__.push({func:Mc,args:[m],thisArg:t}),new jr(d,this.__chain__).thru(function(D){return o&&!D.length&&D.push(t),D}))});function gI(){return sw(this)}function mI(){return new jr(this.value(),this.__chain__)}function vI(){this.__values__===t&&(this.__values__=Cw(this.value()));var r=this.__index__>=this.__values__.length,o=r?t:this.__values__[this.__index__++];return{done:r,value:o}}function yI(){return this}function wI(r){for(var o,a=this;a instanceof _c;){var d=Zy(a);d.__index__=0,d.__values__=t,o?m.__wrapped__=d:o=d;var m=d;a=a.__wrapped__}return m.__wrapped__=r,o}function CI(){var r=this.__wrapped__;if(r instanceof Ge){var o=r;return this.__actions__.length&&(o=new Ge(this)),o=o.reverse(),o.__actions__.push({func:Mc,args:[af],thisArg:t}),new jr(o,this.__chain__)}return this.thru(af)}function bI(){return _y(this.__wrapped__,this.__actions__)}var _I=Ec(function(r,o,a){vt.call(r,a)?++r[a]:xi(r,a,1)});function TI(r,o,a){var d=Oe(r)?Av:p0;return a&&Xn(r,o,a)&&(o=t),d(r,Ce(o,3))}function DI(r,o){var a=Oe(r)?Wi:oy;return a(r,Ce(o,3))}var RI=qy(ew),SI=qy(tw);function xI(r,o){return bn(Nc(r,o),1)}function PI(r,o){return bn(Nc(r,o),Rt)}function EI(r,o,a){return a=a===t?1:Le(a),bn(Nc(r,o),a)}function aw(r,o){var a=Oe(r)?Hr:Vi;return a(r,Ce(o,3))}function cw(r,o){var a=Oe(r)?GP:iy;return a(r,Ce(o,3))}var kI=Ec(function(r,o,a){vt.call(r,a)?r[a].push(o):xi(r,a,[o])});function II(r,o,a,d){r=or(r)?r:is(r),a=a&&!d?Le(a):0;var m=r.length;return a<0&&(a=ln(m+a,0)),jc(r)?a<=m&&r.indexOf(o,a)>-1:!!m&&Vo(r,o,a)>-1}var OI=Ue(function(r,o,a){var d=-1,m=typeof o=="function",D=or(r)?W(r.length):[];return Vi(r,function(P){D[++d]=m?Tr(o,P,a):ea(P,o,a)}),D}),qI=Ec(function(r,o,a){xi(r,a,o)});function Nc(r,o){var a=Oe(r)?It:dy;return a(r,Ce(o,3))}function FI(r,o,a,d){return r==null?[]:(Oe(o)||(o=o==null?[]:[o]),a=d?t:a,Oe(a)||(a=a==null?[]:[a]),gy(r,o,a))}var AI=Ec(function(r,o,a){r[a?0:1].push(o)},function(){return[[],[]]});function LI(r,o,a){var d=Oe(r)?wd:$v,m=arguments.length<3;return d(r,Ce(o,4),a,m,Vi)}function MI(r,o,a){var d=Oe(r)?XP:$v,m=arguments.length<3;return d(r,Ce(o,4),a,m,iy)}function NI(r,o){var a=Oe(r)?Wi:oy;return a(r,Hc(Ce(o,3)))}function $I(r){var o=Oe(r)?ey:I0;return o(r)}function UI(r,o,a){(a?Xn(r,o,a):o===t)?o=1:o=Le(o);var d=Oe(r)?c0:O0;return d(r,o)}function HI(r){var o=Oe(r)?u0:F0;return o(r)}function WI(r){if(r==null)return 0;if(or(r))return jc(r)?Xo(r):r.length;var o=kn(r);return o==st||o==rt?r.size:Nd(r).length}function jI(r,o,a){var d=Oe(r)?Cd:A0;return a&&Xn(r,o,a)&&(o=t),d(r,Ce(o,3))}var zI=Ue(function(r,o){if(r==null)return[];var a=o.length;return a>1&&Xn(r,o[0],o[1])?o=[]:a>2&&Xn(o[0],o[1],o[2])&&(o=[o[0]]),gy(r,bn(o,1),[])}),$c=DE||function(){return pn.Date.now()};function KI(r,o){if(typeof o!="function")throw new Wr(s);return r=Le(r),function(){if(--r<1)return o.apply(this,arguments)}}function uw(r,o,a){return o=a?t:o,o=r&&o==null?r.length:o,Pi(r,oe,t,t,t,t,o)}function lw(r,o){var a;if(typeof o!="function")throw new Wr(s);return r=Le(r),function(){return--r>0&&(a=o.apply(this,arguments)),r<=1&&(o=t),a}}var uf=Ue(function(r,o,a){var d=T;if(a.length){var m=zi(a,ns(uf));d|=U}return Pi(r,d,o,a,m)}),dw=Ue(function(r,o,a){var d=T|L;if(a.length){var m=zi(a,ns(dw));d|=U}return Pi(o,d,r,a,m)});function fw(r,o,a){o=a?t:o;var d=Pi(r,H,t,t,t,t,t,o);return d.placeholder=fw.placeholder,d}function pw(r,o,a){o=a?t:o;var d=Pi(r,B,t,t,t,t,t,o);return d.placeholder=pw.placeholder,d}function hw(r,o,a){var d,m,D,P,O,N,Y=0,Z=!1,te=!1,ue=!0;if(typeof r!="function")throw new Wr(s);o=Vr(o)||0,$t(a)&&(Z=!!a.leading,te="maxWait"in a,D=te?ln(Vr(a.maxWait)||0,o):D,ue="trailing"in a?!!a.trailing:ue);function ge(Zt){var ii=d,qi=m;return d=m=t,Y=Zt,P=r.apply(qi,ii),P}function be(Zt){return Y=Zt,O=oa(Ve,o),Z?ge(Zt):P}function Me(Zt){var ii=Zt-N,qi=Zt-Y,qw=o-ii;return te?En(qw,D-qi):qw}function _e(Zt){var ii=Zt-N,qi=Zt-Y;return N===t||ii>=o||ii<0||te&&qi>=D}function Ve(){var Zt=$c();if(_e(Zt))return Je(Zt);O=oa(Ve,Me(Zt))}function Je(Zt){return O=t,ue&&d?ge(Zt):(d=m=t,P)}function xr(){O!==t&&Dy(O),Y=0,d=N=m=O=t}function Qn(){return O===t?P:Je($c())}function Pr(){var Zt=$c(),ii=_e(Zt);if(d=arguments,m=this,N=Zt,ii){if(O===t)return be(N);if(te)return Dy(O),O=oa(Ve,o),ge(N)}return O===t&&(O=oa(Ve,o)),P}return Pr.cancel=xr,Pr.flush=Qn,Pr}var BI=Ue(function(r,o){return ry(r,1,o)}),VI=Ue(function(r,o,a){return ry(r,Vr(o)||0,a)});function GI(r){return Pi(r,se)}function Uc(r,o){if(typeof r!="function"||o!=null&&typeof o!="function")throw new Wr(s);var a=function(){var d=arguments,m=o?o.apply(this,d):d[0],D=a.cache;if(D.has(m))return D.get(m);var P=r.apply(this,d);return a.cache=D.set(m,P)||D,P};return a.cache=new(Uc.Cache||Si),a}Uc.Cache=Si;function Hc(r){if(typeof r!="function")throw new Wr(s);return function(){var o=arguments;switch(o.length){case 0:return!r.call(this);case 1:return!r.call(this,o[0]);case 2:return!r.call(this,o[0],o[1]);case 3:return!r.call(this,o[0],o[1],o[2])}return!r.apply(this,o)}}function XI(r){return lw(2,r)}var QI=L0(function(r,o){o=o.length==1&&Oe(o[0])?It(o[0],Dr(Ce())):It(bn(o,1),Dr(Ce()));var a=o.length;return Ue(function(d){for(var m=-1,D=En(d.length,a);++m<D;)d[m]=o[m].call(this,d[m]);return Tr(r,this,d)})}),lf=Ue(function(r,o){var a=zi(o,ns(lf));return Pi(r,U,t,o,a)}),gw=Ue(function(r,o){var a=zi(o,ns(gw));return Pi(r,ee,t,o,a)}),JI=Ei(function(r,o){return Pi(r,ye,t,t,t,o)});function YI(r,o){if(typeof r!="function")throw new Wr(s);return o=o===t?o:Le(o),Ue(r,o)}function ZI(r,o){if(typeof r!="function")throw new Wr(s);return o=o==null?0:ln(Le(o),0),Ue(function(a){var d=a[o],m=Qi(a,0,o);return d&&ji(m,d),Tr(r,this,m)})}function eO(r,o,a){var d=!0,m=!0;if(typeof r!="function")throw new Wr(s);return $t(a)&&(d="leading"in a?!!a.leading:d,m="trailing"in a?!!a.trailing:m),hw(r,o,{leading:d,maxWait:o,trailing:m})}function tO(r){return uw(r,1)}function nO(r,o){return lf(Vd(o),r)}function rO(){if(!arguments.length)return[];var r=arguments[0];return Oe(r)?r:[r]}function iO(r){return zr(r,C)}function oO(r,o){return o=typeof o=="function"?o:t,zr(r,C,o)}function sO(r){return zr(r,h|C)}function aO(r,o){return o=typeof o=="function"?o:t,zr(r,h|C,o)}function cO(r,o){return o==null||ny(r,o,hn(o))}function ri(r,o){return r===o||r!==r&&o!==o}var uO=qc(Ad),lO=qc(function(r,o){return r>=o}),So=cy(function(){return arguments}())?cy:function(r){return Gt(r)&&vt.call(r,"callee")&&!Gv.call(r,"callee")},Oe=W.isArray,dO=Ev?Dr(Ev):w0;function or(r){return r!=null&&Wc(r.length)&&!Ii(r)}function Yt(r){return Gt(r)&&or(r)}function fO(r){return r===!0||r===!1||Gt(r)&&Gn(r)==jn}var Ji=SE||bf,pO=kv?Dr(kv):C0;function hO(r){return Gt(r)&&r.nodeType===1&&!sa(r)}function gO(r){if(r==null)return!0;if(or(r)&&(Oe(r)||typeof r=="string"||typeof r.splice=="function"||Ji(r)||rs(r)||So(r)))return!r.length;var o=kn(r);if(o==st||o==rt)return!r.size;if(ia(r))return!Nd(r).length;for(var a in r)if(vt.call(r,a))return!1;return!0}function mO(r,o){return ta(r,o)}function vO(r,o,a){a=typeof a=="function"?a:t;var d=a?a(r,o):t;return d===t?ta(r,o,t,a):!!d}function df(r){if(!Gt(r))return!1;var o=Gn(r);return o==Sn||o==Lr||typeof r.message=="string"&&typeof r.name=="string"&&!sa(r)}function yO(r){return typeof r=="number"&&Qv(r)}function Ii(r){if(!$t(r))return!1;var o=Gn(r);return o==xn||o==wr||o==Ar||o==rr}function mw(r){return typeof r=="number"&&r==Le(r)}function Wc(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Ct}function $t(r){var o=typeof r;return r!=null&&(o=="object"||o=="function")}function Gt(r){return r!=null&&typeof r=="object"}var vw=Iv?Dr(Iv):_0;function wO(r,o){return r===o||Md(r,o,ef(o))}function CO(r,o,a){return a=typeof a=="function"?a:t,Md(r,o,ef(o),a)}function bO(r){return yw(r)&&r!=+r}function _O(r){if(ok(r))throw new Ee(i);return uy(r)}function TO(r){return r===null}function DO(r){return r==null}function yw(r){return typeof r=="number"||Gt(r)&&Gn(r)==zn}function sa(r){if(!Gt(r)||Gn(r)!=Kt)return!1;var o=gc(r);if(o===null)return!0;var a=vt.call(o,"constructor")&&o.constructor;return typeof a=="function"&&a instanceof a&&dc.call(a)==CE}var ff=Ov?Dr(Ov):T0;function RO(r){return mw(r)&&r>=-Ct&&r<=Ct}var ww=qv?Dr(qv):D0;function jc(r){return typeof r=="string"||!Oe(r)&&Gt(r)&&Gn(r)==Bt}function Sr(r){return typeof r=="symbol"||Gt(r)&&Gn(r)==Vt}var rs=Fv?Dr(Fv):R0;function SO(r){return r===t}function xO(r){return Gt(r)&&kn(r)==tn}function PO(r){return Gt(r)&&Gn(r)==Mr}var EO=qc($d),kO=qc(function(r,o){return r<=o});function Cw(r){if(!r)return[];if(or(r))return jc(r)?ti(r):ir(r);if(Vs&&r[Vs])return cE(r[Vs]());var o=kn(r),a=o==st?Sd:o==rt?cc:is;return a(r)}function Oi(r){if(!r)return r===0?r:0;if(r=Vr(r),r===Rt||r===-Rt){var o=r<0?-1:1;return o*yr}return r===r?r:0}function Le(r){var o=Oi(r),a=o%1;return o===o?a?o-a:o:0}function bw(r){return r?_o(Le(r),0,Ke):0}function Vr(r){if(typeof r=="number")return r;if(Sr(r))return Un;if($t(r)){var o=typeof r.valueOf=="function"?r.valueOf():r;r=$t(o)?o+"":o}if(typeof r!="string")return r===0?r:+r;r=Uv(r);var a=_r.test(r);return a||Nr.test(r)?KP(r.slice(2),a?2:8):Vn.test(r)?Un:+r}function _w(r){return hi(r,sr(r))}function IO(r){return r?_o(Le(r),-Ct,Ct):r===0?r:0}function gt(r){return r==null?"":Rr(r)}var OO=es(function(r,o){if(ia(o)||or(o)){hi(o,hn(o),r);return}for(var a in o)vt.call(o,a)&&Ys(r,a,o[a])}),Tw=es(function(r,o){hi(o,sr(o),r)}),zc=es(function(r,o,a,d){hi(o,sr(o),r,d)}),qO=es(function(r,o,a,d){hi(o,hn(o),r,d)}),FO=Ei(Od);function AO(r,o){var a=Zo(r);return o==null?a:ty(a,o)}var LO=Ue(function(r,o){r=yt(r);var a=-1,d=o.length,m=d>2?o[2]:t;for(m&&Xn(o[0],o[1],m)&&(d=1);++a<d;)for(var D=o[a],P=sr(D),O=-1,N=P.length;++O<N;){var Y=P[O],Z=r[Y];(Z===t||ri(Z,Qo[Y])&&!vt.call(r,Y))&&(r[Y]=D[Y])}return r}),MO=Ue(function(r){return r.push(t,Uy),Tr(Dw,t,r)});function NO(r,o){return Lv(r,Ce(o,3),pi)}function $O(r,o){return Lv(r,Ce(o,3),Fd)}function UO(r,o){return r==null?r:qd(r,Ce(o,3),sr)}function HO(r,o){return r==null?r:sy(r,Ce(o,3),sr)}function WO(r,o){return r&&pi(r,Ce(o,3))}function jO(r,o){return r&&Fd(r,Ce(o,3))}function zO(r){return r==null?[]:Rc(r,hn(r))}function KO(r){return r==null?[]:Rc(r,sr(r))}function pf(r,o,a){var d=r==null?t:To(r,o);return d===t?a:d}function BO(r,o){return r!=null&&jy(r,o,g0)}function hf(r,o){return r!=null&&jy(r,o,m0)}var VO=Ay(function(r,o,a){o!=null&&typeof o.toString!="function"&&(o=fc.call(o)),r[o]=a},mf(ar)),GO=Ay(function(r,o,a){o!=null&&typeof o.toString!="function"&&(o=fc.call(o)),vt.call(r,o)?r[o].push(a):r[o]=[a]},Ce),XO=Ue(ea);function hn(r){return or(r)?Zv(r):Nd(r)}function sr(r){return or(r)?Zv(r,!0):S0(r)}function QO(r,o){var a={};return o=Ce(o,3),pi(r,function(d,m,D){xi(a,o(d,m,D),d)}),a}function JO(r,o){var a={};return o=Ce(o,3),pi(r,function(d,m,D){xi(a,m,o(d,m,D))}),a}var YO=es(function(r,o,a){Sc(r,o,a)}),Dw=es(function(r,o,a,d){Sc(r,o,a,d)}),ZO=Ei(function(r,o){var a={};if(r==null)return a;var d=!1;o=It(o,function(D){return D=Xi(D,r),d||(d=D.length>1),D}),hi(r,Yd(r),a),d&&(a=zr(a,h|g|C,V0));for(var m=o.length;m--;)zd(a,o[m]);return a});function eq(r,o){return Rw(r,Hc(Ce(o)))}var tq=Ei(function(r,o){return r==null?{}:P0(r,o)});function Rw(r,o){if(r==null)return{};var a=It(Yd(r),function(d){return[d]});return o=Ce(o),my(r,a,function(d,m){return o(d,m[0])})}function nq(r,o,a){o=Xi(o,r);var d=-1,m=o.length;for(m||(m=1,r=t);++d<m;){var D=r==null?t:r[gi(o[d])];D===t&&(d=m,D=a),r=Ii(D)?D.call(r):D}return r}function rq(r,o,a){return r==null?r:na(r,o,a)}function iq(r,o,a,d){return d=typeof d=="function"?d:t,r==null?r:na(r,o,a,d)}var Sw=Ny(hn),xw=Ny(sr);function oq(r,o,a){var d=Oe(r),m=d||Ji(r)||rs(r);if(o=Ce(o,4),a==null){var D=r&&r.constructor;m?a=d?new D:[]:$t(r)?a=Ii(D)?Zo(gc(r)):{}:a={}}return(m?Hr:pi)(r,function(P,O,N){return o(a,P,O,N)}),a}function sq(r,o){return r==null?!0:zd(r,o)}function aq(r,o,a){return r==null?r:by(r,o,Vd(a))}function cq(r,o,a,d){return d=typeof d=="function"?d:t,r==null?r:by(r,o,Vd(a),d)}function is(r){return r==null?[]:Rd(r,hn(r))}function uq(r){return r==null?[]:Rd(r,sr(r))}function lq(r,o,a){return a===t&&(a=o,o=t),a!==t&&(a=Vr(a),a=a===a?a:0),o!==t&&(o=Vr(o),o=o===o?o:0),_o(Vr(r),o,a)}function dq(r,o,a){return o=Oi(o),a===t?(a=o,o=0):a=Oi(a),r=Vr(r),v0(r,o,a)}function fq(r,o,a){if(a&&typeof a!="boolean"&&Xn(r,o,a)&&(o=a=t),a===t&&(typeof o=="boolean"?(a=o,o=t):typeof r=="boolean"&&(a=r,r=t)),r===t&&o===t?(r=0,o=1):(r=Oi(r),o===t?(o=r,r=0):o=Oi(o)),r>o){var d=r;r=o,o=d}if(a||r%1||o%1){var m=Jv();return En(r+m*(o-r+zP("1e-"+((m+"").length-1))),o)}return Hd(r,o)}var pq=ts(function(r,o,a){return o=o.toLowerCase(),r+(a?Pw(o):o)});function Pw(r){return gf(gt(r).toLowerCase())}function Ew(r){return r=gt(r),r&&r.replace(q,rE).replace(FP,"")}function hq(r,o,a){r=gt(r),o=Rr(o);var d=r.length;a=a===t?d:_o(Le(a),0,d);var m=a;return a-=o.length,a>=0&&r.slice(a,m)==o}function gq(r){return r=gt(r),r&&nn.test(r)?r.replace(at,iE):r}function mq(r){return r=gt(r),r&&w.test(r)?r.replace(A,"\\$&"):r}var vq=ts(function(r,o,a){return r+(a?"-":"")+o.toLowerCase()}),yq=ts(function(r,o,a){return r+(a?" ":"")+o.toLowerCase()}),wq=Oy("toLowerCase");function Cq(r,o,a){r=gt(r),o=Le(o);var d=o?Xo(r):0;if(!o||d>=o)return r;var m=(o-d)/2;return Oc(wc(m),a)+r+Oc(yc(m),a)}function bq(r,o,a){r=gt(r),o=Le(o);var d=o?Xo(r):0;return o&&d<o?r+Oc(o-d,a):r}function _q(r,o,a){r=gt(r),o=Le(o);var d=o?Xo(r):0;return o&&d<o?Oc(o-d,a)+r:r}function Tq(r,o,a){return a||o==null?o=0:o&&(o=+o),kE(gt(r).replace(k,""),o||0)}function Dq(r,o,a){return(a?Xn(r,o,a):o===t)?o=1:o=Le(o),Wd(gt(r),o)}function Rq(){var r=arguments,o=gt(r[0]);return r.length<3?o:o.replace(r[1],r[2])}var Sq=ts(function(r,o,a){return r+(a?"_":"")+o.toLowerCase()});function xq(r,o,a){return a&&typeof a!="number"&&Xn(r,o,a)&&(o=a=t),a=a===t?Ke:a>>>0,a?(r=gt(r),r&&(typeof o=="string"||o!=null&&!ff(o))&&(o=Rr(o),!o&&Go(r))?Qi(ti(r),0,a):r.split(o,a)):[]}var Pq=ts(function(r,o,a){return r+(a?" ":"")+gf(o)});function Eq(r,o,a){return r=gt(r),a=a==null?0:_o(Le(a),0,r.length),o=Rr(o),r.slice(a,a+o.length)==o}function kq(r,o,a){var d=b.templateSettings;a&&Xn(r,o,a)&&(o=t),r=gt(r),o=zc({},o,d,$y);var m=zc({},o.imports,d.imports,$y),D=hn(m),P=Rd(m,D),O,N,Y=0,Z=o.interpolate||Q,te="__p += '",ue=xd((o.escape||Q).source+"|"+Z.source+"|"+(Z===y?pt:Q).source+"|"+(o.evaluate||Q).source+"|$","g"),ge="//# sourceURL="+(vt.call(o,"sourceURL")?(o.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++$P+"]")+`
`;r.replace(ue,function(_e,Ve,Je,xr,Qn,Pr){return Je||(Je=xr),te+=r.slice(Y,Pr).replace(he,oE),Ve&&(O=!0,te+=`' +
__e(`+Ve+`) +
'`),Qn&&(N=!0,te+=`';
`+Qn+`;
__p += '`),Je&&(te+=`' +
((__t = (`+Je+`)) == null ? '' : __t) +
'`),Y=Pr+_e.length,_e}),te+=`';
`;var be=vt.call(o,"variable")&&o.variable;if(!be)te=`with (obj) {
`+te+`
}
`;else if(Re.test(be))throw new Ee(c);te=(N?te.replace(ft,""):te).replace(Pe,"$1").replace(et,"$1;"),te="function("+(be||"obj")+`) {
`+(be?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(O?", __e = _.escape":"")+(N?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+te+`return __p
}`;var Me=Iw(function(){return ut(D,ge+"return "+te).apply(t,P)});if(Me.source=te,df(Me))throw Me;return Me}function Iq(r){return gt(r).toLowerCase()}function Oq(r){return gt(r).toUpperCase()}function qq(r,o,a){if(r=gt(r),r&&(a||o===t))return Uv(r);if(!r||!(o=Rr(o)))return r;var d=ti(r),m=ti(o),D=Hv(d,m),P=Wv(d,m)+1;return Qi(d,D,P).join("")}function Fq(r,o,a){if(r=gt(r),r&&(a||o===t))return r.slice(0,zv(r)+1);if(!r||!(o=Rr(o)))return r;var d=ti(r),m=Wv(d,ti(o))+1;return Qi(d,0,m).join("")}function Aq(r,o,a){if(r=gt(r),r&&(a||o===t))return r.replace(k,"");if(!r||!(o=Rr(o)))return r;var d=ti(r),m=Hv(d,ti(o));return Qi(d,m).join("")}function Lq(r,o){var a=we,d=Ie;if($t(o)){var m="separator"in o?o.separator:m;a="length"in o?Le(o.length):a,d="omission"in o?Rr(o.omission):d}r=gt(r);var D=r.length;if(Go(r)){var P=ti(r);D=P.length}if(a>=D)return r;var O=a-Xo(d);if(O<1)return d;var N=P?Qi(P,0,O).join(""):r.slice(0,O);if(m===t)return N+d;if(P&&(O+=N.length-O),ff(m)){if(r.slice(O).search(m)){var Y,Z=N;for(m.global||(m=xd(m.source,gt(Cn.exec(m))+"g")),m.lastIndex=0;Y=m.exec(Z);)var te=Y.index;N=N.slice(0,te===t?O:te)}}else if(r.indexOf(Rr(m),O)!=O){var ue=N.lastIndexOf(m);ue>-1&&(N=N.slice(0,ue))}return N+d}function Mq(r){return r=gt(r),r&&kt.test(r)?r.replace(Ne,fE):r}var Nq=ts(function(r,o,a){return r+(a?" ":"")+o.toUpperCase()}),gf=Oy("toUpperCase");function kw(r,o,a){return r=gt(r),o=a?t:o,o===t?aE(r)?gE(r):YP(r):r.match(o)||[]}var Iw=Ue(function(r,o){try{return Tr(r,t,o)}catch(a){return df(a)?a:new Ee(a)}}),$q=Ei(function(r,o){return Hr(o,function(a){a=gi(a),xi(r,a,uf(r[a],r))}),r});function Uq(r){var o=r==null?0:r.length,a=Ce();return r=o?It(r,function(d){if(typeof d[1]!="function")throw new Wr(s);return[a(d[0]),d[1]]}):[],Ue(function(d){for(var m=-1;++m<o;){var D=r[m];if(Tr(D[0],this,d))return Tr(D[1],this,d)}})}function Hq(r){return f0(zr(r,h))}function mf(r){return function(){return r}}function Wq(r,o){return r==null||r!==r?o:r}var jq=Fy(),zq=Fy(!0);function ar(r){return r}function vf(r){return ly(typeof r=="function"?r:zr(r,h))}function Kq(r){return fy(zr(r,h))}function Bq(r,o){return py(r,zr(o,h))}var Vq=Ue(function(r,o){return function(a){return ea(a,r,o)}}),Gq=Ue(function(r,o){return function(a){return ea(r,a,o)}});function yf(r,o,a){var d=hn(o),m=Rc(o,d);a==null&&!($t(o)&&(m.length||!d.length))&&(a=o,o=r,r=this,m=Rc(o,hn(o)));var D=!($t(a)&&"chain"in a)||!!a.chain,P=Ii(r);return Hr(m,function(O){var N=o[O];r[O]=N,P&&(r.prototype[O]=function(){var Y=this.__chain__;if(D||Y){var Z=r(this.__wrapped__),te=Z.__actions__=ir(this.__actions__);return te.push({func:N,args:arguments,thisArg:r}),Z.__chain__=Y,Z}return N.apply(r,ji([this.value()],arguments))})}),r}function Xq(){return pn._===this&&(pn._=bE),this}function wf(){}function Qq(r){return r=Le(r),Ue(function(o){return hy(o,r)})}var Jq=Xd(It),Yq=Xd(Av),Zq=Xd(Cd);function Ow(r){return nf(r)?bd(gi(r)):E0(r)}function e1(r){return function(o){return r==null?t:To(r,o)}}var t1=Ly(),n1=Ly(!0);function Cf(){return[]}function bf(){return!1}function r1(){return{}}function i1(){return""}function o1(){return!0}function s1(r,o){if(r=Le(r),r<1||r>Ct)return[];var a=Ke,d=En(r,Ke);o=Ce(o),r-=Ke;for(var m=Dd(d,o);++a<r;)o(a);return m}function a1(r){return Oe(r)?It(r,gi):Sr(r)?[r]:ir(Yy(gt(r)))}function c1(r){var o=++wE;return gt(r)+o}var u1=Ic(function(r,o){return r+o},0),l1=Qd("ceil"),d1=Ic(function(r,o){return r/o},1),f1=Qd("floor");function p1(r){return r&&r.length?Dc(r,ar,Ad):t}function h1(r,o){return r&&r.length?Dc(r,Ce(o,2),Ad):t}function g1(r){return Nv(r,ar)}function m1(r,o){return Nv(r,Ce(o,2))}function v1(r){return r&&r.length?Dc(r,ar,$d):t}function y1(r,o){return r&&r.length?Dc(r,Ce(o,2),$d):t}var w1=Ic(function(r,o){return r*o},1),C1=Qd("round"),b1=Ic(function(r,o){return r-o},0);function _1(r){return r&&r.length?Td(r,ar):0}function T1(r,o){return r&&r.length?Td(r,Ce(o,2)):0}return b.after=KI,b.ary=uw,b.assign=OO,b.assignIn=Tw,b.assignInWith=zc,b.assignWith=qO,b.at=FO,b.before=lw,b.bind=uf,b.bindAll=$q,b.bindKey=dw,b.castArray=rO,b.chain=sw,b.chunk=fk,b.compact=pk,b.concat=hk,b.cond=Uq,b.conforms=Hq,b.constant=mf,b.countBy=_I,b.create=AO,b.curry=fw,b.curryRight=pw,b.debounce=hw,b.defaults=LO,b.defaultsDeep=MO,b.defer=BI,b.delay=VI,b.difference=gk,b.differenceBy=mk,b.differenceWith=vk,b.drop=yk,b.dropRight=wk,b.dropRightWhile=Ck,b.dropWhile=bk,b.fill=_k,b.filter=DI,b.flatMap=xI,b.flatMapDeep=PI,b.flatMapDepth=EI,b.flatten=nw,b.flattenDeep=Tk,b.flattenDepth=Dk,b.flip=GI,b.flow=jq,b.flowRight=zq,b.fromPairs=Rk,b.functions=zO,b.functionsIn=KO,b.groupBy=kI,b.initial=xk,b.intersection=Pk,b.intersectionBy=Ek,b.intersectionWith=kk,b.invert=VO,b.invertBy=GO,b.invokeMap=OI,b.iteratee=vf,b.keyBy=qI,b.keys=hn,b.keysIn=sr,b.map=Nc,b.mapKeys=QO,b.mapValues=JO,b.matches=Kq,b.matchesProperty=Bq,b.memoize=Uc,b.merge=YO,b.mergeWith=Dw,b.method=Vq,b.methodOf=Gq,b.mixin=yf,b.negate=Hc,b.nthArg=Qq,b.omit=ZO,b.omitBy=eq,b.once=XI,b.orderBy=FI,b.over=Jq,b.overArgs=QI,b.overEvery=Yq,b.overSome=Zq,b.partial=lf,b.partialRight=gw,b.partition=AI,b.pick=tq,b.pickBy=Rw,b.property=Ow,b.propertyOf=e1,b.pull=Fk,b.pullAll=iw,b.pullAllBy=Ak,b.pullAllWith=Lk,b.pullAt=Mk,b.range=t1,b.rangeRight=n1,b.rearg=JI,b.reject=NI,b.remove=Nk,b.rest=YI,b.reverse=af,b.sampleSize=UI,b.set=rq,b.setWith=iq,b.shuffle=HI,b.slice=$k,b.sortBy=zI,b.sortedUniq=Bk,b.sortedUniqBy=Vk,b.split=xq,b.spread=ZI,b.tail=Gk,b.take=Xk,b.takeRight=Qk,b.takeRightWhile=Jk,b.takeWhile=Yk,b.tap=pI,b.throttle=eO,b.thru=Mc,b.toArray=Cw,b.toPairs=Sw,b.toPairsIn=xw,b.toPath=a1,b.toPlainObject=_w,b.transform=oq,b.unary=tO,b.union=Zk,b.unionBy=eI,b.unionWith=tI,b.uniq=nI,b.uniqBy=rI,b.uniqWith=iI,b.unset=sq,b.unzip=cf,b.unzipWith=ow,b.update=aq,b.updateWith=cq,b.values=is,b.valuesIn=uq,b.without=oI,b.words=kw,b.wrap=nO,b.xor=sI,b.xorBy=aI,b.xorWith=cI,b.zip=uI,b.zipObject=lI,b.zipObjectDeep=dI,b.zipWith=fI,b.entries=Sw,b.entriesIn=xw,b.extend=Tw,b.extendWith=zc,yf(b,b),b.add=u1,b.attempt=Iw,b.camelCase=pq,b.capitalize=Pw,b.ceil=l1,b.clamp=lq,b.clone=iO,b.cloneDeep=sO,b.cloneDeepWith=aO,b.cloneWith=oO,b.conformsTo=cO,b.deburr=Ew,b.defaultTo=Wq,b.divide=d1,b.endsWith=hq,b.eq=ri,b.escape=gq,b.escapeRegExp=mq,b.every=TI,b.find=RI,b.findIndex=ew,b.findKey=NO,b.findLast=SI,b.findLastIndex=tw,b.findLastKey=$O,b.floor=f1,b.forEach=aw,b.forEachRight=cw,b.forIn=UO,b.forInRight=HO,b.forOwn=WO,b.forOwnRight=jO,b.get=pf,b.gt=uO,b.gte=lO,b.has=BO,b.hasIn=hf,b.head=rw,b.identity=ar,b.includes=II,b.indexOf=Sk,b.inRange=dq,b.invoke=XO,b.isArguments=So,b.isArray=Oe,b.isArrayBuffer=dO,b.isArrayLike=or,b.isArrayLikeObject=Yt,b.isBoolean=fO,b.isBuffer=Ji,b.isDate=pO,b.isElement=hO,b.isEmpty=gO,b.isEqual=mO,b.isEqualWith=vO,b.isError=df,b.isFinite=yO,b.isFunction=Ii,b.isInteger=mw,b.isLength=Wc,b.isMap=vw,b.isMatch=wO,b.isMatchWith=CO,b.isNaN=bO,b.isNative=_O,b.isNil=DO,b.isNull=TO,b.isNumber=yw,b.isObject=$t,b.isObjectLike=Gt,b.isPlainObject=sa,b.isRegExp=ff,b.isSafeInteger=RO,b.isSet=ww,b.isString=jc,b.isSymbol=Sr,b.isTypedArray=rs,b.isUndefined=SO,b.isWeakMap=xO,b.isWeakSet=PO,b.join=Ik,b.kebabCase=vq,b.last=Br,b.lastIndexOf=Ok,b.lowerCase=yq,b.lowerFirst=wq,b.lt=EO,b.lte=kO,b.max=p1,b.maxBy=h1,b.mean=g1,b.meanBy=m1,b.min=v1,b.minBy=y1,b.stubArray=Cf,b.stubFalse=bf,b.stubObject=r1,b.stubString=i1,b.stubTrue=o1,b.multiply=w1,b.nth=qk,b.noConflict=Xq,b.noop=wf,b.now=$c,b.pad=Cq,b.padEnd=bq,b.padStart=_q,b.parseInt=Tq,b.random=fq,b.reduce=LI,b.reduceRight=MI,b.repeat=Dq,b.replace=Rq,b.result=nq,b.round=C1,b.runInContext=M,b.sample=$I,b.size=WI,b.snakeCase=Sq,b.some=jI,b.sortedIndex=Uk,b.sortedIndexBy=Hk,b.sortedIndexOf=Wk,b.sortedLastIndex=jk,b.sortedLastIndexBy=zk,b.sortedLastIndexOf=Kk,b.startCase=Pq,b.startsWith=Eq,b.subtract=b1,b.sum=_1,b.sumBy=T1,b.template=kq,b.times=s1,b.toFinite=Oi,b.toInteger=Le,b.toLength=bw,b.toLower=Iq,b.toNumber=Vr,b.toSafeInteger=IO,b.toString=gt,b.toUpper=Oq,b.trim=qq,b.trimEnd=Fq,b.trimStart=Aq,b.truncate=Lq,b.unescape=Mq,b.uniqueId=c1,b.upperCase=Nq,b.upperFirst=gf,b.each=aw,b.eachRight=cw,b.first=rw,yf(b,function(){var r={};return pi(b,function(o,a){vt.call(b.prototype,a)||(r[a]=o)}),r}(),{chain:!1}),b.VERSION=e,Hr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){b[r].placeholder=b}),Hr(["drop","take"],function(r,o){Ge.prototype[r]=function(a){a=a===t?1:ln(Le(a),0);var d=this.__filtered__&&!o?new Ge(this):this.clone();return d.__filtered__?d.__takeCount__=En(a,d.__takeCount__):d.__views__.push({size:En(a,Ke),type:r+(d.__dir__<0?"Right":"")}),d},Ge.prototype[r+"Right"]=function(a){return this.reverse()[r](a).reverse()}}),Hr(["filter","map","takeWhile"],function(r,o){var a=o+1,d=a==Mt||a==yn;Ge.prototype[r]=function(m){var D=this.clone();return D.__iteratees__.push({iteratee:Ce(m,3),type:a}),D.__filtered__=D.__filtered__||d,D}}),Hr(["head","last"],function(r,o){var a="take"+(o?"Right":"");Ge.prototype[r]=function(){return this[a](1).value()[0]}}),Hr(["initial","tail"],function(r,o){var a="drop"+(o?"":"Right");Ge.prototype[r]=function(){return this.__filtered__?new Ge(this):this[a](1)}}),Ge.prototype.compact=function(){return this.filter(ar)},Ge.prototype.find=function(r){return this.filter(r).head()},Ge.prototype.findLast=function(r){return this.reverse().find(r)},Ge.prototype.invokeMap=Ue(function(r,o){return typeof r=="function"?new Ge(this):this.map(function(a){return ea(a,r,o)})}),Ge.prototype.reject=function(r){return this.filter(Hc(Ce(r)))},Ge.prototype.slice=function(r,o){r=Le(r);var a=this;return a.__filtered__&&(r>0||o<0)?new Ge(a):(r<0?a=a.takeRight(-r):r&&(a=a.drop(r)),o!==t&&(o=Le(o),a=o<0?a.dropRight(-o):a.take(o-r)),a)},Ge.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},Ge.prototype.toArray=function(){return this.take(Ke)},pi(Ge.prototype,function(r,o){var a=/^(?:filter|find|map|reject)|While$/.test(o),d=/^(?:head|last)$/.test(o),m=b[d?"take"+(o=="last"?"Right":""):o],D=d||/^find/.test(o);m&&(b.prototype[o]=function(){var P=this.__wrapped__,O=d?[1]:arguments,N=P instanceof Ge,Y=O[0],Z=N||Oe(P),te=function(Ve){var Je=m.apply(b,ji([Ve],O));return d&&ue?Je[0]:Je};Z&&a&&typeof Y=="function"&&Y.length!=1&&(N=Z=!1);var ue=this.__chain__,ge=!!this.__actions__.length,be=D&&!ue,Me=N&&!ge;if(!D&&Z){P=Me?P:new Ge(this);var _e=r.apply(P,O);return _e.__actions__.push({func:Mc,args:[te],thisArg:t}),new jr(_e,ue)}return be&&Me?r.apply(this,O):(_e=this.thru(te),be?d?_e.value()[0]:_e.value():_e)})}),Hr(["pop","push","shift","sort","splice","unshift"],function(r){var o=uc[r],a=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",d=/^(?:pop|shift)$/.test(r);b.prototype[r]=function(){var m=arguments;if(d&&!this.__chain__){var D=this.value();return o.apply(Oe(D)?D:[],m)}return this[a](function(P){return o.apply(Oe(P)?P:[],m)})}}),pi(Ge.prototype,function(r,o){var a=b[o];if(a){var d=a.name+"";vt.call(Yo,d)||(Yo[d]=[]),Yo[d].push({name:o,func:a})}}),Yo[kc(t,L).name]=[{name:"wrapper",func:t}],Ge.prototype.clone=ME,Ge.prototype.reverse=NE,Ge.prototype.value=$E,b.prototype.at=hI,b.prototype.chain=gI,b.prototype.commit=mI,b.prototype.next=vI,b.prototype.plant=wI,b.prototype.reverse=CI,b.prototype.toJSON=b.prototype.valueOf=b.prototype.value=bI,b.prototype.first=b.prototype.head,Vs&&(b.prototype[Vs]=yI),b},Ki=mE();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(pn._=Ki,define(function(){return Ki})):yo?((yo.exports=Ki)._=Ki,md._=Ki):pn._=Ki}).call(Us)});var I2={};E1(I2,{activate:()=>x2,deactivate:()=>S2});module.exports=k1(I2);var $n=He(require("vscode")),_P=He(Al());var z=He(require("vscode")),Di=He(Fl());var Se=He(Fl()),QR=new Se.RequestType(Se.HoverRequest.method),JR=new Se.RequestType("rust-analyzer/analyzerStatus"),YR=new Se.NotificationType0("rust-analyzer/cancelFlycheck"),ZR=new Se.NotificationType0("rust-analyzer/clearFlycheck"),eS=new Se.RequestType("rust-analyzer/expandMacro"),tS=new Se.RequestType0("rust-analyzer/memoryUsage"),nS=new Se.NotificationType0("rust-analyzer/openServerLogs"),rS=new Se.RequestType("rust-analyzer/relatedTests"),iS=new Se.RequestType0("rust-analyzer/reloadWorkspace"),oS=new Se.RequestType0("rust-analyzer/rebuildProcMacros"),sS=new Se.NotificationType("rust-analyzer/runFlycheck"),XU=new Se.RequestType("rust-analyzer/syntaxTree"),aS=new Se.RequestType("rust-analyzer/viewSyntaxTree"),cS=new Se.RequestType("rust-analyzer/viewCrateGraph"),uS=new Se.RequestType("rust-analyzer/viewFileText"),lS=new Se.RequestType("rust-analyzer/viewHir"),dS=new Se.RequestType("rust-analyzer/viewMir"),fS=new Se.RequestType("rust-analyzer/interpretFunction"),pS=new Se.RequestType("rust-analyzer/viewItemTree"),hS=new Se.RequestType("experimental/discoverTest"),gS=new Se.NotificationType("experimental/discoveredTests"),mS=new Se.RequestType("experimental/runTest"),Xm=new Se.NotificationType0("experimental/abortRunTest"),vS=new Se.NotificationType0("experimental/endRunTest"),yS=new Se.NotificationType("experimental/appendOutputToRunTest"),wS=new Se.NotificationType("experimental/changeTestState"),CS=new Se.RequestType("rust-analyzer/fetchDependencyList"),QU=new Se.RequestType("rust-analyzer/fetchDependencyGraph"),bS=new Se.RequestType("experimental/joinLines"),_S=new Se.RequestType("experimental/matchingBrace"),TS=new Se.RequestType("experimental/moveItem"),DS=new Se.RequestType("experimental/onEnter"),RS=new Se.RequestType("experimental/openCargoToml"),Qm=new Se.RequestType("experimental/externalDocs"),SS=new Se.RequestType("experimental/parentModule"),xS=new Se.RequestType("experimental/childModules"),PS=new Se.RequestType("experimental/runnables"),ES=new Se.NotificationType("experimental/serverStatus"),Jm=new Se.RequestType("experimental/ssr"),kS=new Se.RequestType("rust-analyzer/viewRecursiveMemoryLayout");var js=He(require("path"));var er=He(require("vscode"));var jo=He(require("vscode")),IS=require("assert"),Ml=require("child_process"),OS=require("util");function ja(t,e){try{(0,IS.strict)(t,e)}catch(n){throw ot.error("Assertion failed:",e),n}}var Ym=class{output=jo.window.createOutputChannel("rust-analyzer Extension",{log:!0});trace(...e){this.output.trace(this.stringify(e))}debug(...e){this.output.debug(this.stringify(e))}info(...e){this.output.info(this.stringify(e))}warn(...e){this.output.warn(this.stringify(e))}error(...e){this.output.error(this.stringify(e)),this.output.show(!0)}stringify(e){return e.map(n=>typeof n=="string"?n:n instanceof Error?n.stack||n.message:(0,OS.inspect)(n,{depth:6,colors:!1})).join(" ")}},ot=new Ym;function Nl(t){return new Promise(e=>setTimeout(e,t))}function Hi(t){return t.languageId==="rust"&&t.uri.scheme==="file"}function $l(t){return t.uri.scheme==="file"&&t.fileName.endsWith("Cargo.toml")}function za(t){return t.executableArgs!==void 0}function bi(t){return Hi(t.document)}function qS(t){return $l(t.document)}function FS(t){let e=jo.workspace.workspaceFolders;if(!e)return!1;for(let n of e)if(t.uri.fsPath.startsWith(n.uri.fsPath))return!0;return!1}function Ka(t,e){return jo.commands.executeCommand("setContext",t,e)}function AS(t){let e=new Map;return async function(n){let i=e.get(n);if(i)return i;let s=await t.call(this,n);return e.set(n,s),s}}function LS(t,e){return ot.info(`running command: ${t}`),new Promise((n,i)=>{(0,Ml.exec)(t,e,(s,c,u)=>{if(s){ot.error("error:",s),i(s);return}if(u){i(new Error(u));return}n(c.trimEnd())})})}var Ll=class{constructor(e){this.name=e}name;_channel;get channel(){return this._channel||(this._channel=jo.window.createOutputChannel(this.name)),this._channel}append(e){this.channel.append(e)}appendLine(e){this.channel.appendLine(e)}replace(e){this.channel.replace(e)}clear(){this._channel&&this._channel.clear()}show(e,n){typeof e=="boolean"?this.channel.show(e):this.channel.show(e,n)}hide(){this._channel&&this._channel.hide()}dispose(){this._channel&&this._channel.dispose()}};function ON(t){return t!==void 0}function Zm(t,e){if(ON(t))return t;throw new TypeError(e)}function At(t){return Zm(t,"unwrapping `undefined`")}async function Ul(t,e,n){let i=(0,Ml.spawn)(t,e,n),s=[],c=[];try{let u=await new Promise((l,f)=>{i.stdout.on("data",h=>s.push(Buffer.from(h))),i.stderr.on("data",h=>c.push(Buffer.from(h))),i.on("error",h=>f({stdout:Buffer.concat(s).toString("utf8"),stderr:Buffer.concat(c).toString("utf8"),error:h})),i.on("close",h=>l({stdout:Buffer.concat(s).toString("utf8"),stderr:Buffer.concat(c).toString("utf8"),status:h}))});return{stdout:u.stdout,stderr:u.stderr,status:u.status}}catch(u){return{stdout:u.stdout,stderr:u.stderr,status:u.status,error:u.error}}}var MS=process.platform==="win32";function qN(t){return t>=65&&t<=90||t>=97&&t<=122}function FN(t,e=MS){return e?qN(t.charCodeAt(0))&&t.charCodeAt(1)===58:!1}function Ba(t,e=MS){return FN(t,e)?t.charAt(0).toUpperCase()+t.slice(1):t}async function ev(t,e){if(e.length===1){let[n,i]=At(e[0]),s=await NS(n);s&&(t.set(n,$S(s,i)),await er.workspace.applyEdit(t));return}for(let[n,i]of e){let s=await NS(n);s&&await s.edit(c=>{for(let u of i)ja(!(u instanceof er.SnippetTextEdit),`bad ws edit: snippet received with multiple edits: ${JSON.stringify(t)}`),c.replace(u.range,u.newText)})}}async function NS(t){return er.window.activeTextEditor?.document.uri!==t&&await er.window.showTextDocument(t,{}),er.window.visibleTextEditors.find(e=>e.document.uri.toString()===t.toString())}async function tv(t,e){let n=new er.WorkspaceEdit,i=LN(e);n.set(t.document.uri,$S(t,i)),await er.workspace.applyEdit(n)}function AN(t){return t.match(/\$\d+|\{\d+:[^}]*\}/)!=null}function LN(t){return t.map(e=>AN(e.newText)?new er.SnippetTextEdit(e.range,new er.SnippetString(e.newText)):e)}function $S(t,e){return e.map(n=>{if(n instanceof er.SnippetTextEdit){let i=n,s=i.snippet.value.indexOf(`
`);if(s!==-1){let c=t.document.lineAt(i.range.start.line),u=MN(c.text,0,c.firstNonWhitespaceCharacterIndex),[l,f]=NN(i.snippet.value,s+1),h=f.split(`
`).map(g=>g.replace(u,"")).join(`
`);i.snippet.value=l+h}return i}else return n})}function MN(t,e=0,n=t.length){for(let i=e;i<n;i++){let s=t.charCodeAt(i);if(s!==32&&s!==32)return t.substring(e,i)}return t.substring(e,n)}function NN(t,e){return[t.substring(0,e),t.substring(e)]}var zo=He(require("vscode"));var Tn=He(require("vscode"));var US=He(require("child_process")),Wl=He(require("os")),jl=He(require("path")),HS=He(require("readline")),_i=He(require("vscode"));var Hl=class t{constructor(e,n){this.rootFolder=e;this.env=n}static artifactSpec(e,n){switch(e=[...e,"--message-format=json"],e[0]){case"run":e[0]="build";break;case"test":{e.includes("--no-run")||e.push("--no-run");break}}let i={cargoArgs:e};return(e[0]==="test"||e[0]==="bench")&&(i.filter=s=>s.filter(c=>c.isTest)),n&&e.push("--",...n),i}async getArtifacts(e,n){let i=[];try{await this.runCargo(e.cargoArgs,s=>{if(s.reason==="compiler-artifact"&&s.executable){let c=s.target.crate_types.includes("bin"),u=s.target.kind.includes("custom-build");(c&&!u||s.profile.test)&&i.push({fileName:s.executable,name:s.target.name,kind:s.target.kind[0],isTest:s.profile.test})}else s.reason==="compiler-message"&&ot.info(s.message.rendered)},s=>ot.error(s),n)}catch(s){throw ot.error(`Cargo invocation has failed: ${s}`),new Error(`Cargo invocation has failed: ${s}`)}return e.filter?.(i)??i}async executableFromArgs(e){let n=await this.getArtifacts(t.artifactSpec(e.cargoArgs,e.executableArgs),e.environment);if(n.length===0)throw new Error("No compilation artifacts");if(n.length>1)throw new Error("Multiple compilation artifacts are not supported.");return At(n[0]).fileName}async runCargo(e,n,i,s){let c=await zl(s);return await new Promise((u,l)=>{let f=US.spawn(c,e,{stdio:["ignore","pipe","pipe"],cwd:this.rootFolder,env:this.env});f.on("error",g=>l(new Error(`could not launch cargo: ${g}`))),f.stderr.on("data",g=>i(g.toString())),HS.createInterface({input:f.stdout}).on("line",g=>{let C=JSON.parse(g);n(C)}),f.on("exit",g=>{g===0?u(g):l(new Error(`exit code: ${g}.`))})})}};function zl(t){return t?.RUSTC_TOOLCHAIN?Promise.resolve("cargo"):$N("cargo")}var $N=AS(async t=>{{let n=process.env[t.toUpperCase()];if(n)return n}if(await UN(t))return t;let e=HN();if(e){let n=_i.Uri.joinPath(e,"bin",t);if(await WS(n))return n.fsPath}return t});async function UN(t){let n=(process.env.PATH??"").split(jl.delimiter).flatMap(i=>{let s=jl.join(i,t);return Wl.type()==="Windows_NT"?[s,`${s}.exe`]:[s]});for await(let i of n.map(WN))if(i)return!0;return!1}function HN(){let t=process.env.CARGO_HOME;if(t)return _i.Uri.file(t);try{return _i.Uri.joinPath(_i.Uri.file(Wl.homedir()),".cargo")}catch(e){ot.error("Failed to read the fs info",e)}return null}async function WN(t){return WS(_i.Uri.file(t))}async function WS(t){try{return((await _i.workspace.fs.stat(t)).type&_i.FileType.File)!==0}catch{return!1}}var Va="cargo",jS="shell",zN="rust";function zS(t){return t.type===Va}var nv=class{config;constructor(e){this.config=e}async provideTasks(){if(!Tn.workspace.workspaceFolders)return[];let e=[{command:"build",group:Tn.TaskGroup.Build},{command:"check",group:Tn.TaskGroup.Build},{command:"clippy",group:Tn.TaskGroup.Build},{command:"test",group:Tn.TaskGroup.Test},{command:"clean",group:Tn.TaskGroup.Clean},{command:"run",group:void 0}],n=await zl(),i=[];for(let s of Tn.workspace.workspaceFolders)for(let c of e){let u={command:c.command,type:Va},l=await Bl(u,{},n),f=await Kl(s,u,`cargo ${c.command}`,this.config.problemMatcher,l);f.group=c.group,i.push(f)}return i}async resolveTask(e){if(zS(e.definition)){let n=await Bl(e.definition,{env:e.definition.env});return Kl(e.scope,e.definition,e.name,e.problemMatchers,n)}}};async function Kl(t,e,n,i,s){return new Tn.Task(e,t??Tn.TaskScope.Workspace,n,zN,s,i)}async function Bl(t,e,n){let i,s;return zS(t)?(i=n||await zl(e?.env),s=[t.command].concat(t.args||[])):(i=t.command,s=t.args||[]),new Tn.ProcessExecution(i,s,{cwd:e?.cwd,env:Object.fromEntries(Object.entries(e?.env??{}).map(([c,u])=>[c,u??""]))})}function KS(t){let e=new nv(t);return Tn.tasks.registerTaskProvider(Va,e)}var BS=He(require("os")),Mn=He(require("vscode")),Ns=He(require("path"));var Ga=[];async function Ql(t,e){let n=t.activeRustEditor?.document.uri;if(!n)return;let i=await VS(t.config,e,!1);if(!i)return;let s=Mn.workspace.getConfiguration("launch",n),c=s.get("configurations")||[],u=c.findIndex(l=>l.name===i.name);if(u!==-1){if(await Mn.window.showErrorMessage(`Launch configuration '${i.name}' already exists!`,"Cancel","Update")==="Cancel")return;c[u]=i}else c.push(i);await s.update("configurations",c)}async function Xa(t,e){let n,i="",c=Mn.workspace.getConfiguration("launch").get("configurations")||[],u=c.findIndex(l=>l.name===e.label);return u!==-1?(n=c[u],i=" (from launch.json)"):n=await VS(t.config,e),n?(ot.debug(`Launching debug configuration${i}:`),ot.debug(JSON.stringify(n,null,2)),Mn.debug.startDebugging(void 0,n)):!1}function Vl(t){return`extension.open?${encodeURIComponent(`"${t}"`)}`}async function VS(t,e,n=!0){if(!za(e.args))return;let i=e.args,s=t.debug,c=null;if(s.engine==="auto"){for(let U in Gl)if(Mn.extensions.getExtension(U)){c=Gl[U];break}}else s.engine&&Mn.extensions.getExtension(s.engine)&&Object.keys(Gl).includes(s.engine)&&(c=Gl[s.engine]);if(!c){let U=Vl("ms-vscode.cpptools"),ee=Vl("vadimcn.vscode-lldb"),oe=Vl("webfreak.debug"),ye=Vl("llvm-vs-code-extensions.lldb-dap");await Mn.window.showErrorMessage(`Install [CodeLLDB](command:${ee} "Open CodeLLDB"), [lldb-dap](command:${ye} "Open lldb-dap"), [C/C++](command:${U} "Open C/C++") or [Native Debug](command:${oe} "Open Native Debug") for debugging.`);return}let u=Mn.workspace.workspaceFolders,l=u.length>1,f=u[0],h=!l||!i.workspaceRoot?f:u.find(U=>i.workspaceRoot?.includes(U.uri.fsPath))||f,g=At(h),C=Ba(Ns.normalize(g.uri.fsPath)),_=l?`:${g.name}`:"";function S(U){return U=Ba(Ns.normalize(U)),U.replace(C,`\${workspaceFolder${_}}`)}let T=await VN(i,Xl(!0,{},t.runnablesExtraEnv(e.label))),L=Xl(n,i.environment,t.runnablesExtraEnv(e.label)),F=s.sourceFileMap;if(F==="auto"){F={};let U=await BN(L,C);U&&(c.type==="lldb-dap"?c.additional.sourceMap=[[U?.source,U?.destination]]:F[U.source]=U.destination)}let H=GN(c,S,e,i,T,L,F);if(H.type in s.engineSettings){let U=s.engineSettings[H.type];for(let ee in U)H[ee]=U[ee]}H.name==="run binary"&&(H.name=`run ${Ns.basename(T)}`);let B=H.cwd;return B&&(H.cwd=S(B)),H}async function BN(t,e){let n=t.RUSTC_TOOLCHAIN;if(n){let i=await LS("rustc -V -v",{cwd:e,env:t}),c=/commit-hash:\s(.*)$/m.exec(i)?.[1];if(c){let u=Ns.normalize(n+"/lib/rustlib/src/rust");return{source:"/rustc/"+c,destination:u}}}}var Gl={"llvm-vs-code-extensions.lldb-dap":{type:"lldb-dap",executableProperty:"program",environmentProperty:t=>["env",Object.entries(t).map(([e,n])=>`${e}=${n}`)],runnableArgsProperty:t=>["args",t.executableArgs],additional:{}},"vadimcn.vscode-lldb":{type:"lldb",executableProperty:"program",environmentProperty:t=>["env",t],runnableArgsProperty:t=>["args",t.executableArgs],sourceFileMapProperty:"sourceMap",additional:{sourceLanguages:["rust"]}},"ms-vscode.cpptools":{type:BS.platform()==="win32"?"cppvsdbg":"cppdbg",executableProperty:"program",environmentProperty:t=>["environment",Object.entries(t).map(e=>({name:e[0],value:e[1]??""}))],runnableArgsProperty:t=>["args",t.executableArgs],sourceFileMapProperty:"sourceFileMap",additional:{osx:{MIMode:"lldb"}}},"webfreak.debug":{type:"gdb",executableProperty:"target",runnableArgsProperty:t=>["arguments",XN(t.executableArgs)],environmentProperty:t=>["env",t],additional:{valuesFormatting:"prettyPrinters"}}};async function VN(t,e){return await new Hl(t.workspaceRoot||".",e).executableFromArgs(t)}function GN(t,e,n,i,s,c,u){let{environmentProperty:l,executableProperty:f,runnableArgsProperty:h,type:g,additional:C,sourceFileMapProperty:_}=t,[S,T]=l(c),[L,F]=h(i);return{type:g,request:"launch",name:n.label,cwd:e(n.args.cwd||i.workspaceRoot||"."),[f]:e(s),[S]:T,[L]:F,..._?{[_]:u}:{},...C}}function XN(t){return t.map(function(e){return/["\s]/.test(e)&&!/'/.test(e)?"'"+e.replace(/(['\\])/g,"\\$1")+"'":/["'\s]/.test(e)?`"${e.replace(/(["\\$`!])/g,"\\$1")}"`:e.replace(/([A-Za-z]:)?([#!"$&'()*,:;<=>?@[\\\]^`{|}])/g,"$1\\$2")}).join(" ")}async function QN(t,e){let{cwd:n,args:i}=t.configuration,u=await Qa({kind:"cargo",label:"compile-test",args:{cwd:n,cargoArgs:["test","--no-run","--test","lib"],executableArgs:i}},e.config);await Mn.tasks.executeTask(u)}function GS(t){Mn.debug.onDidStartDebugSession(e=>{Ga.includes(e.id)||Ga.push(e.id)}),Mn.debug.onDidTerminateDebugSession(async e=>{Ga.find(n=>n===e.id)&&await QN(e,t),JN(e)})}function JN(t){let e=Ga.findIndex(n=>n===t.id);e!==-1&&Ga.splice(e,1)}var XS=[{iconPath:new zo.ThemeIcon("save"),tooltip:"Save as a launch.json configuration."}];async function Ja(t,e,n=!1,i=!0,s){let c=t.activeRustEditor??t.activeCargoTomlEditor;if(!c)return;if(s==="cursor")return YN(t,c,e);let u=zo.window.createQuickPick();u.title="Select Runnable",i&&(u.buttons=XS),u.items=[{label:"Looking for runnables..."}],u.activeItems=[],u.show();let l=await JS(t.client,c,e,n);if(l.length===0){await zo.window.showErrorMessage("There's no debug target!"),u.dispose();return}return u.items=[],await t2(u,l,t,i)}async function YN(t,e,n){let i=await JS(t.client,e,n,!1),s=null,c=t.client.code2ProtocolConverter.asPosition(e.selection.active);for(let u of i){if(!u.runnable.location?.targetRange)continue;let l=u.runnable.location.targetRange;s?.runnable?.location?.targetRange!=null&&e2(l,s.runnable.location.targetRange)||ZN(l,c)&&(s=u)}if(s!=null)return Promise.resolve(s)}function ZN(t,e){return(e.line>t.start.line||e.line===t.start.line&&e.character>=t.start.character)&&(e.line<t.end.line||e.line===t.end.line&&e.character<=t.end.character)}function e2(t,e){return(t.start.line<e.start.line||t.start.line===e.start.line&&t.start.character<=e.start.character)&&(t.end.line>e.end.line||t.end.line===e.end.line&&t.end.character>=e.end.character)}var rv=class{constructor(e){this.runnable=e;this.label=e.label}label;description;detail;picked};function QS(t,e){let n={RUST_BACKTRACE:"short"};return t&&Object.assign(n,process.env),e&&Object.assign(n,e),n}function Xl(t,e,n){let i=QS(t,e);return n&&Object.assign(i,n),i}async function Qa(t,e){let n=zo.workspace.workspaceFolders?.[0],i,s,c="cargo";if(t.kind==="cargo"){let f=t.args,h=iv(f);if(f.overrideCargo){let g=f.overrideCargo.split(" ");c=At(g[0]),h=[...g.slice(1),...h]}i={type:Va,command:At(h[0]),args:h.slice(1)},s={cwd:f.workspaceRoot||".",env:Xl(!0,f.environment,e.runnablesExtraEnv(t.label))}}else{let f=t.args;i={type:jS,command:f.program,args:f.args},s={cwd:f.cwd,env:QS(!0)}}let u=await Bl(i,s,c),l=await Kl(n,i,t.label,e.problemMatcher,u);return l.presentationOptions.clear=!0,l.presentationOptions.focus=!1,l}function iv(t){let e=[...t.cargoArgs];return t.executableArgs.length>0&&e.push("--",...t.executableArgs),e}async function JS(t,e,n,i=!1){let s={uri:e.document.uri.toString()},c=await t.sendRequest(PS,{textDocument:s,position:t.code2ProtocolConverter.asPosition(e.selection.active)}).catch(l=>(ot.error(`${l}`),[])),u=[];n&&u.push(n);for(let l of c)n&&JSON.stringify(n.runnable)===JSON.stringify(l)||i&&l.label.startsWith("doctest")||u.push(new rv(l));return u}async function t2(t,e,n,i){return new Promise(s=>{let c=[],u=l=>{s(l),c.forEach(f=>f.dispose())};c.push(t.onDidHide(()=>u()),t.onDidAccept(()=>u(t.selectedItems[0])),t.onDidTriggerButton(async l=>{let f=At(t.activeItems[0]).runnable;await Ql(n,f),u()}),t.onDidChangeActive(l=>{i&&l.length>0&&(At(l[0]).label.startsWith("cargo")?t.buttons=[]:t.buttons.length===0&&(t.buttons=XS))}),t),t.items=e})}var ax=He(ov()),mo=He(Al()),vr=He(require("vscode"));var Ws=He(cr());var Ya=He(ov()),Zl=He(require("vscode")),en=require("vscode");var $s="rust-analyzer-diagnostics-view",Jl=class{constructor(e){this.ctx=e}_onDidChange=new Zl.EventEmitter;get onDidChange(){return this._onDidChange.event}triggerUpdate(e){e.scheme===$s&&this._onDidChange.fire(e)}dispose(){this._onDidChange.dispose()}async provideTextDocumentContent(e){let n=ex(this.ctx,e);return Ya.ansiToText(n)}};function ex(t,e){let n=t.client?.diagnostics?.get(Zl.Uri.parse(e.fragment,!0));if(!n)return"Unable to find original rustc diagnostic";let i=n[parseInt(e.query)];if(!i)return"Unable to find original rustc diagnostic";let s=i.data?.rendered;return s||"Unable to find original rustc diagnostic"}var Yl=class t{constructor(e){this.ctx=e}_decorationTypes=new Map;dispose(){for(let e of this._decorationTypes.values())e.dispose();this._decorationTypes.clear()}async provideDecorations(e){if(e.document.uri.scheme!==$s)return;let n=await this._getDecorations(e.document.uri)||[];for(let[i,s]of n)e.setDecorations(i,s)}_getDecorations(e){let i=ex(this.ctx,e).split(`
`),s=new Map;for(let c of this._decorationTypes.values())s.set(c,[]);for(let[c,u]of i.entries()){let f=Ya.ansiToJson(u,{use_classes:!0}),h=0;for(let g of f){let{content:C,..._}=g,S=new en.Range(c,h-0,c,h+C.length-0);h+=C.length;let T=this._getDecorationType(_);s.has(T)||s.set(T,[]),s.get(T).push(S)}}return[...s]}_getDecorationType(e){let n=this._decorationTypes.get(e);if(n)return n;let i=e.decorations.find(u=>u==="bold"),s=e.decorations.find(u=>u==="italic"),c=e.decorations.find(u=>u==="underline");return n=en.window.createTextEditorDecorationType({backgroundColor:t._convertColor(e.bg,e.bg_truecolor),color:t._convertColor(e.fg,e.fg_truecolor),fontWeight:i,fontStyle:s,textDecoration:c}),this._decorationTypes.set(e,n),n}static _anserToThemeColor={"ansi-black":new en.ThemeColor("terminal.ansiBlack"),"ansi-white":new en.ThemeColor("terminal.ansiWhite"),"ansi-red":new en.ThemeColor("terminal.ansiRed"),"ansi-green":new en.ThemeColor("terminal.ansiGreen"),"ansi-yellow":new en.ThemeColor("terminal.ansiYellow"),"ansi-blue":new en.ThemeColor("terminal.ansiBlue"),"ansi-magenta":new en.ThemeColor("terminal.ansiMagenta"),"ansi-cyan":new en.ThemeColor("terminal.ansiCyan"),"ansi-bright-black":new en.ThemeColor("terminal.ansiBrightBlack"),"ansi-bright-white":new en.ThemeColor("terminal.ansiBrightWhite"),"ansi-bright-red":new en.ThemeColor("terminal.ansiBrightRed"),"ansi-bright-green":new en.ThemeColor("terminal.ansiBrightGreen"),"ansi-bright-yellow":new en.ThemeColor("terminal.ansiBrightYellow"),"ansi-bright-blue":new en.ThemeColor("terminal.ansiBrightBlue"),"ansi-bright-magenta":new en.ThemeColor("terminal.ansiBrightMagenta"),"ansi-bright-cyan":new en.ThemeColor("terminal.ansiBrightCyan")};static _convertColor(e,n){if(!e)return;if(e==="ansi-truecolor")return n?`rgb(${n})`:void 0;let i=e.match(/ansi-palette-(.+)/);if(i){let s=i[1],c=Ya.ansiToJson(`\x1B[38;5;${s}m`),l=At(c[1]).fg;if(l)return`rgb(${l})`}return t._anserToThemeColor[e]}};var cx=require("vscode");var ec=He(cr()),ix=He(require("os")),td=He(require("path")),Dt=He(require("vscode"));var Ti=He(nx()),ed=class{extensionId="rust-lang.rust-analyzer";configureLang;workspaceState;rootSection="rust-analyzer";requiresServerReloadOpts=["server","files","showSyntaxTree"].map(e=>`${this.rootSection}.${e}`);requiresWindowReloadOpts=["testExplorer"].map(e=>`${this.rootSection}.${e}`);constructor(e){this.workspaceState=e.workspaceState,Dt.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,e.subscriptions),this.refreshLogging(),this.configureLanguage()}dispose(){this.configureLang?.dispose()}extensionConfigurationStateKey="extensionConfigurations";get extensionConfigurations(){return(0,Ti.pickBy)(this.workspaceState.get("extensionConfigurations",{}),(e,n)=>Dt.extensions.getExtension(n)!==void 0)}async addExtensionConfiguration(e,n){let i=this.cfg,s=this.extensionConfigurations;s[e]=n,await this.workspaceState.update(this.extensionConfigurationStateKey,s);let c=this.cfg,u=`${this.rootSection}.`;await this.onDidChangeConfiguration({affectsConfiguration(l,f){return l.startsWith(u)&&(0,Ti.get)(i,l.slice(u.length))!==(0,Ti.get)(c,l.slice(u.length))}})}refreshLogging(){ot.info("Extension version:",Dt.extensions.getExtension(this.extensionId).packageJSON.version);let e=Object.entries(this.cfg).filter(([n,i])=>!(i instanceof Function));ot.info("Using configuration",Object.fromEntries(e))}async onDidChangeConfiguration(e){this.refreshLogging(),this.configureLanguage();let n=this.requiresWindowReloadOpts.find(u=>e.affectsConfiguration(u));if(n){let u=`Changing "${n}" requires a window reload`;await Dt.window.showInformationMessage(u,"Reload now")&&await Dt.commands.executeCommand("workbench.action.reloadWindow")}let i=this.requiresServerReloadOpts.find(u=>e.affectsConfiguration(u));if(!i)return;if(this.restartServerOnConfigChange){await Dt.commands.executeCommand("rust-analyzer.restartServer");return}let s=`Changing "${i}" requires a server restart`;await Dt.window.showInformationMessage(s,"Restart now")&&await Dt.commands.executeCommand("rust-analyzer.restartServer")}configureLanguage(){this.configureLang&&(this.configureLang.dispose(),this.configureLang=void 0);let e=[{beforeText:/^\s+$/,action:{indentAction:Dt.IndentAction.None}},{beforeText:/^\s+\..*;/,action:{indentAction:Dt.IndentAction.Outdent}},{beforeText:/^\s+;/,previousLineText:/^\s+\..*/,action:{indentAction:Dt.IndentAction.Outdent}}];if(this.typingContinueCommentsOnNewline){let n=Dt.IndentAction.None;e=[...e,{beforeText:/^\s*\/{3}.*$/,action:{indentAction:n,appendText:"/// "}},{beforeText:/^\s*\/{2}!.*$/,action:{indentAction:n,appendText:"//! "}},{beforeText:/^\s*\/\*(\*|!)(?!\/)([^*]|\*(?!\/))*$/,afterText:/^\s*\*\/$/,action:{indentAction:Dt.IndentAction.IndentOutdent,appendText:" * "}},{beforeText:/^\s*\/\*(\*|!)(?!\/)([^*]|\*(?!\/))*$/,action:{indentAction:n,appendText:" * "}},{beforeText:/^( {2})* \*( ([^*]|\*(?!\/))*)?$/,action:{indentAction:n,appendText:"* "}},{beforeText:/^( {2})* \*\/\s*$/,action:{indentAction:n,removeText:1}}]}this.configureLang=Dt.languages.setLanguageConfiguration("rust",{onEnterRules:e})}get rawCfg(){return Dt.workspace.getConfiguration(this.rootSection)}get cfg(){let e=(0,Ti.cloneDeep)(this.rawCfg);for(let[n,i]of Object.entries(this.extensionConfigurations))for(let[s,c]of Object.entries(i)){let u=this.rawCfg.inspect(s);if(u?.workspaceValue!==void 0||u?.workspaceFolderValue!==void 0||u?.globalValue!==void 0){ot.trace(`Ignoring configuration override for ${s} from extension ${n}`);continue}ot.trace(`Extension ${n} overrides configuration ${s} to `,c),(0,Ti.set)(e,s,c)}return e}get(e){return Ko((0,Ti.get)(this.cfg,e))}get serverPath(){return this.get("server.path")}get serverExtraEnv(){let e=this.get("server.extraEnv")??{};return rx(Object.fromEntries(Object.entries(e).map(([n,i])=>[n,typeof i=="string"?i:i?.toString()])))}get checkOnSave(){return this.get("checkOnSave")??!1}async toggleCheckOnSave(){let e=this.rawCfg.inspect("checkOnSave")??{key:"checkOnSave"},n,i,s;e.workspaceFolderValue!==void 0||e.workspaceFolderLanguageValue!==void 0?(i=Dt.ConfigurationTarget.WorkspaceFolder,n=e.workspaceFolderLanguageValue,s=e.workspaceFolderValue||e.workspaceFolderLanguageValue):e.workspaceValue!==void 0||e.workspaceLanguageValue!==void 0?(i=Dt.ConfigurationTarget.Workspace,n=e.workspaceLanguageValue,s=e.workspaceValue||e.workspaceLanguageValue):e.globalValue!==void 0||e.globalLanguageValue!==void 0?(i=Dt.ConfigurationTarget.Global,n=e.globalLanguageValue,s=e.globalValue||e.globalLanguageValue):(e.defaultValue!==void 0||e.defaultLanguageValue!==void 0)&&(n=e.defaultLanguageValue,s=e.defaultValue||e.defaultLanguageValue),await this.rawCfg.update("checkOnSave",!s,i||null,n)}get problemMatcher(){return this.get("runnables.problemMatcher")||[]}get testExplorer(){return this.get("testExplorer")}runnablesExtraEnv(e){let n=this.serverExtraEnv,i=this.get("runnables.extraEnv")??{};if(!i)return n;let s=process.platform,c=l=>l.platform?(Array.isArray(l.platform)?l.platform:[l.platform]).indexOf(s)>=0:!0;if(i instanceof Array){let l={};for(let f of i)(!f.mask||new RegExp(f.mask).test(e))&&c(f)&&Object.assign(l,f.env);i=l}return{...rx(Object.fromEntries(Object.entries(i).map(([l,f])=>[l,typeof f=="string"?f:f?.toString()]))),...n}}get restartServerOnConfigChange(){return this.get("restartServerOnConfigChange")}get typingContinueCommentsOnNewline(){return this.get("typing.continueCommentsOnNewline")}get debug(){let e=this.get("debug.sourceFileMap");if(e!=="auto"){let{["/rustc/<id>"]:n,...i}=this.get("debug.sourceFileMap")??{};e=i}return{engine:this.get("debug.engine"),engineSettings:this.get("debug.engineSettings")??{},buildBeforeRestart:this.get("debug.buildBeforeRestart"),sourceFileMap:e}}get hoverActions(){return{enable:this.get("hover.actions.enable"),implementations:this.get("hover.actions.implementations.enable"),references:this.get("hover.actions.references.enable"),run:this.get("hover.actions.run.enable"),debug:this.get("hover.actions.debug.enable"),gotoTypeDef:this.get("hover.actions.gotoTypeDef.enable")}}get previewRustcOutput(){return this.get("diagnostics.previewRustcOutput")}get useRustcErrorCode(){return this.get("diagnostics.useRustcErrorCode")}get showDependenciesExplorer(){return this.get("showDependenciesExplorer")}get showSyntaxTree(){return this.get("showSyntaxTree")}get statusBarClickAction(){return this.get("statusBar.clickAction")}get statusBarShowStatusBar(){return this.get("statusBar.showStatusBar")}get initializeStopped(){return this.get("initializeStopped")}get askBeforeUpdateTest(){return this.get("runnables.askBeforeUpdateTest")}async setAskBeforeUpdateTest(e){await this.rawCfg.update("runnables.askBeforeUpdateTest",e,!0)}};function Ko(t){if(ec.string(t))return s2(t);if(t&&ec.array(t))return t.map(e=>Ko(e));if(t&&typeof t=="object"){let e={};for(let n in t){let i=t[n];e[n]=Ko(i)}return e}return t}function rx(t){let e=new RegExp(/\${(?<depName>.+?)}/g),n=new Set,i=new Set(Object.keys(t).map(h=>`env:${h}`)),s=Object.fromEntries(Object.entries(t).map(([h,g])=>{let C=new Set;if(g){let _;for(;_=e.exec(g);){let S=At(_.groups?.depName);C.add(S),i.has(S)||n.add(S)}}return[`env:${h}`,{deps:[...C],value:g}]})),c=new Set;for(let h of n){let g=/(?<prefix>.*?):(?<body>.+)/.exec(h);if(g){let{prefix:C,body:_}=g.groups;if(C==="env"){let S=At(_);s[h]={value:process.env[S]??"",deps:[]},c.add(h)}else s[h]={value:"${"+h+"}",deps:[]},c.add(h)}else s[h]={value:ox(h)||"${"+h+"}",deps:[]}}let u=new Set(Object.keys(s)),l;do{l=u.size;for(let h of u){let g=s[h];g&&g.deps.every(C=>c.has(C))&&(g.value=g.value?.replace(/\${(?<depName>.+?)}/g,(C,_)=>s[_]?.value??""),c.add(h),u.delete(h))}}while(u.size>0&&u.size<l);let f={};for(let h of Object.keys(t)){let g=At(s[`env:${h}`]);f[h]=g.value}return f}var o2=new RegExp(/\$\{(.+?)\}/g);function s2(t){return t.replace(o2,(e,n)=>ec.string(n)&&ox(n)||e)}function ox(t){let e=()=>{let s=(Dt.workspace.workspaceFolders??[])[0];return s===void 0?"":Ba(s.uri.fsPath)},n={workspaceFolder:e,workspaceFolderBasename:()=>td.basename(e()),cwd:()=>process.cwd(),userHome:()=>ix.homedir(),execPath:()=>process.env.VSCODE_EXEC_PATH??process.execPath,pathSeparator:()=>td.sep};return t in n?Zm(n[t],`${t} should not be undefined here`)():null}var rd=require("path");var Hs=He(Al()),sx=He(require("vscode")),nd=class extends Hs.LanguageClient{handleFailedRequest(e,n,i,s,c){return!sx.workspace.getConfiguration("rust-analyzer").get("showRequestFailedErrorNotification")&&i instanceof Hs.ResponseError&&i.code===Hs.ErrorCodes.InternalError&&(c=!1),super.handleFailedRequest(e,n,i,s,c)}};async function ux(t,e,n,i,s,c){let l={documentSelector:[{scheme:"file",language:"rust"}],initializationOptions:n,diagnosticCollectionName:"rustc",traceOutputChannel:t,outputChannel:e,middleware:{workspace:{async didChangeWatchedFile(h,g){f.isRunning()&&await g(h)},async configuration(h,g,C){let _=await C(h,g);return _&&Array.isArray(_)?_.map(S=>Ko(S)):_}},async handleDiagnostics(h,g,C){let _=s.previewRustcOutput,S=s.useRustcErrorCode;return g.forEach((T,L)=>{let F=typeof T.code=="string"||typeof T.code=="number"?T.code:T.code?.value;if(F==="temporary-disabled"&&!c.includes(h)&&(T.message==="file not included in crate hierarchy"||T.message.startsWith("This file is not included in any crates"))){let B=vr.workspace.getConfiguration("rust-analyzer");if(B.get("showUnlinkedFileNotification")){c.push(h);let U=vr.workspace.getWorkspaceFolder(h)?.uri.fsPath;if(U){let ee=h.fsPath.lastIndexOf(rd.sep+"src"),oe=h.fsPath.substring(0,ee);if(oe.startsWith(U)){let ye=vr.Uri.file(oe+rd.sep+"Cargo.toml");vr.workspace.fs.stat(ye).then(async()=>{switch(await vr.window.showInformationMessage(`This rust file does not belong to a loaded cargo project. It looks like it might belong to the workspace at ${ye.path}, do you want to add it to the linked Projects?`,"Yes","No","Don't show this again")){case void 0:break;case"No":break;case"Yes":{let we="."+oe.substring(U.length)+rd.sep+"Cargo.toml",Ie=B.get("linkedProjects")?.concat(we);await B.update("linkedProjects",Ie,!1);break}case"Don't show this again":await B.update("showUnlinkedFileNotification",!1,!1);break}})}}}}let H=T.data?.rendered;if(H){if(_){let B=ax.ansiToText(H),U=B.match(/^(note|help):/m)?.index||H.length;T.message=B.substring(0,U).replace(/^ -->[^\n]+\n/m,"")}T.code={target:vr.Uri.from({scheme:$s,path:`/diagnostic message [${L.toString()}]`,fragment:h.toString(),query:L.toString()}),value:S&&F?F:"Click for full compiler diagnostic"}}}),C(h,g)},async provideHover(h,g,C,_){let S=vr.window.activeTextEditor,T=S?.selection?.contains(g)?f.code2ProtocolConverter.asRange(S.selection):f.code2ProtocolConverter.asPosition(g),L={textDocument:f.code2ProtocolConverter.asTextDocumentIdentifier(h),position:T};return f.sendRequest(QR,L,C).then(F=>{if(!F)return null;let H=f.protocol2CodeConverter.asHover(F);return F.actions&&H.contents.push(u2(F.actions)),H},F=>(f.handleFailedRequest(mo.HoverRequest.type,C,F,null),Promise.resolve(null)))},async provideCodeActions(h,g,C,_,S){let T={textDocument:f.code2ProtocolConverter.asTextDocumentIdentifier(h),range:f.code2ProtocolConverter.asRange(g),context:await f.code2ProtocolConverter.asCodeActionContext(C,_)},L=async F=>{if(F===null)return;let H=[],B=new Map;for(let U of F){if(mo.CodeAction.is(U)){ja(!U.command,"We don't expect to receive commands in CodeActions");let se=await f.protocol2CodeConverter.asCodeAction(U,_);H.push(se);continue}a2(U);let ee=f.protocol2CodeConverter.asCodeActionKind(U.kind),oe=U.group,ye=()=>{let se=new vr.CodeAction(U.title,ee);return se.command={command:"rust-analyzer.resolveCodeAction",title:U.title,arguments:[U]},se.edit=new cx.WorkspaceEdit,se};if(oe){let se=B.get(oe);se?se.items.push({label:U.title,arguments:U}):(se={primary:ye(),items:[]},B.set(oe,se))}else H.push(ye())}for(let[U,{items:ee,primary:oe}]of B){if(ee.length!==0){let ye=[{label:oe.title,arguments:oe.command.arguments[0]},...ee];oe.title=U,oe.command={command:"rust-analyzer.applyActionGroup",title:"",arguments:[ye]}}H.push(oe)}return H};return f.sendRequest(mo.CodeActionRequest.type,T,_).then(L,F=>{})}},markdown:{supportHtml:!0}},f=new nd("rust-analyzer","Rust Analyzer Language Server",i,l);return f.registerFeature(new sv(s)),f.registerFeature(new av),f}var sv=class{testExplorer;constructor(e){this.testExplorer=e.testExplorer||!1}getState(){return{kind:"static"}}fillClientCapabilities(e){e.experimental={snippetTextEdit:!0,codeActionGroup:!0,hoverActions:!0,serverStatusNotification:!0,colorDiagnosticOutput:!0,openServerLogs:!0,localDocs:!0,testExplorer:this.testExplorer,commands:{commands:["rust-analyzer.runSingle","rust-analyzer.debugSingle","rust-analyzer.showReferences","rust-analyzer.gotoLocation","rust-analyzer.triggerParameterHints","rust-analyzer.rename"]},...e.experimental}}initialize(e,n){}dispose(){}clear(){}},av=class{getState(){return{kind:"static"}}fillClientCapabilities(e){let n=e.textDocument?.semanticTokens;n&&(n.augmentsSyntaxTokens=!1)}initialize(e,n){}dispose(){}clear(){}};function a2(t){ja(t&&Ws.string(t.title)&&(t.diagnostics===void 0||Ws.typedArray(t.diagnostics,mo.Diagnostic.is))&&(t.group===void 0||Ws.string(t.group))&&(t.kind===void 0||Ws.string(t.kind))&&t.edit===void 0&&t.command===void 0,`Expected a CodeAction without edits or commands, got: ${JSON.stringify(t)}`)}var tc=[];function c2(t){return tc.push(t),`[${t.title}](command:rust-analyzer.hoverRefCommandProxy?${tc.length-1} '${t.tooltip}')`}function u2(t){tc=[];let e=t.map(i=>(i.title?i.title+" ":"")+i.commands.map(c2).join(" | ")).join(" | "),n=new vr.MarkdownString(e);return n.isTrusted=!0,n}function lx(t){let e=new class{uri=z.Uri.parse("rust-analyzer-status://status");eventEmitter=new z.EventEmitter;async provideTextDocumentContent(n){if(!z.window.activeTextEditor)return"";let i=t.client,s={},c=t.activeRustEditor?.document;return c!=null&&(s.textDocument=i.code2ProtocolConverter.asTextDocumentIdentifier(c)),await i.sendRequest(JR,s)}get onDidChange(){return this.eventEmitter.event}};return t.pushExtCleanup(z.workspace.registerTextDocumentContentProvider("rust-analyzer-status",e)),async()=>{let n=await z.workspace.openTextDocument(e.uri);e.eventEmitter.fire(e.uri),await z.window.showTextDocument(n,{viewColumn:z.ViewColumn.Two,preserveFocus:!0})}}function dx(t){let e=new class{uri=z.Uri.parse("rust-analyzer-memory://memory");eventEmitter=new z.EventEmitter;provideTextDocumentContent(n){return z.window.activeTextEditor?t.client.sendRequest(tS).then(i=>`Per-query memory usage:
`+i+`
(note: database has been cleared)`):""}get onDidChange(){return this.eventEmitter.event}};return t.pushExtCleanup(z.workspace.registerTextDocumentContentProvider("rust-analyzer-memory",e)),async()=>{e.eventEmitter.fire(e.uri);let n=await z.workspace.openTextDocument(e.uri);return z.window.showTextDocument(n,z.ViewColumn.Two,!0)}}function fx(t){return async()=>{z.workspace.getConfiguration("editor").get("parameterHints.enabled")&&await z.commands.executeCommand("editor.action.triggerParameterHints")}}function px(t){return async()=>{await z.commands.executeCommand("editor.action.rename")}}function hx(t){return async()=>{t.client.outputChannel&&t.client.outputChannel.show()}}function gx(t){return async()=>{let e=t.activeRustEditor;if(!e)return;let n=t.client,i=await n.sendRequest(_S,{textDocument:n.code2ProtocolConverter.asTextDocumentIdentifier(e.document),positions:e.selections.map(s=>n.code2ProtocolConverter.asPosition(s.active))});e.selections=e.selections.map((s,c)=>{let u=At(i[c]),l=n.protocol2CodeConverter.asPosition(u),f=s.isEmpty?l:s.anchor;return new z.Selection(f,l)}),e.revealRange(e.selection)}}function mx(t){return async()=>{let e=t.activeRustEditor;if(!e)return;let n=t.client,i=await n.sendRequest(bS,{ranges:e.selections.map(c=>n.code2ProtocolConverter.asRange(c)),textDocument:n.code2ProtocolConverter.asTextDocumentIdentifier(e.document)}),s=await n.protocol2CodeConverter.asTextEdits(i);await e.edit(c=>{s.forEach(u=>{c.replace(u.range,u.newText)})})}}function vx(t){return wx(t,"Up")}function yx(t){return wx(t,"Down")}function wx(t,e){return async()=>{let n=t.activeRustEditor;if(!n)return;let i=t.client,s=await i.sendRequest(TS,{range:i.code2ProtocolConverter.asRange(n.selection),textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(n.document),direction:e});if(!s)return;let c=await i.protocol2CodeConverter.asTextEdits(s);await tv(n,c)}}function Cx(t){async function e(){let n=t.activeRustEditor;if(!n)return!1;let i=t.client,s=await i.sendRequest(DS,{textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(n.document),position:i.code2ProtocolConverter.asPosition(n.selection.active)}).catch(u=>null);if(!s)return!1;let c=await i.protocol2CodeConverter.asTextEdits(s);return await tv(n,c),!0}return async()=>{await e()||await z.commands.executeCommand("default:type",{text:`
`})}}function bx(t){return async()=>{let e=z.window.activeTextEditor;if(!e||!(Hi(e.document)||$l(e.document)))return;let n=t.client,i=await n.sendRequest(SS,{textDocument:n.code2ProtocolConverter.asTextDocumentIdentifier(e.document),position:n.code2ProtocolConverter.asPosition(e.selection.active)});if(i)if(i.length===1){let s=At(i[0]),c=n.protocol2CodeConverter.asUri(s.targetUri),u=n.protocol2CodeConverter.asRange(s.targetRange),l=await z.workspace.openTextDocument(c),f=await z.window.showTextDocument(l);f.selection=new z.Selection(u.start,u.start),f.revealRange(u,z.TextEditorRevealType.InCenter)}else{let s=e.document.uri.toString(),c=n.code2ProtocolConverter.asPosition(e.selection.active);await id(n,s,c,i.map(u=>Di.Location.create(u.targetUri,u.targetRange)))}}}function _x(t){return async()=>{let e=z.window.activeTextEditor;if(!e||!(Hi(e.document)||$l(e.document)))return;let n=t.client,i=await n.sendRequest(xS,{textDocument:n.code2ProtocolConverter.asTextDocumentIdentifier(e.document),position:n.code2ProtocolConverter.asPosition(e.selection.active)});if(i)if(i.length===1){let s=At(i[0]),c=n.protocol2CodeConverter.asUri(s.targetUri),u=n.protocol2CodeConverter.asRange(s.targetRange),l=await z.workspace.openTextDocument(c),f=await z.window.showTextDocument(l);f.selection=new z.Selection(u.start,u.start),f.revealRange(u,z.TextEditorRevealType.InCenter)}else{let s=e.document.uri.toString(),c=n.code2ProtocolConverter.asPosition(e.selection.active);await id(n,s,c,i.map(u=>Di.Location.create(u.targetUri,u.targetRange)))}}}function Tx(t){return async()=>{let e=t.activeRustEditor;if(!e)return;let n=t.client,i=await n.sendRequest(RS,{textDocument:n.code2ProtocolConverter.asTextDocumentIdentifier(e.document)});if(!i)return;let s=n.protocol2CodeConverter.asUri(i.uri),c=n.protocol2CodeConverter.asRange(i.range),u=await z.workspace.openTextDocument(s),l=await z.window.showTextDocument(u);l.selection=new z.Selection(c.start,c.start),l.revealRange(c,z.TextEditorRevealType.InCenter)}}function Dx(t){return async e=>{if(!t.dependenciesProvider?.isInitialized())return;let n=e.document.uri.fsPath,i=t.dependenciesProvider?.getDependency(n);i?await t.dependencyTreeView?.reveal(i,{select:!0,expand:!0}):await l2(e.document,t)}}async function l2(t,e){let n=t.uri.fsPath,i=n.split(js.sep).length-1,s=[{id:n.toLowerCase()}];do if(n=js.dirname(n),s.push({id:n.toLowerCase()}),s.length>=i)return;while(!e.dependenciesProvider?.contains(n));s.reverse();for(let c in s){let u=e.dependencyTreeView;if(!u)continue;let l=At(s[c]);await u.reveal(l,{select:!0,expand:!0})}}async function cv(t){await z.commands.executeCommand("rust-analyzer.revealDependency",t)}function Rx(){return async t=>{let e=z.window.activeTextEditor;if(e!==void 0){let n=new z.Selection(t.range.start,t.range.end);e.selection=n,e.revealRange(n)}}}function Sx(t,e,n=0){let i="  ".repeat(n),s=e.inner?.offsets??e.offsets;if(i+=`${e.kind}@${s.start}..${s.end}`,e.type==="Token"){let c=t.getText(e.range).replaceAll(`\r
`,`
`);i+=` ${JSON.stringify(c)}
`}else{i+=`
`;for(let c of e.children)i+=Sx(t,c,n+1)}return i}function xx(){return async t=>{let e=z.window.activeTextEditor?.document;if(!e)return;let n=Sx(e,t);await z.env.clipboard.writeText(n)}}function Px(t){return async()=>{t.syntaxTreeProvider!==void 0&&await t.syntaxTreeProvider.toggleWhitespace()}}function Ex(t){return async()=>{t.syntaxTreeProvider!==void 0&&await t.syntaxTreeProvider.toggleWhitespace()}}function kx(t){return async()=>{let e=z.window.activeTextEditor;if(!e)return;let n=t.client,i=e.selection.active,s=e.selections,c=n.code2ProtocolConverter.asTextDocumentIdentifier(e.document),u={value:"() ==>> ()",prompt:"Enter request, for example 'Foo($a) ==>> Foo::new($a)' ",validateInput:async f=>{try{await n.sendRequest(Jm,{query:f,parseOnly:!0,textDocument:c,position:i,selections:s})}catch(h){return String(h)}return null}},l=await z.window.showInputBox(u);l&&await z.window.withProgress({location:z.ProgressLocation.Notification,title:"Structured search replace in progress...",cancellable:!1},async(f,h)=>{let g=await n.sendRequest(Jm,{query:l,parseOnly:!1,textDocument:c,position:i,selections:s});await z.workspace.applyEdit(await n.protocol2CodeConverter.asWorkspaceEdit(g,h))})}}function Ix(t){return async()=>{if(!t.serverPath){z.window.showWarningMessage("rust-analyzer server is not running");return}z.window.showInformationMessage(`rust-analyzer version: ${t.serverVersion} [${t.serverPath}]`)}}function Ox(t,e){let n=e==="hir"?"viewHir":"viewMir",i=e==="hir"?lS:dS,s=`rust-analyzer-${e}://${n}/${e}.rs`,c=`rust-analyzer-${e}`;return qx(t,i,s,c,!0)}function qx(t,e,n,i,s){let c=new class{uri=z.Uri.parse(n);eventEmitter=new z.EventEmitter;constructor(){z.workspace.onDidChangeTextDocument(this.onDidChangeTextDocument,this,t.subscriptions),z.window.onDidChangeActiveTextEditor(this.onDidChangeActiveTextEditor,this,t.subscriptions)}onDidChangeTextDocument(u){Hi(u.document)&&s&&Nl(10).then(()=>this.eventEmitter.fire(this.uri))}onDidChangeActiveTextEditor(u){u&&bi(u)&&s&&this.eventEmitter.fire(this.uri)}async provideTextDocumentContent(u,l){let f=t.activeRustEditor;if(!f)return"";let h=t.client,g={textDocument:h.code2ProtocolConverter.asTextDocumentIdentifier(f.document),position:h.code2ProtocolConverter.asPosition(f.selection.active)};return h.sendRequest(e,g,l)}get onDidChange(){return this.eventEmitter.event}};return t.pushExtCleanup(z.workspace.registerTextDocumentContentProvider(i,c)),async()=>{let u=await z.workspace.openTextDocument(c.uri);c.eventEmitter.fire(c.uri),await z.window.showTextDocument(u,{viewColumn:z.ViewColumn.Two,preserveFocus:!0})}}function Fx(t){return Ox(t,"hir")}function Ax(t){return Ox(t,"mir")}function Lx(t){return qx(t,fS,"rust-analyzer-interpret-function://interpretFunction/result.log","rust-analyzer-interpret-function",!1)}function Mx(t){let e=new class{uri=z.Uri.parse("rust-analyzer-file-text://viewFileText/file.rs");eventEmitter=new z.EventEmitter;constructor(){z.workspace.onDidChangeTextDocument(this.onDidChangeTextDocument,this,t.subscriptions),z.window.onDidChangeActiveTextEditor(this.onDidChangeActiveTextEditor,this,t.subscriptions)}onDidChangeTextDocument(n){Hi(n.document)&&Nl(10).then(()=>this.eventEmitter.fire(this.uri))}onDidChangeActiveTextEditor(n){n&&bi(n)&&this.eventEmitter.fire(this.uri)}async provideTextDocumentContent(n,i){let s=t.activeRustEditor;if(!s)return"";let c=t.client,u=c.code2ProtocolConverter.asTextDocumentIdentifier(s.document);return c.sendRequest(uS,u,i)}get onDidChange(){return this.eventEmitter.event}};return t.pushExtCleanup(z.workspace.registerTextDocumentContentProvider("rust-analyzer-file-text",e)),async()=>{let n=await z.workspace.openTextDocument(e.uri);e.eventEmitter.fire(e.uri),await z.window.showTextDocument(n,{viewColumn:z.ViewColumn.Two,preserveFocus:!0})}}function Nx(t){let e=new class{uri=z.Uri.parse("rust-analyzer-item-tree://viewItemTree/itemtree.rs");eventEmitter=new z.EventEmitter;constructor(){z.workspace.onDidChangeTextDocument(this.onDidChangeTextDocument,this,t.subscriptions),z.window.onDidChangeActiveTextEditor(this.onDidChangeActiveTextEditor,this,t.subscriptions)}onDidChangeTextDocument(n){Hi(n.document)&&Nl(10).then(()=>this.eventEmitter.fire(this.uri))}onDidChangeActiveTextEditor(n){n&&bi(n)&&this.eventEmitter.fire(this.uri)}async provideTextDocumentContent(n,i){let s=t.activeRustEditor;if(!s)return"";let c=t.client,u={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(s.document)};return c.sendRequest(pS,u,i)}get onDidChange(){return this.eventEmitter.event}};return t.pushExtCleanup(z.workspace.registerTextDocumentContentProvider("rust-analyzer-item-tree",e)),async()=>{let n=await z.workspace.openTextDocument(e.uri);e.eventEmitter.fire(e.uri),await z.window.showTextDocument(n,{viewColumn:z.ViewColumn.Two,preserveFocus:!0})}}function $x(t,e){return async()=>{let n=z.Uri.file(js.join(t.extensionPath,"node_modules")),i=z.window.createWebviewPanel("rust-analyzer.crate-graph","rust-analyzer crate graph",z.ViewColumn.Two,{enableScripts:!0,retainContextWhenHidden:!0,localResourceRoots:[n]}),s={full:e},u=await t.client.sendRequest(cS,s),l=i.webview.asWebviewUri(n),f=`
            <!DOCTYPE html>
            <meta charset="utf-8">
            <head>
                <style>
                    /* Fill the entire view */
                    html, body { margin:0; padding:0; overflow:hidden }
                    svg { position:fixed; top:0; left:0; height:100%; width:100% }

                    /* Disable the graphviz background and fill the polygons */
                    .graph > polygon { display:none; }
                    :is(.node,.edge) polygon { fill: white; }

                    /* Invert the line colours for dark themes */
                    body:not(.vscode-light) .edge path { stroke: white; }
                </style>
            </head>
            <body>
                <script type="text/javascript" src="${l}/d3/dist/d3.min.js"></script>
                <script type="text/javascript" src="${l}/@hpcc-js/wasm/dist/graphviz.umd.js"></script>
                <script type="text/javascript" src="${l}/d3-graphviz/build/d3-graphviz.min.js"></script>
                <div id="graph"></div>
                <script>
                    let dot = \`${u}\`;
                    let graph = d3.select("#graph")
                                  .graphviz({ useWorker: false, useSharedWorker: false })
                                  .fit(true)
                                  .zoomScaleExtent([0.1, Infinity])
                                  .renderDot(dot);

                    d3.select(window).on("click", (event) => {
                        if (event.ctrlKey) {
                            graph.resetZoom(d3.transition().duration(100));
                        }
                    });
                    d3.select(window).on("copy", (event) => {
                        event.clipboardData.setData("text/plain", dot);
                        event.preventDefault();
                    });
                </script>
            </body>
            `;i.webview.html=f}}function Ux(t){return $x(t,!1)}function Hx(t){return $x(t,!0)}function Wx(t){function e(i){let s=`// Recursive expansion of ${i.name} macro
`;return s+="// "+"=".repeat(s.length-3),s+=`

`,s+=i.expansion,s}let n=new class{uri=z.Uri.parse("rust-analyzer-expand-macro://expandMacro/[EXPANSION].rs");eventEmitter=new z.EventEmitter;async provideTextDocumentContent(i){let s=z.window.activeTextEditor;if(!s)return"";let c=t.client,u=s.selection.active,l=await c.sendRequest(eS,{textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(s.document),position:u});return l==null?"Not available":e(l)}get onDidChange(){return this.eventEmitter.event}};return t.pushExtCleanup(z.workspace.registerTextDocumentContentProvider("rust-analyzer-expand-macro",n)),async()=>{let i=await z.workspace.openTextDocument(n.uri);return n.eventEmitter.fire(n.uri),z.window.showTextDocument(i,z.ViewColumn.Two,!0)}}function jx(t){return async()=>t.client.sendRequest(iS)}function zx(t){return async()=>t.client.sendRequest(oS)}async function id(t,e,n,i){t&&await z.commands.executeCommand("editor.action.showReferences",z.Uri.parse(e),t.protocol2CodeConverter.asPosition(n),i.map(t.protocol2CodeConverter.asLocation))}function Kx(t){return async(e,n,i)=>{await id(t.client,e,n,i)}}function Bx(t){return async e=>{let n=await z.window.showQuickPick(e);n&&await z.commands.executeCommand("rust-analyzer.resolveCodeAction",n.arguments)}}function Vx(t){return async e=>{let n=t.client,i=n.protocol2CodeConverter.asUri(e.targetUri),s=n.protocol2CodeConverter.asRange(e.targetSelectionRange);s=s.with({end:s.start}),await z.window.showTextDocument(i,{selection:s})}}function Gx(t){return async()=>{let e=z.window.activeTextEditor;if(!e)return;let n=t.client,i=e.selection.active,s={uri:e.document.uri.toString()},c=await n.sendRequest(Qm,{position:i,textDocument:s});ot.debug(c);let u=z.FileType.Unknown;if(c.local!==void 0)try{u=(await z.workspace.fs.stat(z.Uri.parse(c.local))).type}catch(f){ot.debug("stat() threw error. Falling back to web version",f)}let l=u&z.FileType.File?c.local:c.web;if(l){l.startsWith("vscode-remote://")&&(l=l.replace("vscode-remote://","vscode://vscode-remote/"));let f=z.Uri.parse(l);await z.env.openExternal(f)}}}function Xx(t){return async()=>{let e=z.window.activeTextEditor;if(!e)return;let n=t.client,i=e.selection.active,s={uri:e.document.uri.toString()},u=(await n.sendRequest(Qm,{position:i,textDocument:s})).web;if(u){u.startsWith("vscode-remote://")&&(u=u.replace("vscode-remote://","vscode://vscode-remote/"));let l=z.Uri.parse(u);await z.env.openExternal(l)}}}function Qx(t){return async()=>{await t.client.sendNotification(YR)}}function Jx(t){return async()=>{await t.client.sendNotification(ZR)}}function Yx(t){return async()=>{let e=t.activeRustEditor,n=t.client,i=e?{uri:e.document.uri.toString()}:null;await n.sendNotification(sS,{textDocument:i})}}function Zx(t){return async e=>{let n=t.client;e.command=void 0;let i=await n.sendRequest(Di.CodeActionResolveRequest.type,e);if(!i?.edit)return;let s=i.edit,c={...s,documentChanges:s.documentChanges?.filter(h=>"kind"in h)},u=await n.protocol2CodeConverter.asWorkspaceEdit(c);await z.workspace.applyEdit(u);let[l,f]=d2(t,s);await ev(l,f),i.command!=null&&await z.commands.executeCommand(i.command.command,i.command.arguments)}}function d2(t,e){let n=t.client,i=new z.WorkspaceEdit;if(e.documentChanges){let s=[];for(let c of e.documentChanges)if(Di.TextDocumentEdit.is(c)){let u=n.protocol2CodeConverter.asUri(c.textDocument.uri),l=[];for(let f of c.edits)"insertTextFormat"in f&&f.insertTextFormat===Di.InsertTextFormat.Snippet?l.push(new z.SnippetTextEdit(n.protocol2CodeConverter.asRange(f.range),new z.SnippetString(f.newText))):l.push(z.TextEdit.replace(n.protocol2CodeConverter.asRange(f.range),f.newText));s.push([u,l])}return[i,s]}else return[i,[]]}function eP(t){return async e=>{await ev(e,e.entries())}}function tP(t,e){let n;return async()=>{let i=await Ja(t,n,!1,!0,e);if(!i)return;i.detail="rerun",n=i;let s=await Qa(i.runnable,t.config);return await z.tasks.executeTask(s)}}function nP(t){return async()=>{let e=t.activeRustEditor;if(!e)return;let n=t.client;await z.window.withProgress({location:z.ProgressLocation.Notification,title:"Looking for tests...",cancellable:!1},async(i,s)=>{let c=e.document.uri.toString(),u=n.code2ProtocolConverter.asPosition(e.selection.active),f=(await n.sendRequest(rS,{textDocument:{uri:c},position:u})).map(h=>Di.Location.create(h.runnable.location.targetUri,h.runnable.location.targetSelectionRange));await id(n,c,u,f)})}}function f2(t){if(!za(t.args))return!1;let e=t.args.environment;return e?["UPDATE_EXPECT","INSTA_UPDATE","SNAPSHOTS"].some(n=>n in e):!1}function rP(t){return async e=>{if(!t.activeRustEditor)return;if(f2(e)&&t.config.askBeforeUpdateTest){let s=await z.window.showInformationMessage("rust-analyzer",{detail:"Do you want to update tests?",modal:!0},"Update Now","Update (and Don't ask again)");if(s!=="Update Now"&&s!=="Update (and Don't ask again)")return;s==="Update (and Don't ask again)"&&await t.config.setAskBeforeUpdateTest(!1)}let i=await Qa(e,t.config);return i.group=z.TaskGroup.Build,i.presentationOptions={reveal:z.TaskRevealKind.Always,panel:z.TaskPanelKind.Dedicated,clear:!0},z.tasks.executeTask(i)}}function iP(t){let e;return async()=>{let n=await Ja(t,e);if(!n||!za(n.runnable.args))return;let s=["cargo",...iv(n.runnable.args)].join(" ");await z.env.clipboard.writeText(s),await z.window.showInformationMessage("Cargo invocation copied to the clipboard.")}}function oP(t){let e;return async()=>{let n=await Ja(t,e,!0);if(n)return n.detail="restart",e=n,await Xa(t,n.runnable)}}function sP(t){return async e=>{await Xa(t,e)}}function aP(t){return async()=>{let e=await Ja(t,void 0,!0,!1);e&&await Ql(t,e.runnable)}}function cP(t){return async e=>{let n=tc[e];if(n){let{command:i,arguments:s=[]}=n;await z.commands.executeCommand(i,...s)}}}function uP(t){return async()=>{let e=z.window.activeTextEditor;if(!e)return;let n=t.client,i=e.selection.active,s=await n.sendRequest(kS,{textDocument:n.code2ProtocolConverter.asTextDocumentIdentifier(e.document),position:i}),c=z.window.createWebviewPanel("memory_layout","[Memory Layout]",z.ViewColumn.Two,{enableScripts:!0});c.webview.html=`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            overflow: hidden;
            min-height: 100%;
            height: 100vh;
            padding: 32px;
            position: relative;
            display: block;

            background-color: var(--vscode-editor-background);
            font-family: var(--vscode-editor-font-family);
            font-size: var(--vscode-editor-font-size);
            color: var(--vscode-editor-foreground);
        }

        .container {
            position: relative;
        }

        .trans {
            transition: all 0.2s ease-in-out;
        }

        .grid {
            height: 100%;
            position: relative;
            color: var(--vscode-commandCenter-activeBorder);
            pointer-events: none;
        }

        .grid-line {
            position: absolute;
            width: 100%;
            height: 1px;
            background-color: var(--vscode-commandCenter-activeBorder);
        }

        #tooltip {
            position: fixed;
            display: none;
            z-index: 1;
            pointer-events: none;
            padding: 4px 8px;
            z-index: 2;

            color: var(--vscode-editorHoverWidget-foreground);
            background-color: var(--vscode-editorHoverWidget-background);
            border: 1px solid var(--vscode-editorHoverWidget-border);
        }

        #tooltip b {
            color: var(--vscode-editorInlayHint-typeForeground);
        }

        #tooltip ul {
            margin-left: 0;
            padding-left: 20px;
        }

        table {
            position: absolute;
            transform: rotateZ(90deg) rotateX(180deg);
            transform-origin: top left;
            border-collapse: collapse;
            table-layout: fixed;
            left: 48px;
            top: 0;
            max-height: calc(100vw - 64px - 48px);
            z-index: 1;
        }

        td {
            border: 1px solid var(--vscode-focusBorder);
            writing-mode: vertical-rl;
            text-orientation: sideways-right;

            height: 80px;
        }

        td p {
            height: calc(100% - 16px);
            width: calc(100% - 8px);
            margin: 8px 4px;
            display: inline-block;
            transform: rotateY(180deg);
            pointer-events: none;
            overflow: hidden;
        }

        td p * {
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
            display: inline-block;
            height: 100%;
        }

        td p b {
            color: var(--vscode-editorInlayHint-typeForeground);
        }

        td:hover {
            background-color: var(--vscode-editor-hoverHighlightBackground);
        }

        td:empty {
            visibility: hidden;
            border: 0;
        }
    </style>
</head>
<body>
    <div id="tooltip"></div>
</body>
<script>(function() {

const data = ${JSON.stringify(s)}

if (!(data && data.nodes.length)) {
    document.body.innerText = "Not Available"
    return
}

data.nodes.map(n => {
    n.typename = n.typename.replaceAll('&', '&amp;').replaceAll('<', '&lt;').replaceAll('>', '&gt;').replaceAll('"', ' & quot; ').replaceAll("'", '&#039;')
    return n
})

let height = window.innerHeight - 64

addEventListener("resize", e => {
    const new_height = window.innerHeight - 64
    height = new_height
    container.classList.remove("trans")
    table.classList.remove("trans")
    locate()
    setTimeout(() => { // give delay to redraw, annoying but needed
        container.classList.add("trans")
        table.classList.add("trans")
    }, 0)
})

const container = document.createElement("div")
container.classList.add("container")
container.classList.add("trans")
document.body.appendChild(container)

const tooltip = document.getElementById("tooltip")

let y = 0
let zoom = 1.0

const table = document.createElement("table")
table.classList.add("trans")
container.appendChild(table)
const rows = []

function node_t(idx, depth, offset) {
    if (!rows[depth]) {
        rows[depth] = { el: document.createElement("tr"), offset: 0 }
    }

    if (rows[depth].offset < offset) {
        const pad = document.createElement("td")
        pad.colSpan = offset - rows[depth].offset
        rows[depth].el.appendChild(pad)
        rows[depth].offset += offset - rows[depth].offset
    }

    const td = document.createElement("td")
    td.innerHTML = '<p><span>' + data.nodes[idx].itemName + ':</span> <b>' + data.nodes[idx].typename + '</b></p>'

    td.colSpan = data.nodes[idx].size

    td.addEventListener("mouseover", e => {
        const node = data.nodes[idx]
        tooltip.innerHTML = node.itemName + ": <b>" + node.typename + "</b><br/>"
            + "<ul>"
            + "<li>size = " + node.size + "</li>"
            + "<li>align = " + node.alignment + "</li>"
            + "<li>field offset = " + node.offset + "</li>"
            + "</ul>"
            + "<i>double click to focus</i>"

        tooltip.style.display = "block"
    })
    td.addEventListener("mouseleave", _ => tooltip.style.display = "none")
    const total_offset = rows[depth].offset
    td.addEventListener("dblclick", e => {
        const node = data.nodes[idx]
        zoom = data.nodes[0].size / node.size
        y = -(total_offset) / data.nodes[0].size * zoom
        x = 0
        locate()
    })

    rows[depth].el.appendChild(td)
    rows[depth].offset += data.nodes[idx].size


    if (data.nodes[idx].childrenStart != -1) {
        for (let i = 0; i < data.nodes[idx].childrenLen; i++) {
            if (data.nodes[data.nodes[idx].childrenStart + i].size) {
                node_t(data.nodes[idx].childrenStart + i, depth + 1, offset + data.nodes[data.nodes[idx].childrenStart + i].offset)
            }
        }
    }
}

node_t(0, 0, 0)

for (const row of rows) table.appendChild(row.el)

const grid = document.createElement("div")
grid.classList.add("grid")
container.appendChild(grid)

for (let i = 0; i < data.nodes[0].size / 8 + 1; i++) {
    const el = document.createElement("div")
    el.classList.add("grid-line")
    el.style.top = (i / (data.nodes[0].size / 8) * 100) + "%"
    el.innerText = i * 8
    grid.appendChild(el)
}

addEventListener("mousemove", e => {
    tooltip.style.top = e.clientY + 10 + "px"
    tooltip.style.left = e.clientX + 10 + "px"
})

function locate() {
    container.style.top = height * y + "px"
    container.style.height = (height * zoom) + "px"

    table.style.width = container.style.height
}

locate()

})()
</script>
</html>`,t.pushExtCleanup(c)}}function lP(t){return async()=>{await t.config.toggleCheckOnSave(),t.refreshServerStatus()}}function dP(t){return async()=>{let e=z.workspace.getConfiguration("rust-analyzer"),n=e.get("trace.server")==="verbose"?void 0:"verbose";await e.update("trace.server",n,z.ConfigurationTarget.Workspace),n&&t.client&&t.client.traceOutputChannel&&t.client.traceOutputChannel.show()}}function fP(t){return async()=>{await z.commands.executeCommand("workbench.action.openWalkthrough","rust-lang.rust-analyzer#landing",!1)}}var ze=He(require("vscode"));var Dn=He(require("vscode")),pP=He(require("path")),nc=He(require("fs"));var od=class{dependenciesMap;ctx;constructor(e){this.dependenciesMap={},this.ctx=e}_onDidChangeTreeData=new Dn.EventEmitter;onDidChangeTreeData=this._onDidChangeTreeData.event;getDependency(e){return this.dependenciesMap[e.toLowerCase()]}contains(e){return e.toLowerCase()in this.dependenciesMap}isInitialized(){return Object.keys(this.dependenciesMap).length!==0}refresh(){this.dependenciesMap={},this._onDidChangeTreeData.fire()}getParent(e){if(!(e instanceof sd))return e.parent}getTreeItem(e){let n=this.dependenciesMap,i=e.id;return i in n?At(n[i]):e}getChildren(e){return new Promise((n,i)=>{if(!Dn.workspace.workspaceFolders)return Dn.window.showInformationMessage("No dependency in empty workspace"),Promise.resolve([]);if(e){let s=nc.readdirSync(e.dependencyPath).map(c=>{let u=pP.join(e.dependencyPath,c),l=nc.lstatSync(u).isDirectory()?Dn.TreeItemCollapsibleState.Collapsed:Dn.TreeItemCollapsibleState.None,f=new uv(c,u,e,l);return this.dependenciesMap[f.dependencyPath.toLowerCase()]=f,f});return n(s)}else return n(this.getRootDependencies())})}async getRootDependencies(){return(await this.ctx.client.sendRequest(CS,{})).crates.map(i=>{let s=this.toDep(i.name||"unknown",i.version||"",i.path);return this.dependenciesMap[s.dependencyPath.toLowerCase()]=s,s}).sort((i,s)=>i.label.localeCompare(s.label))}toDep(e,n,i){return new sd(e,n,Dn.Uri.parse(i).fsPath,Dn.TreeItemCollapsibleState.Collapsed)}},sd=class extends Dn.TreeItem{constructor(n,i,s,c){super(n,c);this.label=n;this.version=i;this.dependencyPath=s;this.collapsibleState=c;this.resourceUri=Dn.Uri.file(s),this.id=this.resourceUri.fsPath.toLowerCase(),this.description=this.version,this.version?this.tooltip=`${this.label}-${this.version}`:this.tooltip=this.label}},uv=class extends Dn.TreeItem{constructor(n,i,s,c){super(Dn.Uri.file(i),c);this.label=n;this.dependencyPath=i;this.parent=s;this.collapsibleState=c;this.id=this.resourceUri.fsPath.toLowerCase(),nc.lstatSync(this.resourceUri.fsPath).isDirectory()||(this.command={command:"vscode.open",title:"Open File",arguments:[this.resourceUri]})}};var ve=He(require("vscode"));var ad=class{_onDidChangeTreeData=new ve.EventEmitter;onDidChangeTreeData=this._onDidChangeTreeData.event;ctx;root;hideWhitespace=!1;constructor(e){this.ctx=e}getTreeItem(e){return new lv(e)}getChildren(e){return this.getRawChildren(e)}getParent(e){return e.parent}resolveTreeItem(e,n,i){let s=ve.window.activeTextEditor;if(s!==void 0){let c=s.document.getText(n.range);e.tooltip=new ve.MarkdownString().appendCodeblock(c,"rust")}return e}getRawChildren(e){return e?.type==="Node"?this.hideWhitespace?e.children.filter(n=>n.kind!=="WHITESPACE"):e.children:e?.type==="Token"?[]:e===void 0&&this.root!==void 0?[this.root]:[]}async refresh(){let e=ve.window.activeTextEditor;if(e&&bi(e)){let n={textDocument:{uri:e.document.uri.toString()},range:null},i=await this.ctx.client.sendRequest(aS,n);this.root=JSON.parse(i,(s,c)=>{if(c.type!=="Node"&&c.type!=="Token")return c;let[u,l,f]=c.start,[h,g,C]=c.end,_=new ve.Range(l,f,g,C),S={start:u,end:h},T;if(c.istart&&c.iend){let[L,F,H]=c.istart,[B,U,ee]=c.iend;T={offsets:{start:L,end:B},range:new ve.Range(F,H,U,ee)}}if(c.type==="Node"){let L={type:c.type,kind:c.kind,offsets:S,range:_,inner:T,children:c.children,parent:void 0,document:e.document};for(let F of L.children)F.parent=L;return L}else return{type:c.type,kind:c.kind,offsets:S,range:_,inner:T,parent:void 0,document:e.document}})}else this.root=void 0;this._onDidChangeTreeData.fire()}getElementByRange(e){if(this.root===void 0)return;let n=this.root;if(this.root.range.isEqual(e))return n;let i=this.getRawChildren(this.root);e:for(;;){for(let s of i)if(s.range.contains(e)){if(n=s,e.isEmpty&&e.start===s.range.end)continue;if(s.type==="Token")return n;i=this.getRawChildren(s);continue e}return n}}async toggleWhitespace(){this.hideWhitespace=!this.hideWhitespace,this._onDidChangeTreeData.fire(),await Ka("rustSyntaxTree.hideWhitespace",this.hideWhitespace)}},lv=class extends ve.TreeItem{constructor(n){super(n.kind);this.element=n;let i=h2(this.element.kind);this.element.type==="Node"?(this.contextValue="syntaxNode",this.iconPath=i??new ve.ThemeIcon("list-tree"),this.collapsibleState=ve.TreeItemCollapsibleState.Expanded):(this.contextValue="syntaxToken",this.iconPath=i??new ve.ThemeIcon("symbol-string"),this.collapsibleState=ve.TreeItemCollapsibleState.None);let s=this.element.inner?.offsets??this.element.offsets;this.description=`${s.start}..${s.end}`}};function h2(t){let e=g2[t];if(e!==void 0)return e;if(t.endsWith("_KW"))return new ve.ThemeIcon("symbol-keyword",new ve.ThemeColor("symbolIcon.keywordForeground"));if(m2.includes(t))return new ve.ThemeIcon("symbol-operator",new ve.ThemeColor("symbolIcon.operatorForeground"))}var g2={CALL_EXPR:new ve.ThemeIcon("call-outgoing"),COMMENT:new ve.ThemeIcon("comment"),ENUM:new ve.ThemeIcon("symbol-enum",new ve.ThemeColor("symbolIcon.enumForeground")),FN:new ve.ThemeIcon("symbol-function",new ve.ThemeColor("symbolIcon.functionForeground")),FLOAT_NUMBER:new ve.ThemeIcon("symbol-number",new ve.ThemeColor("symbolIcon.numberForeground")),INDEX_EXPR:new ve.ThemeIcon("symbol-array",new ve.ThemeColor("symbolIcon.arrayForeground")),INT_NUMBER:new ve.ThemeIcon("symbol-number",new ve.ThemeColor("symbolIcon.numberForeground")),LITERAL:new ve.ThemeIcon("symbol-misc",new ve.ThemeColor("symbolIcon.miscForeground")),MODULE:new ve.ThemeIcon("symbol-module",new ve.ThemeColor("symbolIcon.moduleForeground")),METHOD_CALL_EXPR:new ve.ThemeIcon("call-outgoing"),PARAM:new ve.ThemeIcon("symbol-parameter",new ve.ThemeColor("symbolIcon.parameterForeground")),RECORD_FIELD:new ve.ThemeIcon("symbol-field",new ve.ThemeColor("symbolIcon.fieldForeground")),SOURCE_FILE:new ve.ThemeIcon("file-code"),STRING:new ve.ThemeIcon("quote"),STRUCT:new ve.ThemeIcon("symbol-struct",new ve.ThemeColor("symbolIcon.structForeground")),TRAIT:new ve.ThemeIcon("symbol-interface",new ve.ThemeColor("symbolIcon.interfaceForeground")),TYPE_PARAM:new ve.ThemeIcon("symbol-type-parameter",new ve.ThemeColor("symbolIcon.typeParameterForeground")),VARIANT:new ve.ThemeIcon("symbol-enum-member",new ve.ThemeColor("symbolIcon.enumMemberForeground")),WHITESPACE:new ve.ThemeIcon("whitespace")},m2=["PLUS","PLUSEQ","MINUS","MINUSEQ","STAR","STAREQ","SLASH","SLASHEQ","PERCENT","PERCENTEQ","CARET","CARETEQ","AMP","AMPEQ","AMP2","PIPE","PIPEEQ","PIPE2","SHL","SHLEQ","SHR","SHREQ","EQ","EQ2","BANG","NEQ","L_ANGLE","LTEQ","R_ANGLE","GTEQ","COLON2","THIN_ARROW","FAT_ARROW","DOT","DOT2","DOT2EQ","AT"];var cd=class{constructor(e){this.globalState=e;let{serverVersion:n}=this;ot.info("PersistentState:",{serverVersion:n})}get serverVersion(){return this.globalState.get("serverVersion")}async updateServerVersion(e){await this.globalState.update("serverVersion",e)}};var zt=He(require("vscode")),gP=He(require("os"));var mP=require("child_process"),vP=require("node:util");async function yP(t,e,n){let i=await v2(t,e,n);if(!i)throw new Error("rust-analyzer Language Server is not available. Please, ensure its [proper installation](https://rust-analyzer.github.io/book/installation.html).");if(ot.info("Using server binary at",i),!_2(i,e.serverExtraEnv))throw new Error(`Failed to execute ${i} --version.`+(e.serverPath?"`config.server.path` or `config.serverPath` has been set explicitly.            Consider removing this config or making a valid server binary available at that path.":""));return i}async function v2(t,e,n){let i=t.extension.packageJSON,s=process.env.__RA_LSP_SERVER_DEBUG??e.serverPath;if(s)return s.startsWith("~/")?gP.homedir()+s.slice(1):s;let c;if(zt.workspace.workspaceFolders)for(let h of zt.workspace.workspaceFolders){let g=zt.Uri.joinPath(h.uri,"rust-toolchain.toml");if(await b2(g)){let C=await Ul("rustup",["which","rust-analyzer"],{env:{...process.env},cwd:h.uri.fsPath});!C.error&&C.status===0&&(c=await w2(c,C.stdout.trim(),y2))}}if(c)return c;if(i.releaseTag===null)return"rust-analyzer";let u=process.platform==="win32"?".exe":"",l=zt.Uri.joinPath(t.extensionUri,"server",`rust-analyzer${u}`);if(await C2(l)){let h=l;return await D2()&&(h=await T2(t.globalStorageUri,i.version,u,n,l,h),await n.updateServerVersion(i.version)),h.fsPath}await zt.window.showErrorMessage("Unfortunately we don't ship binaries for your platform yet. You need to manually clone the rust-analyzer repository and run `cargo xtask install --server` to build the language server from sources. If you feel that your platform should be supported, please create an issue about that [here](https://github.com/rust-lang/rust-analyzer/issues) and we will consider it.")}async function y2(t){let e=await Ul(t,["--version"]);if(!e.error&&e.status===0)return e.stdout}async function w2(t,e,n){return t&&await hP(t,n)<await hP(e,n)?t:e}async function hP(t,e){let i=(await e(t))?.match(/^rust-analyzer .*\(.* (\d{4}-\d{2}-\d{2})\)$/);if(i?.length===2){let s=t.includes("nightly-")?"0":"1";return"0-"+i[1]+"/"+s}else return"2"}async function C2(t){return await zt.workspace.fs.stat(t).then(()=>!0,()=>!1)}async function b2(t){try{return new vP.TextDecoder().decode(await zt.workspace.fs.readFile(t)).match(/components\s*=\s*\[.*"rust-analyzer".*\]/g)?.length===1}catch{return!1}}async function _2(t,e){ot.debug("Checking availability of a binary at",t);let n={...process.env};for(let[s,c]of Object.entries(e))c?n[s]=c:s in n&&delete n[s];let i=await Ul(t,["--version"],{env:n});return i.error?ot.warn(t,"--version:",i):ot.info(t,"--version:",i),i.status===0}async function T2(t,e,n,i,s,c){await zt.workspace.fs.createDirectory(t).then();let u=zt.Uri.joinPath(t,`rust-analyzer${n}`),l=await zt.workspace.fs.stat(u).then(()=>!0,()=>!1);return l&&e!==i.serverVersion&&(await zt.workspace.fs.delete(u),l=!1),l||(await zt.workspace.fs.copy(s,u),await R2(u)),c=u,c}async function D2(){try{return((await zt.workspace.fs.readFile(zt.Uri.file("/etc/os-release"))).toString().split(`
`).find(n=>n.startsWith("ID="))||"ID=linux").indexOf("nixos")!==-1}catch{return!1}}async function R2(t){await zt.window.withProgress({location:zt.ProgressLocation.Notification,title:"Patching rust-analyzer for NixOS"},async(e,n)=>{let i=`
            {srcStr, pkgs ? import <nixpkgs> {}}:
                pkgs.stdenv.mkDerivation {
                    name = "rust-analyzer";
                    src = /. + srcStr;
                    phases = [ "installPhase" "fixupPhase" ];
                    installPhase = "cp $src $out";
                    fixupPhase = ''
                    chmod 755 $out
                    patchelf --set-interpreter "$(cat $NIX_CC/nix-support/dynamic-linker)" $out
                    '';
                }
            `,s=zt.Uri.file(t.fsPath+"-orig");await zt.workspace.fs.rename(t,s,{overwrite:!0});try{e.report({message:"Patching executable",increment:20}),await new Promise((c,u)=>{let l=(0,mP.exec)(`nix-build -E - --argstr srcStr '${s.fsPath}' -o '${t.fsPath}'`,(f,h,g)=>{f!=null?u(Error(g)):c(h)});l.stdin?.write(i),l.stdin?.end()})}finally{await zt.workspace.fs.delete(s)}})}var Nn=He(require("vscode"));var wP=(t,e,n)=>{let i,s=new Map,c=new Map,u=new Map;e.createRunProfile("Run Tests",Nn.TestRunProfileKind.Run,async(g,C)=>{if(i)for(await n.sendNotification(Xm);i;)await new Promise(T=>setTimeout(T,1));i=e.createTestRun(g),C.onCancellationRequested(async()=>{await n.sendNotification(Xm)});let _=g.include?.map(T=>T.id),S=g.exclude?.map(T=>T.id);await n.sendRequest(mS,{include:_,exclude:S})},!0,void 0,!1),e.createRunProfile("Debug Tests",Nn.TestRunProfileKind.Debug,async g=>{if(g.include?.length!==1||g.exclude?.length!==0){await Nn.window.showErrorMessage("You can debug only one test at a time");return}let C=g.include[0].id,_=u.get(C);if(!_){await Nn.window.showErrorMessage("You can debug only one test at a time");return}await Xa(t,_)},!0,void 0,!1);let l=(g,C)=>{C.delete(g.id),s.delete(g.id),u.delete(g.id),g.uri&&c.set(g.uri.toString(),c.get(g.uri.toString()).filter(_=>_.id!==g.id))},f=g=>{let C=g.parent?s.get(g.parent).children:e.items,_=C.get(g.id),S=g.textDocument?.uri?Nn.Uri.parse(g.textDocument?.uri):void 0,T=g.range&&new Nn.Range(new Nn.Position(g.range.start.line,g.range.start.character),new Nn.Position(g.range.end.line,g.range.end.character));if(_){if(_.uri?.toString()===S?.toString()){_.range=T;return}l(_,C)}let L={package:"package",module:"symbol-module",test:"beaker"},F=e.createTestItem(g.id,`$(${L[g.kind]}) ${g.label}`,S);F.range=T,F.canResolveChildren=g.canResolveChildren,s.set(g.id,F),S&&(c.has(S.toString())||c.set(S.toString(),[]),c.get(S.toString()).push(F)),g.runnable&&u.set(g.id,g.runnable),C.add(F)},h=g=>{let{tests:C,scope:_,scopeFile:S}=g,T=new Set;for(let L of C)f(L),T.add(L.id);if(!_&&!S)for(let L of C)e.resolveHandler(s.get(L.id));if(_){let L=F=>{for(let[,H]of F)T.has(H.id)?L(H.children):l(H,F)};for(let F of _)L(s.get(F).children)}if(S){let L=F=>{let H=(c.get(F.toString())||[]).filter(B=>!T.has(B.id));for(let B of H){let U=B.parent?.children||e.items;l(B,U)}};for(let F of S)L(Nn.Uri.parse(F.uri))}};t.pushClientCleanup(n.onNotification(gS,g=>{h(g)})),t.pushClientCleanup(n.onNotification(vS,()=>{i.end(),i=void 0})),t.pushClientCleanup(n.onNotification(yS,g=>{i.appendOutput(`${g}\r
`)})),t.pushClientCleanup(n.onNotification(wS,g=>{let C=s.get(g.testId);g.state.tag==="failed"?i.failed(C,new Nn.TestMessage(g.state.message)):g.state.tag==="passed"?i.passed(C):g.state.tag==="started"?i.started(C):g.state.tag==="skipped"?i.skipped(C):g.state.tag==="enqueued"&&i.enqueued(C)})),e.resolveHandler=async g=>{let C=await n.sendRequest(hS,{testId:g?.id});h(C)},e.refreshHandler=async()=>{e.items.forEach(g=>{e.items.delete(g.id)}),s=new Map,await e.resolveHandler(void 0)}};var CP=require("node:child_process"),bP=require("node:stream/consumers");function dv(){let t=(ze.workspace.workspaceFolders||[]).filter(n=>n.uri.scheme==="file"),e=ze.workspace.textDocuments.filter(n=>Hi(n));return t.length===0?e.length===0?{kind:"Empty"}:{kind:"Detached Files",files:e}:{kind:"Workspace Folder"}}var ud=class{constructor(e,n,i){this.extCtx=e;e.subscriptions.push(this),this.version=e.extension.packageJSON.version??"<unknown>",this._serverVersion="<not running>",this.config=new ed(e),this.statusBar=ze.window.createStatusBarItem(ze.StatusBarAlignment.Left),this.updateStatusBarVisibility(ze.window.activeTextEditor),this.statusBarActiveEditorListener=ze.window.onDidChangeActiveTextEditor(s=>this.updateStatusBarVisibility(s)),this.config.testExplorer&&(this.testController=ze.tests.createTestController("rustAnalyzerTestController","Rust Analyzer test controller")),this.workspace=i,this.clientSubscriptions=[],this.commandDisposables=[],this.commandFactories=n,this.unlinkedFiles=[],this.state=new cd(e.globalState),this.updateCommands("disable"),this.setServerStatus({health:"stopped"})}statusBar;config;workspace;version;_client;_serverPath;traceOutputChannel;testController;outputChannel;clientSubscriptions;state;commandFactories;commandDisposables;unlinkedFiles;_dependenciesProvider;_dependencyTreeView;_syntaxTreeProvider;_syntaxTreeView;lastStatus={health:"stopped"};_serverVersion;statusBarActiveEditorListener;get serverPath(){return this._serverPath}get serverVersion(){return this._serverVersion}get client(){return this._client}get dependencyTreeView(){return this._dependencyTreeView}get dependenciesProvider(){return this._dependenciesProvider}get syntaxTreeView(){return this._syntaxTreeView}get syntaxTreeProvider(){return this._syntaxTreeProvider}async addConfiguration(e,n){await this.config.addExtensionConfiguration(e,n)}dispose(){this.config.dispose(),this.statusBar.dispose(),this.statusBarActiveEditorListener.dispose(),this.testController?.dispose(),this.disposeClient(),this.commandDisposables.forEach(e=>e.dispose())}async onWorkspaceFolderChanges(){let e=dv();if(e.kind==="Detached Files"&&this.workspace.kind==="Detached Files"&&e.files!==this.workspace.files){this.client?.isRunning()&&(await this.stopAndDispose(),await this.start());return}if(!(e.kind==="Workspace Folder"&&this.workspace.kind==="Workspace Folder")){if(e.kind==="Empty"){await this.stopAndDispose();return}this.client?.isRunning()&&await this.restart()}}async getOrCreateClient(){if(this.workspace.kind!=="Empty"){if(this.traceOutputChannel||(this.traceOutputChannel=new Ll("rust-analyzer LSP Trace"),this.pushExtCleanup(this.traceOutputChannel)),this.outputChannel||(this.outputChannel=ze.window.createOutputChannel("rust-analyzer Language Server"),this.pushExtCleanup(this.outputChannel)),!this._client){this._serverPath=await this.bootstrap(),(0,bP.text)((0,CP.spawn)(this._serverPath,["--version"]).stdout.setEncoding("utf-8")).then(u=>{let l="rust-analyzer ";this._serverVersion=u.slice(u.startsWith(l)?l.length:0).trim(),this.refreshServerStatus()},u=>{this._serverVersion="<unknown>",this.refreshServerStatus()});let e={...process.env};for(let[u,l]of Object.entries(this.config.serverExtraEnv))l?e[u]=l:u in e&&delete e[u];let n={command:this._serverPath,options:{env:e}},i={run:n,debug:n},s=this.config.cfg;this.workspace.kind==="Detached Files"&&(s={detachedFiles:this.workspace.files.map(u=>u.uri.fsPath),...s});let c=Ko(s);this._client=await ux(this.traceOutputChannel,this.outputChannel,c,i,this.config,this.unlinkedFiles),this.pushClientCleanup(this._client.onNotification(ES,u=>this.setServerStatus(u))),this.pushClientCleanup(this._client.onNotification(nS,()=>{this.outputChannel.show()}))}return this._client}}async bootstrap(){return yP(this.extCtx,this.config,this.state).catch(e=>{let n="bootstrap error. ";throw n+='See the logs in "OUTPUT > Rust Analyzer Client" (should open automatically).',n+='To enable verbose logs, click the gear icon in the "OUTPUT" tab and select "Debug".',ot.error("Bootstrap error",e),new Error(n)})}async start(){ot.info("Starting language client");let e=await this.getOrCreateClient();e&&(await e.start(),this.updateCommands(),this.testController&&wP(this,this.testController,e),this.config.showDependenciesExplorer&&this.prepareTreeDependenciesView(e),this.config.showSyntaxTree&&this.prepareSyntaxTreeView(e))}prepareTreeDependenciesView(e){let n={...this,client:e};this._dependenciesProvider=new od(n),this._dependencyTreeView=ze.window.createTreeView("rustDependencies",{treeDataProvider:this._dependenciesProvider,showCollapseAll:!0}),this.pushExtCleanup(this._dependencyTreeView),ze.window.onDidChangeActiveTextEditor(async i=>{if(this.shouldRevealDependency(i))try{await cv(i)}catch(s){await ze.window.showErrorMessage(`Dependency error: ${s}`)}}),this.dependencyTreeView?.onDidChangeVisibility(async i=>{if(i.visible){let s=ze.window.activeTextEditor;if(this.shouldRevealDependency(s))try{await cv(s)}catch(c){await ze.window.showErrorMessage(`Dependency error: ${c}`)}}})}shouldRevealDependency(e){return e!==void 0&&bi(e)&&!FS(e.document)&&(this.dependencyTreeView?.visible||!1)}prepareSyntaxTreeView(e){let n={...this,client:e};this._syntaxTreeProvider=new ad(n),this._syntaxTreeView=ze.window.createTreeView("rustSyntaxTree",{treeDataProvider:this._syntaxTreeProvider,showCollapseAll:!0}),this.pushExtCleanup(this._syntaxTreeView),ze.window.onDidChangeActiveTextEditor(async()=>{this.syntaxTreeView?.visible&&await this.syntaxTreeProvider?.refresh()}),ze.workspace.onDidChangeTextDocument(async i=>{ze.window.activeTextEditor?.document!==i.document||i.contentChanges.length===0||this.syntaxTreeView?.visible&&await this.syntaxTreeProvider?.refresh()}),ze.window.onDidChangeTextEditorSelection(async i=>{if(!this.syntaxTreeView?.visible||!bi(i.textEditor))return;let s=i.selections[0];if(s===void 0)return;let c=this.syntaxTreeProvider?.getElementByRange(s);c!==void 0&&await this.syntaxTreeView?.reveal(c)}),this._syntaxTreeView.onDidChangeVisibility(async i=>{i.visible&&await this.syntaxTreeProvider?.refresh()})}async restart(){await this.stopAndDispose(),await this.start()}async stop(){this._client&&(ot.info("Stopping language client"),this.updateCommands("disable"),await this._client.stop())}async stopAndDispose(){this._client&&(ot.info("Disposing language client"),this.updateCommands("disable"),await this.client?.stop(100).catch(e=>{}),await this.disposeClient())}async disposeClient(){this.clientSubscriptions?.forEach(e=>e.dispose()),this.clientSubscriptions=[],await this._client?.dispose(),this._serverPath=void 0,this._client=void 0}get activeRustEditor(){let e=ze.window.activeTextEditor;return e&&bi(e)?e:void 0}get activeCargoTomlEditor(){let e=ze.window.activeTextEditor;return e&&qS(e)?e:void 0}get extensionPath(){return this.extCtx.extensionPath}get subscriptions(){return this.extCtx.subscriptions}updateCommands(e){this.commandDisposables.forEach(s=>s.dispose()),this.commandDisposables=[];let n=(!e&&this._client?.isRunning())??!1,i=function(s){return n};for(let[s,c]of Object.entries(this.commandFactories)){let u=`rust-analyzer.${s}`,l;i(this)?l=c.enabled(this):c.disabled?l=c.disabled(this):l=()=>ze.window.showErrorMessage(`command ${u} failed: rust-analyzer server is not running`),this.commandDisposables.push(ze.commands.registerCommand(u,l))}}setServerStatus(e){this.lastStatus=e,this.updateStatusBarItem()}refreshServerStatus(){this.updateStatusBarItem()}updateStatusBarItem(){let e="",n=this.lastStatus,i=this.statusBar;switch(i.tooltip=new ze.MarkdownString("",!0),i.tooltip.isTrusted=!0,n.health){case"ok":i.color=void 0,i.backgroundColor=void 0,this.config.statusBarClickAction==="stopServer"?i.command="rust-analyzer.stopServer":i.command="rust-analyzer.openLogs",this.dependenciesProvider?.refresh(),this.syntaxTreeProvider?.refresh();break;case"warning":i.color=new ze.ThemeColor("statusBarItem.warningForeground"),i.backgroundColor=new ze.ThemeColor("statusBarItem.warningBackground"),i.command="rust-analyzer.openLogs",e="$(warning) ";break;case"error":i.color=new ze.ThemeColor("statusBarItem.errorForeground"),i.backgroundColor=new ze.ThemeColor("statusBarItem.errorBackground"),i.command="rust-analyzer.openLogs",e="$(error) ";break;case"stopped":i.tooltip.appendText("Server is stopped"),i.tooltip.appendMarkdown(`

[Start server](command:rust-analyzer.startServer)`),i.color=new ze.ThemeColor("statusBarItem.warningForeground"),i.backgroundColor=new ze.ThemeColor("statusBarItem.warningBackground"),i.command="rust-analyzer.startServer",i.text="$(stop-circle) rust-analyzer";return}n.message&&i.tooltip.appendMarkdown(n.message),i.tooltip.value&&i.tooltip.appendMarkdown(`

---

`);let s=this.config.checkOnSave?"Disable":"Enable";i.tooltip.appendMarkdown(`[Extension Info](command:rust-analyzer.serverVersion "Show version and server binary info"): Version ${this.version}, Server Version ${this._serverVersion}

---

[$(terminal) Open Logs](command:rust-analyzer.openLogs "Open the server logs")

[$(settings) ${s} Check on Save](command:rust-analyzer.toggleCheckOnSave "Temporarily ${s.toLowerCase()} check on save functionality")

[$(refresh) Reload Workspace](command:rust-analyzer.reloadWorkspace "Reload and rediscover workspaces")

[$(symbol-property) Rebuild Build Dependencies](command:rust-analyzer.rebuildProcMacros "Rebuild build scripts and proc-macros")

[$(stop-circle) Stop server](command:rust-analyzer.stopServer "Stop the server")

[$(debug-restart) Restart server](command:rust-analyzer.restartServer "Restart the server")`),n.quiescent||(e="$(loading~spin) "),i.text=`${e}rust-analyzer`}updateStatusBarVisibility(e){let n=this.config.statusBarShowStatusBar;if(n==null||n==="never")this.statusBar.hide();else if(n==="always")this.statusBar.show();else{let i=n.documentSelector;e!=null&&ze.languages.match(i,e.document)>0?this.statusBar.show():this.statusBar.hide()}}pushExtCleanup(e){this.extCtx.subscriptions.push(e)}pushClientCleanup(e){this.clientSubscriptions.push(e)}};var TP="inRustProject";async function S2(){await Ka(TP,void 0)}async function x2(t){k2();let e=new ud(t,E2(),dv()),n=await P2(e).catch(i=>{throw $n.window.showErrorMessage(`Cannot activate rust-analyzer extension: ${i.message}`),i});return await Ka(TP,!0),n}async function P2(t){t.workspace.kind==="Workspace Folder"&&t.pushExtCleanup(KS(t.config));let e=new Jl(t);t.pushExtCleanup($n.workspace.registerTextDocumentContentProvider($s,e));let n=new Yl(t);t.pushExtCleanup(n);async function i(s){for(let c of $n.window.visibleTextEditors)s===c.document&&await n.provideDecorations(c)}return $n.workspace.onDidChangeTextDocument(async s=>await i(s.document),null,t.subscriptions),$n.workspace.onDidOpenTextDocument(i,null,t.subscriptions),$n.window.onDidChangeActiveTextEditor(async s=>{s&&(e.triggerUpdate(s.document.uri),await i(s.document))},null,t.subscriptions),$n.window.onDidChangeVisibleTextEditors(async s=>{for(let c of s)e.triggerUpdate(c.document.uri),await n.provideDecorations(c)},null,t.subscriptions),$n.workspace.onDidChangeWorkspaceFolders(async s=>t.onWorkspaceFolderChanges(),null,t.subscriptions),$n.workspace.onDidChangeConfiguration(async s=>{await t.client?.sendNotification(_P.DidChangeConfigurationNotification.type,{settings:""})},null,t.subscriptions),t.config.debug.buildBeforeRestart&&GS(t),t.config.initializeStopped?t.setServerStatus({health:"stopped"}):await t.start(),t}function E2(){return{onEnter:{enabled:Cx,disabled:t=>()=>$n.commands.executeCommand("default:type",{text:`
`})},restartServer:{enabled:t=>async()=>{await t.restart()},disabled:t=>async()=>{await t.start()}},startServer:{enabled:t=>async()=>{await t.start()},disabled:t=>async()=>{await t.start()}},stopServer:{enabled:t=>async()=>{await t.stopAndDispose(),t.setServerStatus({health:"stopped"})},disabled:t=>async()=>{}},analyzerStatus:{enabled:lx},memoryUsage:{enabled:dx},reloadWorkspace:{enabled:jx},rebuildProcMacros:{enabled:zx},matchingBrace:{enabled:gx},joinLines:{enabled:mx},parentModule:{enabled:bx},childModules:{enabled:_x},viewHir:{enabled:Fx},viewMir:{enabled:Ax},interpretFunction:{enabled:Lx},viewFileText:{enabled:Mx},viewItemTree:{enabled:Nx},viewCrateGraph:{enabled:Ux},viewFullCrateGraph:{enabled:Hx},expandMacro:{enabled:Wx},run:{enabled:t=>e=>tP(t,e)()},copyRunCommandLine:{enabled:iP},debug:{enabled:oP},newDebugConfig:{enabled:aP},openDocs:{enabled:Gx},openExternalDocs:{enabled:Xx},openCargoToml:{enabled:Tx},peekTests:{enabled:nP},moveItemUp:{enabled:vx},moveItemDown:{enabled:yx},cancelFlycheck:{enabled:Qx},clearFlycheck:{enabled:Jx},runFlycheck:{enabled:Yx},ssr:{enabled:kx},serverVersion:{enabled:Ix},viewMemoryLayout:{enabled:uP},toggleCheckOnSave:{enabled:lP},toggleLSPLogs:{enabled:dP},openWalkthrough:{enabled:fP},applyActionGroup:{enabled:Bx},applySnippetWorkspaceEdit:{enabled:eP},debugSingle:{enabled:sP},gotoLocation:{enabled:Vx},hoverRefCommandProxy:{enabled:cP},resolveCodeAction:{enabled:Zx},runSingle:{enabled:rP},showReferences:{enabled:Kx},triggerParameterHints:{enabled:fx},rename:{enabled:px},openLogs:{enabled:hx},revealDependency:{enabled:Dx},syntaxTreeReveal:{enabled:Rx},syntaxTreeCopy:{enabled:xx},syntaxTreeHideWhitespace:{enabled:Px},syntaxTreeShowWhitespace:{enabled:Ex}}}function k2(){$n.extensions.getExtension("rust-lang.rust")&&$n.window.showWarningMessage("You have both the rust-analyzer (rust-lang.rust-analyzer) and Rust (rust-lang.rust) plugins enabled. These are known to conflict and cause various functions of both plugins to not work correctly. You should disable one of them.","Got it").then(()=>{},console.error)}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
